var Zepto=function(){function t(t){return null==t?String(t):K[Y.call(t)]||"object"}function e(e){return"function"==t(e)}function n(t){return null!=t&&t==t.window}function r(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function i(e){return"object"==t(e)}function o(t){return i(t)&&!n(t)&&Object.getPrototypeOf(t)==Object.prototype}function s(t){return"number"==typeof t.length}function a(t){return T.call(t,function(t){return null!=t})}function u(t){return t.length>0?N.fn.concat.apply([],t):t}function c(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function h(t){return t in D?D[t]:D[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function l(t,e){return"number"!=typeof e||L[c(t)]?e:e+"px"}function p(t){var e,n;return R[t]||(e=A.createElement(t),A.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),R[t]=n),R[t]}function f(t){return"children"in t?I.call(t.children):N.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function d(t,e,n){for(_ in e)n&&(o(e[_])||$(e[_]))?(o(e[_])&&!o(t[_])&&(t[_]={}),$(e[_])&&!$(t[_])&&(t[_]=[]),d(t[_],e[_],n)):e[_]!==C&&(t[_]=e[_])}function v(t,e){return null==e?N(t):N(t).filter(e)}function y(t,n,r,i){return e(n)?n.call(t,r,i):n}function g(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function m(t,e){var n=t.className||"",r=n&&n.baseVal!==C;return e===C?r?n.baseVal:n:void(r?n.baseVal=e:t.className=e)}function E(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?N.parseJSON(t):t):t}catch(e){return t}}function b(t,e){e(t);for(var n=0,r=t.childNodes.length;r>n;n++)b(t.childNodes[n],e)}var C,_,N,w,S,O,P=[],I=P.slice,T=P.filter,A=window.document,R={},D={},L={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},M=/^\s*<(\w+|!)[^>]*>/,k=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,F=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,x=/^(?:body|html)$/i,j=/([A-Z])/g,B=["val","css","html","text","data","width","height","offset"],W=A.createElement("table"),U=A.createElement("tr"),V={tr:A.createElement("tbody"),tbody:W,thead:W,tfoot:W,td:U,th:U,"*":A.createElement("div")},H=/complete|loaded|interactive/,q=/^[\w-]*$/,K={},Y=K.toString,Q={},G=A.createElement("div"),z={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},$=Array.isArray||function(t){return t instanceof Array};return Q.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var r,i=t.parentNode,o=!i;return o&&(i=G).appendChild(t),r=~Q.qsa(i,e).indexOf(t),o&&G.removeChild(t),r},S=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},O=function(t){return T.call(t,function(e,n){return t.indexOf(e)==n})},Q.fragment=function(t,e,n){var r,i,s;return k.test(t)&&(r=N(A.createElement(RegExp.$1))),r||(t.replace&&(t=t.replace(F,"<$1></$2>")),e===C&&(e=M.test(t)&&RegExp.$1),e in V||(e="*"),s=V[e],s.innerHTML=""+t,r=N.each(I.call(s.childNodes),function(){s.removeChild(this)})),o(n)&&(i=N(r),N.each(n,function(t,e){B.indexOf(t)>-1?i[t](e):i.attr(t,e)})),r},Q.Z=function(t,e){return t=t||[],t.__proto__=N.fn,t.selector=e||"",t},Q.isZ=function(t){return t instanceof Q.Z},Q.init=function(t,n){var r;if(!t)return Q.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&M.test(t))r=Q.fragment(t,RegExp.$1,n),t=null;else{if(n!==C)return N(n).find(t);r=Q.qsa(A,t)}else{if(e(t))return N(A).ready(t);if(Q.isZ(t))return t;if($(t))r=a(t);else if(i(t))r=[t],t=null;else if(M.test(t))r=Q.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==C)return N(n).find(t);r=Q.qsa(A,t)}}return Q.Z(r,t)},N=function(t,e){return Q.init(t,e)},N.extend=function(t){var e,n=I.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){d(t,n,e)}),t},Q.qsa=function(t,e){var n,i="#"==e[0],o=!i&&"."==e[0],s=i||o?e.slice(1):e,a=q.test(s);return r(t)&&a&&i?(n=t.getElementById(s))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:I.call(a&&!i?o?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},N.contains=A.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},N.type=t,N.isFunction=e,N.isWindow=n,N.isArray=$,N.isPlainObject=o,N.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},N.inArray=function(t,e,n){return P.indexOf.call(e,t,n)},N.camelCase=S,N.trim=function(t){return null==t?"":String.prototype.trim.call(t)},N.uuid=0,N.support={},N.expr={},N.map=function(t,e){var n,r,i,o=[];if(s(t))for(r=0;r<t.length;r++)null!=(n=e(t[r],r))&&o.push(n);else for(i in t)null!=(n=e(t[i],i))&&o.push(n);return u(o)},N.each=function(t,e){var n,r;if(s(t)){for(n=0;n<t.length;n++)if(!1===e.call(t[n],n,t[n]))return t}else for(r in t)if(!1===e.call(t[r],r,t[r]))return t;return t},N.grep=function(t,e){return T.call(t,e)},window.JSON&&(N.parseJSON=JSON.parse),N.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){K["[object "+e+"]"]=e.toLowerCase()}),N.fn={forEach:P.forEach,reduce:P.reduce,push:P.push,sort:P.sort,indexOf:P.indexOf,concat:P.concat,map:function(t){return N(N.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return N(I.apply(this,arguments))},ready:function(t){return H.test(A.readyState)&&A.body?t(N):A.addEventListener("DOMContentLoaded",function(){t(N)},!1),this},get:function(t){return t===C?I.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return P.every.call(this,function(e,n){return!1!==t.call(e,n,e)}),this},filter:function(t){return e(t)?this.not(this.not(t)):N(T.call(this,function(e){return Q.matches(e,t)}))},add:function(t,e){return N(O(this.concat(N(t,e))))},is:function(t){return this.length>0&&Q.matches(this[0],t)},not:function(t){var n=[];if(e(t)&&t.call!==C)this.each(function(e){t.call(this,e)||n.push(this)});else{var r="string"==typeof t?this.filter(t):s(t)&&e(t.item)?I.call(t):N(t);this.forEach(function(t){r.indexOf(t)<0&&n.push(t)})}return N(n)},has:function(t){return this.filter(function(){return i(t)?N.contains(this,t):N(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!i(t)?t:N(t)},last:function(){var t=this[this.length-1];return t&&!i(t)?t:N(t)},find:function(t){var e=this;return t?"object"==typeof t?N(t).filter(function(){var t=this;return P.some.call(e,function(e){return N.contains(e,t)})}):1==this.length?N(Q.qsa(this[0],t)):this.map(function(){return Q.qsa(this,t)}):N()},closest:function(t,e){var n=this[0],i=!1;for("object"==typeof t&&(i=N(t));n&&!(i?i.indexOf(n)>=0:Q.matches(n,t));)n=n!==e&&!r(n)&&n.parentNode;return N(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=N.map(n,function(t){return(t=t.parentNode)&&!r(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return v(e,t)},parent:function(t){return v(O(this.pluck("parentNode")),t)},children:function(t){return v(this.map(function(){return f(this)}),t)},contents:function(){return this.map(function(){return I.call(this.childNodes)})},siblings:function(t){return v(this.map(function(t,e){return T.call(f(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return N.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=p(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=e(t);if(this[0]&&!n)var r=N(t).get(0),i=r.parentNode||this.length>1;return this.each(function(e){N(this).wrapAll(n?t.call(this,e):i?r.cloneNode(!0):r)})},wrapAll:function(t){if(this[0]){N(this[0]).before(t=N(t));for(var e;(e=t.children()).length;)t=e.first();N(t).append(this)}return this},wrapInner:function(t){var n=e(t);return this.each(function(e){var r=N(this),i=r.contents(),o=n?t.call(this,e):t;i.length?i.wrapAll(o):r.append(o)})},unwrap:function(){return this.parent().each(function(){N(this).replaceWith(N(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=N(this);(t===C?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return N(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return N(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var n=this.innerHTML;N(this).empty().append(y(this,t,e,n))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=y(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(t,e){var n;return"string"!=typeof t||1 in arguments?this.each(function(n){if(1===this.nodeType)if(i(t))for(_ in t)g(this,_,t[_]);else g(this,t,y(this,e,n,this.getAttribute(t)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:C},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){g(this,t)},this)})},prop:function(t,e){return t=z[t]||t,1 in arguments?this.each(function(n){this[t]=y(this,e,n,this[t])}):this[0]&&this[0][t]},data:function(t,e){var n="data-"+t.replace(j,"-$1").toLowerCase(),r=1 in arguments?this.attr(n,e):this.attr(n);return null!==r?E(r):C},val:function(t){return 0 in arguments?this.each(function(e){this.value=y(this,t,e,this.value)}):this[0]&&(this[0].multiple?N(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var n=N(this),r=y(this,t,e,n.offset()),i=n.offsetParent().offset(),o={top:r.top-i.top,left:r.left-i.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(!this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,n){if(arguments.length<2){var r,i=this[0];if(!i)return;if(r=getComputedStyle(i,""),"string"==typeof e)return i.style[S(e)]||r.getPropertyValue(e);if($(e)){var o={};return N.each(e,function(t,e){o[e]=i.style[S(e)]||r.getPropertyValue(e)}),o}}var s="";if("string"==t(e))n||0===n?s=c(e)+":"+l(e,n):this.each(function(){this.style.removeProperty(c(e))});else for(_ in e)e[_]||0===e[_]?s+=c(_)+":"+l(_,e[_])+";":this.each(function(){this.style.removeProperty(c(_))});return this.each(function(){this.style.cssText+=";"+s})},index:function(t){return t?this.indexOf(N(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&P.some.call(this,function(t){return this.test(m(t))},h(t))},addClass:function(t){return t?this.each(function(e){if("className"in this){w=[];var n=m(this);y(this,t,e,n).split(/\s+/g).forEach(function(t){N(this).hasClass(t)||w.push(t)},this),w.length&&m(this,n+(n?" ":"")+w.join(" "))}}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===C)return m(this,"");w=m(this),y(this,t,e,w).split(/\s+/g).forEach(function(t){w=w.replace(h(t)," ")}),m(this,w.trim())}})},toggleClass:function(t,e){return t?this.each(function(n){var r=N(this);y(this,t,n,m(this)).split(/\s+/g).forEach(function(t){(e===C?!r.hasClass(t):e)?r.addClass(t):r.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===C?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===C?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),r=x.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(N(t).css("margin-top"))||0,n.left-=parseFloat(N(t).css("margin-left"))||0,r.top+=parseFloat(N(e[0]).css("border-top-width"))||0,r.left+=parseFloat(N(e[0]).css("border-left-width"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||A.body;t&&!x.test(t.nodeName)&&"static"==N(t).css("position");)t=t.offsetParent;return t})}},N.fn.detach=N.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});N.fn[t]=function(i){var o,s=this[0];return i===C?n(s)?s["inner"+e]:r(s)?s.documentElement["scroll"+e]:(o=this.offset())&&o[t]:this.each(function(e){(s=N(this)).css(t,y(this,i,e,s[t]()))})}}),["after","prepend","before","append"].forEach(function(e,n){var r=n%2;N.fn[e]=function(){var e,i,o=N.map(arguments,function(n){return"object"==(e=t(n))||"array"==e||null==n?n:Q.fragment(n)}),s=this.length>1;return o.length<1?this:this.each(function(t,e){i=r?e:e.parentNode,e=0==n?e.nextSibling:1==n?e.firstChild:2==n?e:null;var a=N.contains(A.documentElement,i);o.forEach(function(t){if(s)t=t.cloneNode(!0);else if(!i)return N(t).remove();i.insertBefore(t,e),a&&b(t,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},N.fn[r?e+"To":"insert"+(n?"Before":"After")]=function(t){return N(t)[e](this),this}}),Q.Z.prototype=N.fn,Q.uniq=O,Q.deserializeValue=E,N.zepto=Q,N}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function e(t){return t._zid||(t._zid=p++)}function n(t,n,o,s){if((n=r(n)).ns)var a=i(n.ns);return(y[e(t)]||[]).filter(function(t){return!(!t||n.e&&t.e!=n.e||n.ns&&!a.test(t.ns)||o&&e(t.fn)!==e(o)||s&&t.sel!=s)})}function r(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function i(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function o(t,e){return t.del&&!m&&t.e in E||!!e}function s(t){return b[t]||m&&E[t]||t}function a(n,i,a,u,h,p,f){var d=e(n),v=y[d]||(y[d]=[]);i.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(a);var i=r(e);i.fn=a,i.sel=h,i.e in b&&(a=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?i.fn.apply(this,arguments):void 0}),i.del=p;var d=p||a;i.proxy=function(t){if(!(t=c(t)).isImmediatePropagationStopped()){t.data=u;var e=d.apply(n,t._args==l?[t]:[t].concat(t._args));return!1===e&&(t.preventDefault(),t.stopPropagation()),e}},i.i=v.length,v.push(i),"addEventListener"in n&&n.addEventListener(s(i.e),i.proxy,o(i,f))})}function u(t,r,i,a,u){var c=e(t);(r||"").split(/\s/).forEach(function(e){n(t,e,i,a).forEach(function(e){delete y[c][e.i],"removeEventListener"in t&&t.removeEventListener(s(e.e),e.proxy,o(e,u))})})}function c(e,n){return(n||!e.isDefaultPrevented)&&(n||(n=e),t.each(w,function(t,r){var i=n[t];e[t]=function(){return this[r]=C,i&&i.apply(n,arguments)},e[r]=_}),(n.defaultPrevented!==l?n.defaultPrevented:"returnValue"in n?!1===n.returnValue:n.getPreventDefault&&n.getPreventDefault())&&(e.isDefaultPrevented=C)),e}function h(t){var e,n={originalEvent:t};for(e in t)N.test(e)||t[e]===l||(n[e]=t[e]);return c(n,t)}var l,p=1,f=Array.prototype.slice,d=t.isFunction,v=function(t){return"string"==typeof t},y={},g={},m="onfocusin"in window,E={focus:"focusin",blur:"focusout"},b={mouseenter:"mouseover",mouseleave:"mouseout"};g.click=g.mousedown=g.mouseup=g.mousemove="MouseEvents",t.event={add:a,remove:u},t.proxy=function(n,r){var i=2 in arguments&&f.call(arguments,2);if(d(n)){var o=function(){return n.apply(r,i?i.concat(f.call(arguments)):arguments)};return o._zid=e(n),o}if(v(r))return i?(i.unshift(n[r],n),t.proxy.apply(null,i)):t.proxy(n[r],n);throw new TypeError("expected function")},t.fn.bind=function(t,e,n){return this.on(t,e,n)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,n,r){return this.on(t,e,n,r,1)};var C=function(){return!0},_=function(){return!1},N=/^([A-Z]|returnValue$|layer[XY]$)/,w={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,r,i,o){var s,c,p=this;return e&&!v(e)?(t.each(e,function(t,e){p.on(t,n,r,e,o)}),p):(v(n)||d(i)||!1===i||(i=r,r=n,n=l),(d(r)||!1===r)&&(i=r,r=l),!1===i&&(i=_),p.each(function(l,p){o&&(s=function(t){return u(p,t.type,i),i.apply(this,arguments)}),n&&(c=function(e){var r,o=t(e.target).closest(n,p).get(0);return o&&o!==p?(r=t.extend(h(e),{currentTarget:o,liveFired:p}),(s||i).apply(o,[r].concat(f.call(arguments,1)))):void 0}),a(p,e,i,r,n,c||s)}))},t.fn.off=function(e,n,r){var i=this;return e&&!v(e)?(t.each(e,function(t,e){i.off(t,n,e)}),i):(v(n)||d(r)||!1===r||(r=n,n=l),!1===r&&(r=_),i.each(function(){u(this,e,r,n)}))},t.fn.trigger=function(e,n){return e=v(e)||t.isPlainObject(e)?t.Event(e):c(e),e._args=n,this.each(function(){e.type in E&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,r){var i,o;return this.each(function(s,a){(i=h(v(e)?t.Event(e):e))._args=r,i.target=a,t.each(n(a,e.type||e),function(t,e){return o=e.proxy(i),!i.isImmediatePropagationStopped()&&void 0})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(t,e){v(t)||(e=t,t=e.type);var n=document.createEvent(g[t]||"Events"),r=!0;if(e)for(var i in e)"bubbles"==i?r=!!e[i]:n[i]=e[i];return n.initEvent(t,r,!0),c(n)}}(Zepto),function(t){function e(e,n,r){var i=t.Event(n);return t(e).trigger(i,r),!i.isDefaultPrevented()}function n(t,n,r,i){return t.global?e(n||m,r,i):void 0}function r(e){e.global&&0==t.active++&&n(e,null,"ajaxStart")}function i(e){e.global&&!--t.active&&n(e,null,"ajaxStop")}function o(t,e){var r=e.context;return!1!==e.beforeSend.call(r,t,e)&&!1!==n(e,r,"ajaxBeforeSend",[t,e])&&void n(e,r,"ajaxSend",[t,e])}function s(t,e,r,i){var o=r.context,s="success";r.success.call(o,t,s,e),i&&i.resolveWith(o,[t,s,e]),n(r,o,"ajaxSuccess",[e,r,t]),u(s,e,r)}function a(t,e,r,i,o){var s=i.context;i.error.call(s,r,e,t),o&&o.rejectWith(s,[r,e,t]),n(i,s,"ajaxError",[r,i,t||e]),u(e,r,i)}function u(t,e,r){var o=r.context;r.complete.call(o,e,t),n(r,o,"ajaxComplete",[e,r]),i(r)}function c(){}function h(t){return t&&(t=t.split(";",2)[0]),t&&(t==N?"html":t==_?"json":b.test(t)?"script":C.test(t)&&"xml")||"text"}function l(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function p(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=l(e.url,e.data),e.data=void 0)}function f(e,n,r,i){return t.isFunction(n)&&(i=r,r=n,n=void 0),t.isFunction(r)||(i=r,r=void 0),{url:e,data:n,success:r,dataType:i}}function d(e,n,r,i){var o,s=t.isArray(n),a=t.isPlainObject(n);t.each(n,function(n,u){o=t.type(u),i&&(n=r?i:i+"["+(a||"object"==o||"array"==o?n:"")+"]"),!i&&s?e.add(u.name,u.value):"array"==o||!r&&"object"==o?d(e,u,r,n):e.add(n,u)})}var v,y,g=0,m=window.document,E=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,b=/^(?:text|application)\/javascript/i,C=/^(?:text|application)\/xml/i,_="application/json",N="text/html",w=/^\s*$/,S=m.createElement("a");S.href=window.location.href,t.active=0,t.ajaxJSONP=function(e,n){if(!("type"in e))return t.ajax(e);var r,i,u=e.jsonpCallback,c=(t.isFunction(u)?u():u)||"jsonp"+ ++g,h=m.createElement("script"),l=window[c],p=function(e){t(h).triggerHandler("error",e||"abort")},f={abort:p};return n&&n.promise(f),t(h).on("load error",function(o,u){clearTimeout(i),t(h).off().remove(),"error"!=o.type&&r?s(r[0],f,e,n):a(null,u||"error",f,e,n),window[c]=l,r&&t.isFunction(l)&&l(r[0]),l=r=void 0}),!1===o(f,e)?(p("abort"),f):(window[c]=function(){r=arguments},h.src=e.url.replace(/\?(.+)=\?/,"?$1="+c),m.head.appendChild(h),e.timeout>0&&(i=setTimeout(function(){p("timeout")},e.timeout)),f)},t.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:_,xml:"application/xml, text/xml",html:N,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n,i=t.extend({},e||{}),u=t.Deferred&&t.Deferred();for(v in t.ajaxSettings)void 0===i[v]&&(i[v]=t.ajaxSettings[v]);r(i),i.crossDomain||(n=m.createElement("a"),n.href=i.url,n.href=n.href,i.crossDomain=S.protocol+"//"+S.host!=n.protocol+"//"+n.host),i.url||(i.url=window.location.toString()),p(i);var f=i.dataType,d=/\?.+=\?/.test(i.url);if(d&&(f="jsonp"),!1!==i.cache&&(e&&!0===e.cache||"script"!=f&&"jsonp"!=f)||(i.url=l(i.url,"_="+Date.now())),"jsonp"==f)return d||(i.url=l(i.url,i.jsonp?i.jsonp+"=?":!1===i.jsonp?"":"callback=?")),t.ajaxJSONP(i,u);var g,E=i.accepts[f],b={},C=function(t,e){b[t.toLowerCase()]=[t,e]},_=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,N=i.xhr(),O=N.setRequestHeader;if(u&&u.promise(N),i.crossDomain||C("X-Requested-With","XMLHttpRequest"),C("Accept",E||"*/*"),(E=i.mimeType||E)&&(E.indexOf(",")>-1&&(E=E.split(",",2)[0]),N.overrideMimeType&&N.overrideMimeType(E)),(i.contentType||!1!==i.contentType&&i.data&&"GET"!=i.type.toUpperCase())&&C("Content-Type",i.contentType||"application/x-www-form-urlencoded"),i.headers)for(y in i.headers)C(y,i.headers[y]);if(N.setRequestHeader=C,N.onreadystatechange=function(){if(4==N.readyState){N.onreadystatechange=c,clearTimeout(g);var e,n=!1;if(N.status>=200&&N.status<300||304==N.status||0==N.status&&"file:"==_){f=f||h(i.mimeType||N.getResponseHeader("content-type")),e=N.responseText;try{"script"==f?(0,eval)(e):"xml"==f?e=N.responseXML:"json"==f&&(e=w.test(e)?null:t.parseJSON(e))}catch(t){n=t}n?a(n,"parsererror",N,i,u):s(e,N,i,u)}else a(N.statusText||null,N.status?"error":"abort",N,i,u)}},!1===o(N,i))return N.abort(),a(null,"abort",N,i,u),N;if(i.xhrFields)for(y in i.xhrFields)N[y]=i.xhrFields[y];var P=!("async"in i)||i.async;N.open(i.type,i.url,P,i.username,i.password);for(y in b)O.apply(N,b[y]);return i.timeout>0&&(g=setTimeout(function(){N.onreadystatechange=c,N.abort(),a(null,"timeout",N,i,u)},i.timeout)),N.send(i.data?i.data:null),N},t.get=function(){return t.ajax(f.apply(null,arguments))},t.post=function(){var e=f.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=f.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,r){if(!this.length)return this;var i,o=this,s=e.split(/\s/),a=f(e,n,r),u=a.success;return s.length>1&&(a.url=s[0],i=s[1]),a.success=function(e){o.html(i?t("<div>").html(e.replace(E,"")).find(i):e),u&&u.apply(o,arguments)},t.ajax(a),this};var O=encodeURIComponent;t.param=function(e,n){var r=[];return r.add=function(e,n){t.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(O(e)+"="+O(n))},d(r,e,n),r.join("&").replace(/%20/g,"+")}}(Zepto),function(t){t.fn.serializeArray=function(){var e,n,r=[],i=function(t){return t.forEach?t.forEach(i):void r.push({name:e,value:t})};return this[0]&&t.each(this[0].elements,function(r,o){n=o.type,(e=o.name)&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||o.checked)&&i(t(o).val())}),r},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t){try{return e(t)}catch(t){return null}}}}(Zepto),function(t){"use strict";function e(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}function n(t,e){(r(t,e)?o:i)(t,e)}var r,i,o;"classList"in document.documentElement?(r=function(t,e){return t.classList.contains(e)},i=function(t,e){t.classList.add(e)},o=function(t,e){t.classList.remove(e)}):(r=function(t,n){return e(n).test(t.className)},i=function(t,e){r(t,e)||(t.className=t.className+" "+e)},o=function(t,n){t.className=t.className.replace(e(n)," ")});var s={hasClass:r,addClass:i,removeClass:o,toggleClass:n,has:r,add:i,remove:o,toggle:n};"function"==typeof define&&define.amd?define(s):t.classie=s}(window);var firebase=function(){var t=void 0===t?self:t;return function(e){function n(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var r=t.webpackJsonpFirebase;t.webpackJsonpFirebase=function(t,i,s){for(var a,u,c,h=0,l=[];h<t.length;h++)u=t[h],o[u]&&l.push(o[u][0]),o[u]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);for(r&&r(t,i,s);l.length;)l.shift()();if(s)for(h=0;h<s.length;h++)c=n(n.s=s[h]);return c};var i={},o={5:0};return n.e=function(t){function e(){a.onerror=a.onload=null,clearTimeout(u);var e=o[t];0!==e&&(e&&e[1](Error("Loading chunk "+t+" failed.")),o[t]=void 0)}var r=o[t];if(0===r)return new Promise(function(t){t()});if(r)return r[2];var i=new Promise(function(e,n){r=o[t]=[e,n]});r[2]=i;var s=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.charset="utf-8",a.async=!0,a.timeout=12e4,n.nc&&a.setAttribute("nonce",n.nc),a.src=n.p+""+t+".js";var u=setTimeout(e,12e4);return a.onerror=a.onload=e,s.appendChild(a),i},n.m=e,n.c=i,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n.oe=function(t){throw console.error(t),t},n(n.s=57)}([function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(28)),r(n(29)),r(n(20)),r(n(65)),r(n(66)),r(n(67)),r(n(68)),r(n(30)),r(n(69)),r(n(31)),r(n(70)),r(n(71)),r(n(73)),r(n(74)),r(n(75))},,,,,,function(t,e,n){"use strict";function r(){function t(t){return t=t||a,s(h,t)||i("no-app",{name:t}),h[t]}function e(){return Object.keys(h).map(function(t){return h[t]})}function n(t,e){Object.keys(l).forEach(function(n){var r=u(t,n);null!==r&&p[r]&&p[r](e,t)})}function u(t,e){if("serverAuth"===e)return null;var n=e;return t.options,n}var h={},l={},p={},f={__esModule:!0,initializeApp:function(t,e){void 0===e?e=a:"string"==typeof e&&""!==e||i("bad-app-name",{name:e+""}),s(h,e)&&i("duplicate-app",{name:e});var r=new c(t,e,f);return h[e]=r,n(r,"create"),r},app:t,apps:null,Promise:Promise,SDK_VERSION:"4.8.1",INTERNAL:{registerService:function(n,r,s,a,u){l[n]&&i("duplicate-service",{name:n}),l[n]=r,a&&(p[n]=a,e().forEach(function(t){a("create",t)}));var h=function(e){return void 0===e&&(e=t()),"function"!=typeof e[n]&&i("invalid-app-argument",{name:n}),e[n]()};return void 0!==s&&Object(o.deepExtend)(h,s),f[n]=h,c.prototype[n]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.t.bind(this,n).apply(this,u?t:[])},h},createFirebaseNamespace:r,extendNamespace:function(t){Object(o.deepExtend)(f,t)},createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,removeApp:function(t){n(h[t],"delete"),delete h[t]},factories:l,useAsService:u,Promise:Promise,deepExtend:o.deepExtend}};return Object(o.patchProperty)(f,"default",f),Object.defineProperty(f,"apps",{get:e}),Object(o.patchProperty)(t,"App",c),f}function i(t,e){throw h.create(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a="[DEFAULT]",u=[],c=function(){function t(t,e,n){this.r=n,this.a=!1,this.u={},this.f=e,this.h=Object(o.deepCopy)(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){u.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){u=u.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.v(),this.f},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.v(),this.h},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.v(),e()}).then(function(){t.r.INTERNAL.removeApp(t.f);var e=[];return Object.keys(t.u).forEach(function(n){Object.keys(t.u[n]).forEach(function(r){e.push(t.u[n][r])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.a=!0,t.u={}})},t.prototype.t=function(t,e){if(void 0===e&&(e=a),this.v(),this.u[t]||(this.u[t]={}),!this.u[t][e]){var n=e!==a?e:void 0,r=this.r.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.u[t][e]=r}return this.u[t][e]},t.prototype.extendApp=function(t){var e=this;Object(o.deepExtend)(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(u.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),u=[])},t.prototype.v=function(){this.a&&i("app-deleted",{name:this.f})},t}();c.prototype.name&&c.prototype.options||c.prototype.delete||console.log("dc");var h=new o.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."});n.d(e,"firebase",function(){return l});var l=r();e.default=l},,,,,,function(e,n){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof t&&(r=t)}e.exports=r},,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"}},,,,,,,function(t,e){function n(){throw Error("setTimeout has not been defined")}function r(){throw Error("clearTimeout has not been defined")}function i(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function o(t){if(l===clearTimeout)return clearTimeout(t);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function s(){v&&f&&(v=!1,f.length?d=f.concat(d):y=-1,d.length&&a())}function a(){if(!v){var t=i(s);v=!0;for(var e=d.length;e;){for(f=d,d=[];++y<e;)f&&f[y].run();y=-1,e=d.length}f=null,v=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var h,l,p=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(t){h=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(t){l=r}}();var f,d=[],v=!1,y=-1;p.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||v||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(t){return[]},p.binding=function(t){throw Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(20);e.assert=function(t,n){if(!t)throw e.assertionError(n)},e.assertionError=function(t){return Error("Firebase Database ("+r.CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},i=function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{var s=t[n++],a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return e.join("")};e.base64={y:null,b:null,_:null,g:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.O();for(var n=e?this._:this.y,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,p=(15&a)<<2|c>>6,f=63&c;u||(f=64,s||(p=64)),r.push(n[h],n[l],n[p],n[f])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):i(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.O();for(var n=e?this.g:this.b,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!=a){var h=s<<4&240|a>>2;if(r.push(h),64!=u){var l=a<<6&192|u;r.push(l)}}}return r},O:function(){if(!this.y){this.y={},this.b={},this._={},this.g={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.y[t]=this.ENCODED_VALS.charAt(t),this.b[this.y[t]]=t,this._[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.g[this._[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.b[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.g[this.ENCODED_VALS.charAt(t)]=t)}}},e.base64Encode=function(t){var n=r(t);return e.base64.encodeByteArray(n,!0)},e.base64Decode=function(t){try{return e.base64.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.jsonEval=function(t){return JSON.parse(t)},e.stringify=function(t){return JSON.stringify(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.forEach=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},e.extend=function(t,n){return e.forEach(n,function(e,n){t[e]=n}),t},e.clone=function(t){return e.extend({},t)},e.isNonNullObject=function(t){return"object"==typeof t&&null!==t},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.map=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},e.findKey=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},e.findValue=function(t,n,r){var i=e.findKey(t,n,r);return i&&t[i]},e.getAnyKey=function(t){for(var e in t)return e},e.getValues=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0}},,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){n(58),t.exports=n(6).default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(59),i=(n.n(r),n(63)),o=(n.n(i),n(64));n.n(o)},function(e,n,r){(function(e){var n=function(){if(void 0!==e)return e;if(void 0!==t)return t;if("undefined"!=typeof self)return self;throw Error("unable to locate global object")}();"undefined"==typeof Promise&&(n.Promise=Promise=r(60))}).call(n,r(12))},function(t,e,n){(function(e){!function(n){function r(){}function i(t,e){return function(){t.apply(e,arguments)}}function o(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this.T=[],l(t,this)}function s(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o.A(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void u(e.promise,t)}a(e.promise,r)}else(1===t._state?a:u)(e.promise,t._value)})):t.T.push(e)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void l(i(n,e),t)}t._state=1,t._value=e,c(t)}catch(e){u(t,e)}}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t.T.length&&o.A(function(){t._handled||o.j(t._value)});for(var e=0,n=t.T.length;e<n;e++)s(t,t.T[e]);t.T=null}function h(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function l(t,e){var n=!1;try{t(function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,u(e,t))})}catch(t){if(n)return;n=!0,u(e,t)}}var p=setTimeout;o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(r);return s(this,new h(t,e,n)),n},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,n){function r(o,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(t){r(o,t)},n)}e[o]=s,0==--i&&t(e)}catch(t){n(t)}}if(0===e.length)return t([]);for(var i=e.length,o=0;o<e.length;o++)r(o,e[o])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},o.A="function"==typeof e&&function(t){e(t)}||function(t){p(t,0)},o.j=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},o.S=function(t){o.A=t},o.w=function(t){o.j=t},void 0!==t&&t.exports?t.exports=o:n.Promise||(n.Promise=o)}(this)}).call(e,n(61).setImmediate)},function(e,n,r){function i(t,e){this.P=t,this._clearFn=e}var o=Function.prototype.apply;n.setTimeout=function(){return new i(o.call(setTimeout,t,arguments),clearTimeout)},n.setInterval=function(){return new i(o.call(setInterval,t,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(t,this.P)},n.enroll=function(t,e){clearTimeout(t.N),t.C=e},n.unenroll=function(t){clearTimeout(t.N),t.C=-1},n.k=n.active=function(t){clearTimeout(t.N);var e=t.C;e>=0&&(t.N=setTimeout(function(){t.M&&t.M()},e))},r(62),n.setImmediate=setImmediate,n.clearImmediate=clearImmediate},function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){delete u[t]}function i(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function o(t){if(c)setTimeout(o,0,t);else{var e=u[t];if(e){c=!0;try{i(e)}finally{r(t),c=!1}}}}if(!t.setImmediate){var s,a=1,u={},c=!1,h=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?s=function(t){e.nextTick(function(){o(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&o(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),s=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){o(t.data)},s=function(e){t.port2.postMessage(e)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var t=h.documentElement;s=function(e){var n=h.createElement("script");n.onreadystatechange=function(){o(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():s=function(t){setTimeout(o,0,t)},l.setImmediate=function(t){"function"!=typeof t&&(t=Function(""+t));for(var e=Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return u[a]=r,s(a),a++},l.clearImmediate=r}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(12),n(27))},function(t,e){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return o;i++}}})},function(t,e){Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return i;i++}return-1}})},function(t,e,n){"use strict";function r(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var i in e)e.hasOwnProperty(i)&&(t[i]=r(t[i],e[i]));return t}Object.defineProperty(e,"__esModule",{value:!0}),e.deepCopy=function(t){return r(void 0,t)},e.deepExtend=r,e.patchProperty=function(t,e,n){t[e]=n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();e.Deferred=r},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=r(20);n.getUA=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},n.isMobileCordova=function(){return void 0!==t&&!!(t.cordova||t.phonegap||t.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(n.getUA())},n.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},n.isNodeSdk=function(){return!0===i.CONSTANTS.NODE_CLIENT||!0===i.CONSTANTS.NODE_ADMIN}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="FirebaseError",i=Error.captureStackTrace;e.patchCapture=function(t){var e=i;return i=t,e};var o=function(){return function(t,e){if(this.code=t,this.message=e,i)i(this,s.prototype.create);else{var n=Error.apply(this,arguments);this.name=r,Object.defineProperty(this,"stack",{get:function(){return n.stack}})}}}();e.FirebaseError=o,o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o.prototype.name=r;var s=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?""+r:"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var s=new o(i,n);for(var a in e)e.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(s[a]=e[a]);return s},t}();e.ErrorFactory=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(29),i=n(30);e.decode=function(t){var e={},n={},o={},s="";try{var a=t.split(".");e=i.jsonEval(r.base64Decode(a[0])||""),n=i.jsonEval(r.base64Decode(a[1])||""),s=a[2],o=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:o,signature:s}},e.isValidTimestamp=function(t){var n,r,i=e.decode(t).claims,o=Math.floor((new Date).getTime()/1e3);return"object"==typeof i&&(i.hasOwnProperty("nbf")?n=i.nbf:i.hasOwnProperty("iat")&&(n=i.iat),r=i.hasOwnProperty("exp")?i.exp:n+86400),o&&n&&r&&o>=n&&o<=r},e.issuedAtTime=function(t){var n=e.decode(t).claims;return"object"==typeof n&&n.hasOwnProperty("iat")?n.iat:null},e.isValidFormat=function(t){var n=e.decode(t),r=n.claims;return!!n.signature&&!!r&&"object"==typeof r&&r.hasOwnProperty("iat")},e.isAdmin=function(t){var n=e.decode(t).claims;return"object"==typeof n&&!0===n.admin}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(31);e.querystring=function(t){var e=[];return r.forEach(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=t.call(this)||this;e.D=[],e.I=[],e.x=[],e.F=[],e.L=0,e.R=0,e.blockSize=64,e.F[0]=128;for(var n=1;n<e.blockSize;++n)e.F[n]=0;return e.reset(),e}return r(e,t),e.prototype.reset=function(){this.D[0]=1732584193,this.D[1]=4023233417,this.D[2]=2562383102,this.D[3]=271733878,this.D[4]=3285377520,this.L=0,this.R=0},e.prototype.B=function(t,e){e||(e=0);var n=this.x;if("string"==typeof t)for(h=0;h<16;h++)n[h]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(h=0;h<16;h++)n[h]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(h=16;h<80;h++){l=n[h-3]^n[h-8]^n[h-14]^n[h-16];n[h]=4294967295&(l<<1|l>>>31)}for(var r,i,o=this.D[0],s=this.D[1],a=this.D[2],u=this.D[3],c=this.D[4],h=0;h<80;h++){h<40?h<20?(r=u^s&(a^u),i=1518500249):(r=s^a^u,i=1859775393):h<60?(r=s&a|u&(s|a),i=2400959708):(r=s^a^u,i=3395469782);var l=(o<<5|o>>>27)+r+c+i+n[h]&4294967295;c=u,u=a,a=4294967295&(s<<30|s>>>2),s=o,o=l}this.D[0]=this.D[0]+o&4294967295,this.D[1]=this.D[1]+s&4294967295,this.D[2]=this.D[2]+a&4294967295,this.D[3]=this.D[3]+u&4294967295,this.D[4]=this.D[4]+c&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.I,o=this.L;r<e;){if(0==o)for(;r<=n;)this.B(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++o,++r,o==this.blockSize){this.B(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++o,++r,o==this.blockSize){this.B(i),o=0;break}}this.L=o,this.R+=e}},e.prototype.digest=function(){var t=[],e=8*this.R;this.L<56?this.update(this.F,56-this.L):this.update(this.F,this.blockSize-(this.L-56));for(r=this.blockSize-1;r>=56;r--)this.I[r]=255&e,e/=256;this.B(this.I);for(var n=0,r=0;r<5;r++)for(var i=24;i>=0;i-=8)t[n]=this.D[r]>>i&255,++n;return t},e}(n(72).Hash);e.Sha1=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(){this.blockSize=-1}}();e.Hash=r},function(t,e,n){"use strict";function r(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}function i(){}Object.defineProperty(e,"__esModule",{value:!0}),e.createSubscribe=function(t,e){var n=new o(t,e);return n.subscribe.bind(n)};var o=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var o,s=this;if(void 0===t&&void 0===e&&void 0===n)throw Error("Missing Observer.");void 0===(o=r(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(o.next=i),void 0===o.error&&(o.error=i),void 0===o.complete&&(o.complete=i);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{s.finalError?o.error(s.finalError):o.complete()}catch(t){}}),this.observers.push(o),a},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}}},function(t,e,n){"use strict";function r(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}Object.defineProperty(e,"__esModule",{value:!0}),e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i){var o=t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw Error(o)}},e.errorPrefix=r,e.validateNamespace=function(t,e,n,i){if((!i||n)&&"string"!=typeof n)throw Error(r(t,e,i)+"must be a valid firebase namespace.")},e.validateCallback=function(t,e,n,i){if((!i||n)&&"function"!=typeof n)throw Error(r(t,e,i)+"must be a valid function.")},e.validateContextObject=function(t,e,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw Error(r(t,e,i)+"must be a valid context object.")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(28);e.stringToByteArray=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);if(o>=55296&&o<=56319){var s=o-55296;i++,r.assert(i<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(i)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}}])}().default;try{webpackJsonpFirebase([0],[,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(0),o=n(0),s=n(0),a=n(0),u=n(0),c=n(13),h=n(0);e.LUIDGenerator=function(){var t=1;return function(){return t++}}(),e.sha1=function(t){var e=a.stringToByteArray(t),n=new s.Sha1;n.update(e);var r=n.digest();return o.base64.encodeByteArray(r)};var l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++)Array.isArray(t[r])||t[r]&&"object"==typeof t[r]&&"number"==typeof t[r].length?n+=l.apply(null,t[r]):"object"==typeof t[r]?n+=u.stringify(t[r]):n+=t[r],n+=" ";return n};e.logger=null;var p=!0;e.enableLogging=function(t,n){r.assert(!n||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?("undefined"!=typeof console&&("function"==typeof console.log?e.logger=console.log.bind(console):"object"==typeof console.log&&(e.logger=function(t){console.log(t)})),n&&c.SessionStorage.set("logging_enabled",!0)):"function"==typeof t?e.logger=t:(e.logger=null,c.SessionStorage.remove("logging_enabled"))},e.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!0===p&&(p=!1,null===e.logger&&!0===c.SessionStorage.get("logging_enabled")&&e.enableLogging(!0)),e.logger){var r=l.apply(null,t);e.logger(r)}},e.logWrapper=function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e.log.apply(void 0,[t].concat(n))}},e.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if("undefined"!=typeof console){var n="FIREBASE INTERNAL ERROR: "+l.apply(void 0,t);void 0!==console.error?console.error(n):console.log(n)}},e.fatal=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=l.apply(void 0,t);throw Error("FIREBASE FATAL ERROR: "+n)},e.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if("undefined"!=typeof console){var n="FIREBASE WARNING: "+l.apply(void 0,t);void 0!==console.warn?console.warn(n):console.log(n)}},e.warnIfPageIsSecure=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&e.warn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},e.warnAboutUnsupportedMethod=function(t){e.warn(t+" is unsupported and will likely change soon.  Please do not use.")},e.isInvalidJSONNumber=function(t){return"number"==typeof t&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)},e.executeWhenDOMReady=function(t){if(h.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},e.MIN_NAME="[MIN_NAME]",e.MAX_NAME="[MAX_NAME]",e.nameCompare=function(t,n){if(t===n)return 0;if(t===e.MIN_NAME||n===e.MAX_NAME)return-1;if(n===e.MIN_NAME||t===e.MAX_NAME)return 1;var r=e.tryParseInt(t),i=e.tryParseInt(n);return null!==r?null!==i?r-i==0?t.length-n.length:r-i:-1:null!==i?1:t<n?-1:1},e.stringCompare=function(t,e){return t===e?0:t<e?-1:1},e.requireKey=function(t,e){if(e&&t in e)return e[t];throw Error("Missing required key ("+t+") in object: "+u.stringify(e))},e.ObjectToUniqueKey=function(t){if("object"!=typeof t||null===t)return u.stringify(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=u.stringify(n[o]),i+=":",i+=e.ObjectToUniqueKey(t[n[o]]);return i+="}"},e.splitStringBySize=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r},e.each=function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;++n)e(n,t[n]);else i.forEach(t,function(t,n){return e(n,t)})},e.bindCallback=function(t,e){return e?t.bind(e):t},e.doubleToIEEE754String=function(t){r.assert(!e.isInvalidJSONNumber(t),"Invalid JSON number");var n,i,o,s,a,u,c;for(0===t?(i=0,o=0,n=1/t==-1/0?1:0):(n=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(t)/Math.LN2),1023),i=s+1023,o=Math.round(t*Math.pow(2,52-s)-Math.pow(2,52))):(i=0,o=Math.round(t/Math.pow(2,-1074)))),u=[],a=52;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=11;a;a-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(n?1:0),u.reverse(),c=u.join("");var h="";for(a=0;a<64;a+=8){var l=parseInt(c.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),h+=l}return h.toLowerCase()},e.isChromeExtensionContentScript=function(){return!("object"!=typeof window||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))},e.isWindowsStoreApp=function(){return"object"==typeof Windows&&"object"==typeof Windows.UI},e.errorForServerCode=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?n="Client doesn't have permission to access the desired data.":"unavailable"==t&&(n="The service is unavailable");var r=Error(t+" at "+e.path+": "+n);return r.code=t.toUpperCase(),r},e.e=RegExp("^-?\\d{1,10}$"),e.tryParseInt=function(t){if(e.e.test(t)){var n=+t;if(n>=-2147483648&&n<=2147483647)return n}return null},e.exceptionGuard=function(t){try{t()}catch(t){setTimeout(function(){var n=t.stack||"";throw e.warn("Exception was thrown by user callback.",n),t},Math.floor(0))}},e.callUserCallback=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];"function"==typeof t&&e.exceptionGuard(function(){t.apply(void 0,n)})},e.beingCrawled=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},e.exportPropGetter=function(t,e,n){Object.defineProperty(t,e,{get:n})},e.setTimeoutNonBlocking=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(0),o=function(){function t(t,e){if(void 0===e){this.n=t.split("/");for(var n=0,r=0;r<this.n.length;r++)this.n[r].length>0&&(this.n[n]=this.n[r],n++);this.n.length=n,this.i=0}else this.n=t,this.i=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.i>=this.n.length?null:this.n[this.i]},t.prototype.getLength=function(){return this.n.length-this.i},t.prototype.popFront=function(){var e=this.i;return e<this.n.length&&e++,new t(this.n,e)},t.prototype.getBack=function(){return this.i<this.n.length?this.n[this.n.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.i;e<this.n.length;e++)""!==this.n[e]&&(t+="/"+this.n[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.i;e<this.n.length;e++)""!==this.n[e]&&(t+="/"+encodeURIComponent(this.n[e]+""));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.n.slice(this.i+t)},t.prototype.parent=function(){if(this.i>=this.n.length)return null;for(var e=[],n=this.i;n<this.n.length-1;n++)e.push(this.n[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.i;r<this.n.length;r++)n.push(this.n[r]);if(e instanceof t)for(r=e.i;r<e.n.length;r++)n.push(e.n[r]);else for(var i=e.split("/"),r=0;r<i.length;r++)i[r].length>0&&n.push(i[r]);return new t(n,0)},t.prototype.isEmpty=function(){return this.i>=this.n.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),i=e.slice(),o=0;o<n.length&&o<i.length;o++){var s=r.nameCompare(n[o],i[o]);if(0!==s)return s}return n.length===i.length?0:n.length<i.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.i,n=t.i;e<=this.n.length;e++,n++)if(this.n[e]!==t.n[n])return!1;return!0},t.prototype.contains=function(t){var e=this.i,n=t.i;if(this.getLength()>t.getLength())return!1;for(;e<this.n.length;){if(this.n[e]!==t.n[n])return!1;++e,++n}return!0},t}();e.Path=o;var s=function(){function t(t,e){this.o=e,this.u=t.slice(),this.l=Math.max(1,this.u.length);for(var n=0;n<this.u.length;n++)this.l+=i.stringLength(this.u[n]);this.f()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.u.length>0&&(this.l+=1),this.u.push(t),this.l+=i.stringLength(t),this.f()},t.prototype.pop=function(){var t=this.u.pop();this.l-=i.stringLength(t),this.u.length>0&&(this.l-=1)},t.prototype.f=function(){if(this.l>t.MAX_PATH_LENGTH_BYTES)throw Error(this.o+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.l+").");if(this.u.length>t.MAX_PATH_DEPTH)throw Error(this.o+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0==this.u.length?"":"in property '"+this.u.join(".")+"'"},t}();e.ValidationPath=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i,o,s=n(15),a=n(1),u=n(5),c=n(16);e.setNodeFromJSON=function(t){i=t},e.setMaxNode=function(t){o=t};var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?a.nameCompare(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return u.NamedNode.MIN},e.prototype.maxPost=function(){return new u.NamedNode(a.MAX_NAME,new c.LeafNode("[PRIORITY-POST]",o))},e.prototype.makePost=function(t,e){var n=i(t);return new u.NamedNode(e,new c.LeafNode("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(s.Index);e.PriorityIndex=h,e.PRIORITY_INDEX=new h},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(0),s=n(1),a=n(17),u=n(5),c=n(37),h=n(3),l=n(10),p=n(39),f=n(16),d=n(41),v=function(){function t(t,e,n){this._=t,this.y=e,this.g=n,this.m=null,this.y&&c.validatePriorityNode(this.y),this._.isEmpty()&&o.assert(!this.y||this.y.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return i||(i=new t(new a.SortedMap(d.NAME_COMPARATOR),null,p.IndexMap.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.y||i},t.prototype.updatePriority=function(e){return this._.isEmpty()?this:new t(this._,e,this.g)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this._.get(t);return null===e?i:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this._.get(t)},t.prototype.updateImmediateChild=function(e,n){if(o.assert(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new u.NamedNode(e,n),s=void 0,a=void 0,c=void 0;return n.isEmpty()?(s=this._.remove(e),a=this.g.removeFromIndexes(r,this._)):(s=this._.insert(e,n),a=this.g.addToIndexes(r,this._)),c=s.isEmpty()?i:this.y,new t(s,c,a)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;o.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this._.isEmpty()},t.prototype.numChildren=function(){return this._.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(h.PRIORITY_INDEX,function(s,a){n[s]=a.val(e),r++,o&&t.e.test(s)?i=Math.max(i,+s):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.m){var t="";this.getPriority().isEmpty()||(t+="priority:"+c.priorityHashText(this.getPriority().val())+":"),this.forEachChild(h.PRIORITY_INDEX,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.m=""===t?"":s.sha1(t)}return this.m},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.C(n);if(r){var i=r.getPredecessorKey(new u.NamedNode(t,e));return i?i.name:null}return this._.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.C(t);if(e){var n=e.minKey();return n&&n.name}return this._.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new u.NamedNode(e,this._.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.C(t);if(e){var n=e.maxKey();return n&&n.name}return this._.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new u.NamedNode(e,this._.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.C(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this._.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.C(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this._.getIteratorFrom(t.name,u.NamedNode.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.C(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this._.getReverseIteratorFrom(t.name,u.NamedNode.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===e.MAX_NODE?-1:0},t.prototype.withIndex=function(e){if(e===l.KEY_INDEX||this.g.hasIndex(e))return this;var n=this.g.addIndex(e,this._);return new t(this._,this.y,n)},t.prototype.isIndexed=function(t){return t===l.KEY_INDEX||this.g.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this._.count()===e._.count()){for(var n=this.getIterator(h.PRIORITY_INDEX),r=e.getIterator(h.PRIORITY_INDEX),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.C=function(t){return t===l.KEY_INDEX?null:this.g.get(""+t)},t.e=/^(0|[1-9]\d*)$/,t}();e.ChildrenNode=v;var y=function(t){function e(){return t.call(this,new a.SortedMap(d.NAME_COMPARATOR),v.EMPTY_NODE,p.IndexMap.Default)||this}return r(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return v.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(v);e.MaxNode=y,e.MAX_NODE=new y,Object.defineProperties(u.NamedNode,{MIN:{value:new u.NamedNode(s.MIN_NAME,v.EMPTY_NODE)},MAX:{value:new u.NamedNode(s.MAX_NAME,e.MAX_NODE)}}),l.KeyIndex.__EMPTY_NODE=v.EMPTY_NODE,f.LeafNode.__childrenNodeConstructor=v,c.setMaxNode(e.MAX_NODE),h.setMaxNode(e.MAX_NODE)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}();e.NamedNode=r},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(0),o=n(1),s=n(0),a=n(0);e.N=/[\[\].#$\/\u0000-\u001F\u007F]/,e.P=/[\[\].#$\u0000-\u001F\u007F]/,e.S=10485760,e.isValidKey=function(t){return"string"==typeof t&&0!==t.length&&!e.N.test(t)},e.isValidPathString=function(t){return"string"==typeof t&&0!==t.length&&!e.P.test(t)},e.isValidRootPathString=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),e.isValidPathString(t)},e.isValidPriority=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!o.isInvalidJSONNumber(t)||t&&"object"==typeof t&&i.contains(t,".sv")},e.validateFirebaseDataArg=function(t,n,r,i,o){o&&void 0===r||e.validateFirebaseData(s.errorPrefix(t,n,o),r,i)},e.validateFirebaseData=function(t,n,s){var u=s instanceof r.Path?new r.ValidationPath(s,t):s;if(void 0===n)throw Error(t+"contains undefined "+u.toErrorString());if("function"==typeof n)throw Error(t+"contains a function "+u.toErrorString()+" with contents = "+n);if(o.isInvalidJSONNumber(n))throw Error(t+"contains "+n+" "+u.toErrorString());if("string"==typeof n&&n.length>e.S/3&&a.stringLength(n)>e.S)throw Error(t+"contains a string greater than "+e.S+" utf8 bytes "+u.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var c=!1,h=!1;if(i.forEach(n,function(n,r){if(".value"===n)c=!0;else if(".priority"!==n&&".sv"!==n&&(h=!0,!e.isValidKey(n)))throw Error(t+" contains an invalid key ("+n+") "+u.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');u.push(n),e.validateFirebaseData(t,r,u),u.pop()}),c&&h)throw Error(t+' contains ".value" child '+u.toErrorString()+" in addition to actual children.")}},e.validateFirebaseMergePaths=function(t,n){var i,o;for(i=0;i<n.length;i++)for(var s=(o=n[i]).slice(),a=0;a<s.length;a++)if(".priority"===s[a]&&a===s.length-1);else if(!e.isValidKey(s[a]))throw Error(t+"contains an invalid key ("+s[a]+") in path "+o+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');n.sort(r.Path.comparePaths);var u=null;for(i=0;i<n.length;i++){if(o=n[i],null!==u&&u.contains(o))throw Error(t+"contains a path "+u+" that is ancestor of another path "+o);u=o}},e.validateFirebaseMergeDataArg=function(t,n,o,a,u){if(!u||void 0!==o){var c=s.errorPrefix(t,n,u);if(!o||"object"!=typeof o||Array.isArray(o))throw Error(c+" must be an object containing the children to replace.");var h=[];i.forEach(o,function(t,n){var i=new r.Path(t);if(e.validateFirebaseData(c,n,a.child(i)),".priority"===i.getBack()&&!e.isValidPriority(n))throw Error(c+"contains an invalid value for '"+i+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");h.push(i)}),e.validateFirebaseMergePaths(c,h)}},e.validatePriority=function(t,n,r,i){if(!i||void 0!==r){if(o.isInvalidJSONNumber(r))throw Error(s.errorPrefix(t,n,i)+"is "+r+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!e.isValidPriority(r))throw Error(s.errorPrefix(t,n,i)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},e.validateEventType=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error(s.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.validateKey=function(t,n,r,i){if(!(i&&void 0===r||e.isValidKey(r)))throw Error(s.errorPrefix(t,n,i)+'was an invalid key = "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},e.validatePathString=function(t,n,r,i){if(!(i&&void 0===r||e.isValidPathString(r)))throw Error(s.errorPrefix(t,n,i)+'was an invalid path = "'+r+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},e.validateRootPathString=function(t,n,r,i){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),e.validatePathString(t,n,r,i)},e.validateWritablePath=function(t,e){if(".info"===e.getFront())throw Error(t+" failed = Can't modify data under /.info/")},e.validateUrl=function(t,n,r){var i=""+r.path;if("string"!=typeof r.repoInfo.host||0===r.repoInfo.host.length||!e.isValidKey(r.repoInfo.namespace)||0!==i.length&&!e.isValidRootPathString(i))throw Error(s.errorPrefix(t,n,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},e.validateCredential=function(t,e,n,r){if((!r||void 0!==n)&&"string"!=typeof n)throw Error(s.errorPrefix(t,e,r)+"must be a valid credential (a string).")},e.validateBoolean=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw Error(s.errorPrefix(t,e,r)+"must be a boolean.")},e.validateString=function(t,e,n,r){if((!r||void 0!==n)&&"string"!=typeof n)throw Error(s.errorPrefix(t,e,r)+"must be a valid string.")},e.validateObject=function(t,e,n,r){if(!(r&&void 0===n||n&&"object"==typeof n&&null!==n))throw Error(s.errorPrefix(t,e,r)+"must be a valid object.")},e.validateObjectContainsKey=function(t,e,n,r,o,a){if(!n||"object"!=typeof n||!i.contains(n,r)){if(o)return;throw Error(s.errorPrefix(t,e,o)+'must contain the key "'+r+'"')}if(a){var u=i.safeGet(n,r);if("number"===a&&"number"!=typeof u||"string"===a&&"string"!=typeof u||"boolean"===a&&"boolean"!=typeof u||"function"===a&&"function"!=typeof u||"object"===a&&"object"!=typeof u&&u)throw o?Error(s.errorPrefix(t,e,o)+'contains invalid value for key "'+r+'" (must be of type "'+a+'")'):Error(s.errorPrefix(t,e,o)+'must contain the key "'+r+'" with type "'+a+'"')}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(e.OperationType||(e.OperationType={}));var i=function(){function t(t,e,n,i){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=i,r.assert(!i||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}();e.OperationSource=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}();e.Change=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(15),s=n(5),a=n(1),u=n(0),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return i},set:function(t){i=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return a.nameCompare(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw u.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return s.NamedNode.MIN},e.prototype.maxPost=function(){return new s.NamedNode(a.MAX_NAME,i)},e.prototype.makePost=function(t,e){return u.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new s.NamedNode(t,i)},e.prototype.toString=function(){return".key"},e}(o.Index);e.KeyIndex=c,e.KEY_INDEX=new c},function(t,e,n){"use strict";function r(t,e){if(void 0===e&&(e=null),null===t)return i.ChildrenNode.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),u.assert(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t){var n=t;return new o.LeafNode(n,r(e))}if(t instanceof Array||!f){var d=i.ChildrenNode.EMPTY_NODE,v=t;return a.forEach(v,function(t,e){if(a.contains(v,t)&&"."!==t.substring(0,1)){var n=r(e);!n.isLeafNode()&&n.isEmpty()||(d=d.updateImmediateChild(t,n))}}),d.updatePriority(r(e))}var y=[],g=!1,m=t;if(a.forEach(m,function(t,e){if("string"!=typeof t||"."!==t.substring(0,1)){var n=r(m[t]);n.isEmpty()||(g=g||!n.getPriority().isEmpty(),y.push(new s.NamedNode(t,n)))}}),0==y.length)return i.ChildrenNode.EMPTY_NODE;var E=c.buildChildSet(y,h.NAME_ONLY_COMPARATOR,function(t){return t.name},h.NAME_COMPARATOR);if(g){var b=c.buildChildSet(y,p.PRIORITY_INDEX.getCompare());return new i.ChildrenNode(E,r(e),new l.IndexMap({".priority":b},{".priority":p.PRIORITY_INDEX}))}return new i.ChildrenNode(E,r(e),l.IndexMap.Default)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),o=n(16),s=n(5),a=n(0),u=n(0),c=n(40),h=n(41),l=n(39),p=n(3),f=!0;e.nodeFromJSON=r,p.setNodeFromJSON(r)},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(80),i=n(81),o=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new r.DOMStorageWrapper(e)}}catch(t){}return new i.MemoryStorage};e.PersistentStorage=o("localStorage"),e.SessionStorage=o("sessionStorage")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PROTOCOL_VERSION="5",e.VERSION_PARAM="v",e.TRANSPORT_SESSION_PARAM="s",e.REFERER_PARAM="r",e.FORGE_REF="f",e.FORGE_DOMAIN="firebaseio.com",e.LAST_SESSION_PARAM="ls",e.WEBSOCKET="websocket",e.LONG_POLLING="long_polling"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(1),o=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new r.NamedNode(i.MIN_NAME,t),o=new r.NamedNode(i.MIN_NAME,e);return 0!==this.compare(n,o)},t.prototype.minPost=function(){return r.NamedNode.MIN},t}();e.Index=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(0),o=n(1),s=n(37),a=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.T=e,this.y=n,this.m=null,i.assert(void 0!==this.T&&null!==this.T,"LeafNode shouldn't be created with null/undefined value."),s.validatePriorityNode(this.y)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return r},set:function(t){r=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.y},t.prototype.updatePriority=function(e){return new t(this.T,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.y:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.y:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.y)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(i.assert(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.m){var t="";this.y.isEmpty()||(t+="priority:"+s.priorityHashText(this.y.val())+":");var e=typeof this.T;t+=e+":",t+="number"===e?o.doubleToIEEE754String(this.T):this.T,this.m=o.sha1(t)}return this.m},t.prototype.getValue=function(){return this.T},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(i.assert(e.isLeafNode(),"Unknown node type"),this.w(e))},t.prototype.w=function(e){var n=typeof e.T,r=typeof this.T,o=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return i.assert(o>=0,"Unknown leaf type: "+n),i.assert(s>=0,"Unknown leaf type: "+r),o===s?"object"===r?0:this.T<e.T?-1:this.T===e.T?0:1:s-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.T===e.T&&this.y.equals(e.y)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();e.LeafNode=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.I=r,this.R=i,this.O=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.I?t.left:t.right;else{if(0===o){this.O.push(t);break}this.O.push(t),t=this.I?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.O.length)return null;var t,e=this.O.pop();if(t=this.R?this.R(e.key,e.value):{key:e.key,value:e.value},this.I)for(e=e.left;!e.isEmpty();)this.O.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.O.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.O.length>0},t.prototype.peek=function(){if(0===this.O.length)return null;var t=this.O[this.O.length-1];return this.R?this.R(t.key,t.value):{key:t.key,value:t.value}},t}();e.SortedMapIterator=r;var i=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:s.EMPTY_NODE,this.right=null!=o?o:s.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.A=function(){return this.left.isEmpty()?this:this.left.A()},t.prototype.minKey=function(){return this.A().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r,i;return i=this,r=n(t,i.key),(i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).D()},t.prototype.M=function(){if(this.left.isEmpty())return s.EMPTY_NODE;var t=this;return t.left.L()||t.left.left.L()||(t=t.F()),(t=t.copy(null,null,null,t.left.M(),null)).D()},t.prototype.remove=function(t,e){var n,r;if(n=this,e(t,n.key)<0)n.left.isEmpty()||n.left.L()||n.left.left.L()||(n=n.F()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.L()&&(n=n.x()),n.right.isEmpty()||n.right.L()||n.right.left.L()||(n=n.k()),0===e(t,n.key)){if(n.right.isEmpty())return s.EMPTY_NODE;r=n.right.A(),n=n.copy(r.key,r.value,null,null,n.right.M())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.D()},t.prototype.L=function(){return this.color},t.prototype.D=function(){var t=this;return t.right.L()&&!t.left.L()&&(t=t.W()),t.left.L()&&t.left.left.L()&&(t=t.x()),t.left.L()&&t.right.L()&&(t=t.j()),t},t.prototype.F=function(){var t=this.j();return t.right.left.L()&&(t=t.copy(null,null,null,null,t.right.x()),t=t.W(),t=t.j()),t},t.prototype.k=function(){var t=this.j();return t.left.left.L()&&(t=t.x(),t=t.j()),t},t.prototype.W=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.x=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.j=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.V=function(){var t=this.Q();return Math.pow(2,t)<=this.count()+1},t.prototype.Q=function(){var t;if(this.L()&&this.left.L())throw Error("Red node has red child("+this.key+","+this.value+")");if(this.right.L())throw Error("Right child of ("+this.key+","+this.value+") is red");if((t=this.left.Q())!==this.right.Q())throw Error("Black depths differ");return t+(this.L()?0:1)},t.RED=!0,t.BLACK=!1,t}();e.LLRBNode=i;var o=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new i(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.Q=function(){return 0},t.prototype.L=function(){return!1},t}();e.LLRBEmptyNode=o;var s=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.U=e,this.B=n}return t.prototype.insert=function(e,n){return new t(this.U,this.B.insert(e,n,this.U).copy(null,null,i.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.U,this.B.remove(e,this.U).copy(null,null,i.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.B;!n.isEmpty();){if(0===(e=this.U(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.B,r=null;!n.isEmpty();){if(0===(e=this.U(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.B.isEmpty()},t.prototype.count=function(){return this.B.count()},t.prototype.minKey=function(){return this.B.minKey()},t.prototype.maxKey=function(){return this.B.maxKey()},t.prototype.inorderTraversal=function(t){return this.B.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.B.reverseTraversal(t)},t.prototype.getIterator=function(t){return new r(this.B,null,this.U,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new r(this.B,t,this.U,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new r(this.B,t,this.U,!0,e)},t.prototype.getReverseIterator=function(t){return new r(this.B,null,this.U,!0,t)},t.EMPTY_NODE=new o,t}();e.SortedMap=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(43),i=n(11),o=n(2),s=n(44),a=n(86),u=n(97),c=n(0),h=n(1),l=n(0),p=n(98),f=n(25),d=n(100),v=n(49),y=n(101),g=n(50),m=n(106),E=n(32),b=function(){function t(t,e,n){var r=this;this.H=t,this.app=n,this.dataUpdateCount=0,this.G=null,this.K=new y.EventQueue,this.Y=1,this.X=null,this.z=new s.SparseSnapshotTree,this.J=null;var i=new p.AuthTokenProvider(n);if(this.$=f.StatsManager.getCollection(t),e||h.beingCrawled())this.Z=new m.ReadonlyRestClient(this.H,this.ee.bind(this),i),setTimeout(this.te.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(void 0!==o&&null!==o){if("object"!=typeof o)throw Error("Only objects are supported for option databaseAuthVariableOverride");try{c.stringify(o)}catch(t){throw Error("Invalid authOverride provided: "+t)}}this.J=new g.PersistentConnection(this.H,this.ee.bind(this),this.te.bind(this),this.ne.bind(this),i,o),this.Z=this.J}i.addTokenChangeListener(function(t){r.Z.refreshAuthToken(t)}),this.re=f.StatsManager.getOrCreateReporter(t,function(){return new d.StatsReporter(r.$,r.Z)}),this.ie(),this.oe=new u.SnapshotHolder,this.ae=new a.SyncTree({startListening:function(t,e,n,i){var o=[],s=r.oe.getNode(t.path);return s.isEmpty()||(o=r.ae.applyServerOverwrite(t.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.se("connected",!1),this.ue=new a.SyncTree({startListening:function(t,e,n,i){return r.Z.listen(t,n,e,function(e,n){var o=i(e,n);r.K.raiseEventsForChangedPath(t.path,o)}),[]},stopListening:function(t,e){r.Z.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.H.secure?"https://":"http://")+this.H.host},t.prototype.name=function(){return this.H.namespace},t.prototype.serverTime=function(){var t=this.oe.getNode(new o.Path(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return r.generateWithValues({timestamp:this.serverTime()})},t.prototype.ee=function(t,e,n,r){this.dataUpdateCount++;var s=new o.Path(t);e=this.X?this.X(t,e):e;var a=[];if(r)if(n){var u=l.map(e,function(t){return i.nodeFromJSON(t)});a=this.ue.applyTaggedQueryMerge(s,u,r)}else{var c=i.nodeFromJSON(e);a=this.ue.applyTaggedQueryOverwrite(s,c,r)}else if(n){var h=l.map(e,function(t){return i.nodeFromJSON(t)});a=this.ue.applyServerMerge(s,h)}else{var p=i.nodeFromJSON(e);a=this.ue.applyServerOverwrite(s,p)}var f=s;a.length>0&&(f=this.le(s)),this.K.raiseEventsForChangedPath(f,a)},t.prototype.he=function(t){this.X=t},t.prototype.te=function(t){this.se("connected",t),!1===t&&this.ce()},t.prototype.ne=function(t){var e=this;h.each(t,function(t,n){e.se(n,t)})},t.prototype.se=function(t,e){var n=new o.Path("/.info/"+t),r=i.nodeFromJSON(e);this.oe.updateSnapshot(n,r);var s=this.ae.applyServerOverwrite(n,r);this.K.raiseEventsForChangedPath(n,s)},t.prototype.pe=function(){return this.Y++},t.prototype.setWithPriority=function(t,e,n,o){var s=this;this.de("set",{path:""+t,value:e,priority:n});var a=this.generateServerValues(),u=i.nodeFromJSON(e,n),c=r.resolveDeferredValueSnapshot(u,a),l=this.pe(),p=this.ue.applyUserOverwrite(t,c,l,!0);this.K.queueEvents(p),this.Z.put(""+t,u.val(!0),function(e,n){var r="ok"===e;r||h.warn("set at "+t+" failed: "+e);var i=s.ue.ackUserWrite(l,!r);s.K.raiseEventsForChangedPath(t,i),s.callOnCompleteCallback(o,e,n)});var f=this.fe(t);this.le(f),this.K.raiseEventsForChangedPath(f,[])},t.prototype.update=function(t,e,n){var o=this;this.de("update",{path:""+t,value:e});var s=!0,a=this.generateServerValues(),u={};if(l.forEach(e,function(t,e){s=!1;var n=i.nodeFromJSON(e);u[t]=r.resolveDeferredValueSnapshot(n,a)}),s)h.log("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var c=this.pe(),p=this.ue.applyUserMerge(t,u,c);this.K.queueEvents(p),this.Z.merge(""+t,e,function(e,r){var i="ok"===e;i||h.warn("update at "+t+" failed: "+e);var s=o.ue.ackUserWrite(c,!i),a=s.length>0?o.le(t):t;o.K.raiseEventsForChangedPath(a,s),o.callOnCompleteCallback(n,e,r)}),l.forEach(e,function(e){var n=o.fe(t.child(e));o.le(n)}),this.K.raiseEventsForChangedPath(t,[])}},t.prototype.ce=function(){var t=this;this.de("onDisconnectEvents");var e=this.generateServerValues(),n=[];r.resolveDeferredValueTree(this.z,e).forEachTree(o.Path.Empty,function(e,r){n=n.concat(t.ue.applyServerOverwrite(e,r));var i=t.fe(e);t.le(i)}),this.z=new s.SparseSnapshotTree,this.K.raiseEventsForChangedPath(o.Path.Empty,n)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.Z.onDisconnectCancel(""+t,function(r,i){"ok"===r&&n.z.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,o=i.nodeFromJSON(e);this.Z.onDisconnectPut(""+t,o.val(!0),function(e,i){"ok"===e&&r.z.remember(t,o),r.callOnCompleteCallback(n,e,i)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var o=this,s=i.nodeFromJSON(e,n);this.Z.onDisconnectPut(""+t,s.val(!0),function(e,n){"ok"===e&&o.z.remember(t,s),o.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(l.isEmpty(e))return h.log("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.Z.onDisconnectMerge(""+t,e,function(o,s){"ok"===o&&l.forEach(e,function(e,n){var o=i.nodeFromJSON(n);r.z.remember(t.child(e),o)}),r.callOnCompleteCallback(n,o,s)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.ae.addEventRegistration(t,e):this.ue.addEventRegistration(t,e),this.K.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.ae.removeEventRegistration(t,e):this.ue.removeEventRegistration(t,e),this.K.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.J&&this.J.interrupt("repo_interrupt")},t.prototype.resume=function(){this.J&&this.J.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.G||(this.G=new v.StatsListener(this.$)),e=this.G.get()):e=this.$.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);l.forEach(e,function(t,e){for(var r=t.length;r<n+2;r++)t+=" ";console.log(t+e)})}},t.prototype.statsIncrementCounter=function(t){this.$.incrementCounter(t),this.re.includeStat(t)},t.prototype.de=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.J&&(n=this.J.id+":"),h.log.apply(void 0,[n].concat(t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&h.exceptionGuard(function(){if("ok"==e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new E.Database(this))},enumerable:!0,configurable:!0}),t}();e.Repo=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n){this._e=t,this.ye=e,this.ve=n}return t.prototype.isFullyInitialized=function(){return this.ye},t.prototype.isFiltered=function(){return this.ve},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.ve;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.ve||this._e.hasChild(t)},t.prototype.getNode=function(){return this._e},t}();e.CacheNode=r},,function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(35),o=n(82),s=n(1),a=n(83),u=n(36),c=n(18),h=n(2),l=n(107),p=n(7),f=n(0),d=n(0),v=n(47),y=function(t){function e(e,n){if(!(e instanceof c.Repo))throw Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,l.QueryParams.DEFAULT,!1)||this}return r(e,t),e.prototype.getKey=function(){return f.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return f.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t+="":t instanceof h.Path||(null===this.path.getFront()?p.validateRootPathString("Reference.child",1,t,!1):p.validatePathString("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){f.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){f.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){f.validateArgCount("Reference.set",1,2,arguments.length),p.validateWritablePath("Reference.set",this.path),p.validateFirebaseDataArg("Reference.set",1,t,this.path,!1),f.validateCallback("Reference.set",2,e,!0);var n=new d.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(f.validateArgCount("Reference.update",1,2,arguments.length),p.validateWritablePath("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,s.warn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}p.validateFirebaseMergeDataArg("Reference.update",1,t,this.path,!1),f.validateCallback("Reference.update",2,e,!0);var i=new d.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(f.validateArgCount("Reference.setWithPriority",2,3,arguments.length),p.validateWritablePath("Reference.setWithPriority",this.path),p.validateFirebaseDataArg("Reference.setWithPriority",1,t,this.path,!1),p.validatePriority("Reference.setWithPriority",2,e,!1),f.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new d.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return f.validateArgCount("Reference.remove",0,1,arguments.length),p.validateWritablePath("Reference.remove",this.path),f.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(f.validateArgCount("Reference.transaction",1,3,arguments.length),p.validateWritablePath("Reference.transaction",this.path),f.validateCallback("Reference.transaction",1,t,!1),f.validateCallback("Reference.transaction",2,e,!0),p.validateBoolean("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new d.Deferred;"function"==typeof e&&r.promise.catch(function(){});return this.repo.startTransaction(this.path,t,function(t,n,i){t?r.reject(t):r.resolve(new o.TransactionResult(n,i)),"function"==typeof e&&e(t,n,i)},n),r.promise},e.prototype.setPriority=function(t,e){f.validateArgCount("Reference.setPriority",1,2,arguments.length),p.validateWritablePath("Reference.setPriority",this.path),p.validatePriority("Reference.setPriority",1,t,!1),f.validateCallback("Reference.setPriority",2,e,!0);var n=new d.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){f.validateArgCount("Reference.push",0,2,arguments.length),p.validateWritablePath("Reference.push",this.path),p.validateFirebaseDataArg("Reference.push",1,t,this.path,!0),f.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=a.nextPushId(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then(function(){return s}):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},e.prototype.onDisconnect=function(){return p.validateWritablePath("Reference.onDisconnect",this.path),new i.OnDisconnect(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(u.Query);e.Reference=y,u.Query.__referenceConstructor=y,v.SyncPoint.__referenceConstructor=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(7),o=n(2),s=n(3),a=function(){function t(t,e,n){this._e=t,this.ge=e,this.me=n}return t.prototype.val=function(){return r.validateArgCount("DataSnapshot.val",0,0,arguments.length),this._e.val()},t.prototype.exportVal=function(){return r.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this._e.val(!0)},t.prototype.toJSON=function(){return r.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return r.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this._e.isEmpty()},t.prototype.child=function(e){r.validateArgCount("DataSnapshot.child",0,1,arguments.length),e+="",i.validatePathString("DataSnapshot.child",1,e,!1);var n=new o.Path(e),a=this.ge.child(n);return new t(this._e.getChild(n),a,s.PRIORITY_INDEX)},t.prototype.hasChild=function(t){r.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),i.validatePathString("DataSnapshot.hasChild",1,t,!1);var e=new o.Path(t);return!this._e.getChild(e).isEmpty()},t.prototype.getPriority=function(){return r.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this._e.getPriority().val()},t.prototype.forEach=function(e){var n=this;return r.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),r.validateCallback("DataSnapshot.forEach",1,e,!1),!this._e.isLeafNode()&&!!this._e.forEachChild(this.me,function(r,i){return e(new t(i,n.ge.child(r),s.PRIORITY_INDEX))})},t.prototype.hasChildren=function(){return r.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this._e.isLeafNode()&&!this._e.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ge.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return r.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this._e.numChildren()},t.prototype.getRef=function(){return r.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ge},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}();e.DataSnapshot=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(17),o=n(2),s=n(1),a=n(0),u=function(){return r||(r=new i.SortedMap(s.stringCompare)),r},c=function(){function t(t,e){void 0===e&&(e=u()),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return a.forEach(e,function(t,e){n=n.set(new o.Path(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:o.Path.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new o.Path(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=(this.children.get(r)||t.Empty).setTree(e.popFront(),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.Ce(o.Path.Empty,t)},t.prototype.Ce=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.Ce(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.Ee(t,o.Path.Empty,e)},t.prototype.Ee=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.Ee(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.Ne(t,o.Path.Empty,e)},t.prototype.Ne=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.Ne(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.Pe(o.Path.Empty,t)},t.prototype.Pe=function(t,e){this.children.inorderTraversal(function(n,r){r.Pe(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}();e.ImmutableTree=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(9),o=n(4),s=n(3),a=function(){function t(t){this.me=t}return t.prototype.updateChild=function(t,e,n,o,s,a){r.assert(t.isIndexed(this.me),"A node must be indexed if only a child is updated");var u=t.getImmediateChild(e);return u.getChild(o).equals(n.getChild(o))&&u.isEmpty()==n.isEmpty()?t:(null!=a&&(n.isEmpty()?t.hasChild(e)?a.trackChildChange(i.Change.childRemovedChange(e,u)):r.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?a.trackChildChange(i.Change.childAddedChange(e,n)):a.trackChildChange(i.Change.childChangedChange(e,n,u))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.me))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(s.PRIORITY_INDEX,function(t,r){e.hasChild(t)||n.trackChildChange(i.Change.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild(s.PRIORITY_INDEX,function(e,r){if(t.hasChild(e)){var o=t.getImmediateChild(e);o.equals(r)||n.trackChildChange(i.Change.childChangedChange(e,r,o))}else n.trackChildChange(i.Change.childAddedChange(e,r))})),e.withIndex(this.me)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?o.ChildrenNode.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.me},t}();e.IndexedFilter=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(99),i=function(){function t(){}return t.getCollection=function(t){var e=""+t;return this.be[e]||(this.be[e]=new r.StatsCollection),this.be[e]},t.getOrCreateReporter=function(t,e){var n=""+t;return this.Se[n]||(this.Se[n]=e()),this.Se[n]},t.be={},t.Se={},t}();e.StatsManager=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(18),o=n(1),s=n(33),a=n(7);n(109);var u,c=function(){function t(){this.Te={},this.we=!1}return t.getInstance=function(){return u||(u=new t),u},t.prototype.interrupt=function(){for(var t in this.Te)for(var e in this.Te[t])this.Te[t][e].interrupt()},t.prototype.resume=function(){for(var t in this.Te)for(var e in this.Te[t])this.Te[t][e].resume()},t.prototype.databaseFromApp=function(t,e){var n=e||t.options.databaseURL;void 0===n&&o.fatal("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.intializeApp().");var r=s.parseRepoInfo(n),i=r.repoInfo;return a.validateUrl("Invalid Firebase Database URL",1,r),r.path.isEmpty()||o.fatal("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(i,t).database},t.prototype.deleteRepo=function(t){var e=r.safeGet(this.Te,t.app.name);e&&r.safeGet(e,t.H.toURLString())===t||o.fatal("Database "+t.app.name+"("+t.H+") has already been deleted."),t.interrupt(),delete e[t.H.toURLString()]},t.prototype.createRepo=function(t,e){var n=r.safeGet(this.Te,e.name);n||(n={},this.Te[e.name]=n);var s=r.safeGet(n,t.toURLString());return s&&o.fatal("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new i.Repo(t,this.we,e),n[t.toURLString()]=s,s},t.prototype.forceRestClient=function(t){this.we=t},t}();e.RepoManager=c},,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(33),o=n(2),s=n(21),a=n(18),u=n(26),c=n(0),h=n(7),l=function(){function t(t){this.Ie=t,t instanceof a.Repo||r.fatal("Don't call new Database() directly - please use firebase.database()."),this.B=new s.Reference(t,o.Path.Empty),this.INTERNAL=new p(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.Ie.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.Re("ref"),c.validateArgCount("database.ref",0,1,arguments.length),void 0!==t?this.B.child(t):this.B},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.Re(e),c.validateArgCount(e,1,1,arguments.length);var n=i.parseRepoInfo(t);h.validateUrl(e,1,n);var o=n.repoInfo;return o.host!==this.Ie.H.host&&r.fatal(e+": Host name does not match the current database: (found "+o.host+" but expected "+this.Ie.H.host+")"),this.ref(""+n.path)},t.prototype.Re=function(t){null===this.Ie&&r.fatal("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){c.validateArgCount("database.goOffline",0,0,arguments.length),this.Re("goOffline"),this.Ie.interrupt()},t.prototype.goOnline=function(){c.validateArgCount("database.goOnline",0,0,arguments.length),this.Re("goOnline"),this.Ie.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}();e.Database=l;var p=function(){function t(t){this.database=t}return t.prototype.delete=function(){return this.database.Re("delete"),u.RepoManager.getInstance().deleteRepo(this.database.Ie),this.database.Ie=null,this.database.B=null,this.database.INTERNAL=null,this.database=null,Promise.resolve()},t}();e.DatabaseInternals=p},function(t,e,n){"use strict";function r(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(34),s=n(1);e.parseRepoInfo=function(t){var n=e.parseURL(t),r=n.subdomain;"firebase"===n.domain&&s.fatal(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!=r||s.fatal("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||s.warnIfPageIsSecure();var a="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new o.RepoInfo(n.host,n.secure,r,a),path:new i.Path(n.pathString)}},e.parseURL=function(t){var e="",n="",i="",o="",s=!0,a="https",u=443;if("string"==typeof t){var c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));var h=t.indexOf("/");-1===h&&(h=t.length),e=t.substring(0,h),o=r(t.substring(h));var l=e.split(".");3===l.length?(n=l[1],i=l[0].toLowerCase()):2===l.length&&(n=l[0]),(c=e.indexOf(":"))>=0&&(s="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10))}return{host:e,port:u,domain:n,subdomain:i,secure:s,scheme:a,pathString:o}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(0),o=n(13),s=n(14),a=function(){function t(t,e,n,r,i){void 0===i&&(i=""),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=o.PersistentStorage.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&o.PersistentStorage.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){r.assert("string"==typeof t,"typeof type must == string"),r.assert("object"==typeof e,"typeof params must == object");var n;if(t===s.WEBSOCKET)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==s.LONG_POLLING)throw Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var o=[];return i.forEach(e,function(t,e){o.push(t+"="+e)}),n+o.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();e.RepoInfo=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(7),o=n(1),s=n(0),a=function(){function t(t,e){this.Ie=t,this.Oe=e}return t.prototype.cancel=function(t){r.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),r.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new s.Deferred;return this.Ie.onDisconnectCancel(this.Oe,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){r.validateArgCount("OnDisconnect.remove",0,1,arguments.length),i.validateWritablePath("OnDisconnect.remove",this.Oe),r.validateCallback("OnDisconnect.remove",1,t,!0);var e=new s.Deferred;return this.Ie.onDisconnectSet(this.Oe,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){r.validateArgCount("OnDisconnect.set",1,2,arguments.length),i.validateWritablePath("OnDisconnect.set",this.Oe),i.validateFirebaseDataArg("OnDisconnect.set",1,t,this.Oe,!1),r.validateCallback("OnDisconnect.set",2,e,!0);var n=new s.Deferred;return this.Ie.onDisconnectSet(this.Oe,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){r.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),i.validateWritablePath("OnDisconnect.setWithPriority",this.Oe),i.validateFirebaseDataArg("OnDisconnect.setWithPriority",1,t,this.Oe,!1),i.validatePriority("OnDisconnect.setWithPriority",2,e,!1),r.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var o=new s.Deferred;return this.Ie.onDisconnectSetWithPriority(this.Oe,t,e,o.wrapCallback(n)),o.promise},t.prototype.update=function(t,e){if(r.validateArgCount("OnDisconnect.update",1,2,arguments.length),i.validateWritablePath("OnDisconnect.update",this.Oe),Array.isArray(t)){for(var n={},a=0;a<t.length;++a)n[""+a]=t[a];t=n,o.warn("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}i.validateFirebaseMergeDataArg("OnDisconnect.update",1,t,this.Oe,!1),r.validateCallback("OnDisconnect.update",2,e,!0);var u=new s.Deferred;return this.Ie.onDisconnectUpdate(this.Oe,t,u.wrapCallback(e)),u.promise},t}();e.OnDisconnect=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(0),o=n(10),s=n(3),a=n(38),u=n(42),c=n(1),h=n(2),l=n(7),p=n(0),f=n(84),d=n(0),v=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.Ae=n,this.De=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return i.assert(r,"Reference.ts has not been loaded"),r},set:function(t){r=t},enumerable:!0,configurable:!0}),t.Me=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===o.KEY_INDEX){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",h="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!=c.MIN_NAME)throw Error(r);if("string"!=typeof e)throw Error(h)}if(t.hasEnd()){if(t.getIndexEndName()!=c.MAX_NAME)throw Error(r);if("string"!=typeof n)throw Error(h)}}else if(t.getIndex()===s.PRIORITY_INDEX){if(null!=e&&!l.isValidPriority(e)||null!=n&&!l.isValidPriority(n))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(i.assert(t.getIndex()instanceof u.PathIndex||t.getIndex()===a.VALUE_INDEX,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.Le=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.Fe=function(t){if(!0===this.De)throw Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.Ae},t.prototype.getRef=function(){return p.validateArgCount("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){p.validateArgCount("Query.on",2,4,arguments.length),l.validateEventType("Query.on",1,e,!1),p.validateCallback("Query.on",2,n,!1);var o=t.xe("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[e]=n,this.onChildEvent(s,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new f.ValueEventRegistration(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new f.ChildEventRegistration(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){p.validateArgCount("Query.off",0,3,arguments.length),l.validateEventType("Query.off",1,t,!0),p.validateCallback("Query.off",2,e,!0),p.validateContextObject("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new f.ValueEventRegistration(o,null,n||null)}else t&&(e&&(i={},i[t]=e),r=new f.ChildEventRegistration(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;p.validateArgCount("Query.once",1,4,arguments.length),l.validateEventType("Query.once",1,e,!1),p.validateCallback("Query.once",2,n,!0);var s=t.xe("Query.once",r,i),a=!0,u=new d.Deferred;u.promise.catch(function(){});var c=function(t){a&&(a=!1,o.off(e,c),n&&n.bind(s.context)(t),u.resolve(t))};return this.on(e,c,function(t){o.off(e,c),s.cancel&&s.cancel.bind(s.context)(t),u.reject(t)}),u.promise},t.prototype.limitToFirst=function(e){if(p.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.Ae.hasLimit())throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.Ae.limitToFirst(e),this.De)},t.prototype.limitToLast=function(e){if(p.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.Ae.hasLimit())throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.Ae.limitToLast(e),this.De)},t.prototype.orderByChild=function(e){if(p.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');l.validatePathString("Query.orderByChild",1,e,!1),this.Fe("Query.orderByChild");var n=new h.Path(e);if(n.isEmpty())throw Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new u.PathIndex(n),i=this.Ae.orderBy(r);return t.Me(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){p.validateArgCount("Query.orderByKey",0,0,arguments.length),this.Fe("Query.orderByKey");var e=this.Ae.orderBy(o.KEY_INDEX);return t.Me(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){p.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.Fe("Query.orderByPriority");var e=this.Ae.orderBy(s.PRIORITY_INDEX);return t.Me(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){p.validateArgCount("Query.orderByValue",0,0,arguments.length),this.Fe("Query.orderByValue");var e=this.Ae.orderBy(a.VALUE_INDEX);return t.Me(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),p.validateArgCount("Query.startAt",0,2,arguments.length),l.validateFirebaseDataArg("Query.startAt",1,e,this.path,!0),l.validateKey("Query.startAt",2,n,!0);var r=this.Ae.startAt(e,n);if(t.Le(r),t.Me(r),this.Ae.hasStart())throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.De)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),p.validateArgCount("Query.endAt",0,2,arguments.length),l.validateFirebaseDataArg("Query.endAt",1,e,this.path,!0),l.validateKey("Query.endAt",2,n,!0);var r=this.Ae.endAt(e,n);if(t.Le(r),t.Me(r),this.Ae.hasEnd())throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.De)},t.prototype.equalTo=function(t,e){if(p.validateArgCount("Query.equalTo",1,2,arguments.length),l.validateFirebaseDataArg("Query.equalTo",1,t,this.path,!1),l.validateKey("Query.equalTo",2,e,!0),this.Ae.hasStart())throw Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.Ae.hasEnd())throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return p.validateArgCount("Query.toString",0,0,arguments.length),""+this.repo+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return p.validateArgCount("Query.toJSON",0,1,arguments.length),""+this},t.prototype.queryObject=function(){return this.Ae.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=c.ObjectToUniqueKey(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(p.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof t))throw Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var n=this.repo===e.repo,r=this.path.equals(e.path),i=this.queryIdentifier()===e.queryIdentifier();return n&&r&&i},t.xe=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,p.validateCallback(t,3,r.cancel,!0),r.context=n,p.validateContextObject(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw Error(p.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}();e.Query=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(0),o=n(1),s=n(0);e.setMaxNode=function(t){r=t},e.priorityHashText=function(t){return"number"==typeof t?"number:"+o.doubleToIEEE754String(t):"string:"+t},e.validatePriorityNode=function(t){if(t.isLeafNode()){var e=t.val();i.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&s.contains(e,".sv"),"Priority must be a string or number.")}else i.assert(t===r||t.isEmpty(),"priority of unexpected type.");i.assert(t===r||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(15),o=n(5),s=n(1),a=n(11),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?s.nameCompare(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return o.NamedNode.MIN},e.prototype.maxPost=function(){return o.NamedNode.MAX},e.prototype.makePost=function(t,e){var n=a.nodeFromJSON(t);return new o.NamedNode(e,n)},e.prototype.toString=function(){return".value"},e}(i.Index);e.ValueIndex=u,e.VALUE_INDEX=new u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(0),o=n(40),s=n(0),a=n(5),u=n(3),c=n(10),h={},l=function(){function t(t,e){this.ke=t,this.We=e}return Object.defineProperty(t,"Default",{get:function(){return i.assert(h&&u.PRIORITY_INDEX,"ChildrenNode.ts has not been loaded"),r=r||new t({".priority":h},{".priority":u.PRIORITY_INDEX})},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=s.safeGet(this.ke,t);if(!e)throw Error("No index defined for "+t);return e===h?null:e},t.prototype.hasIndex=function(t){return s.contains(this.We,""+t)},t.prototype.addIndex=function(e,n){i.assert(e!==c.KEY_INDEX,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],u=!1,l=n.getIterator(a.NamedNode.Wrap),p=l.getNext();p;)u=u||e.isDefinedOn(p.node),r.push(p),p=l.getNext();var f;f=u?o.buildChildSet(r,e.getCompare()):h;var d=""+e,v=s.clone(this.We);v[d]=e;var y=s.clone(this.ke);return y[d]=f,new t(y,v)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(s.map(this.ke,function(t,u){var c=s.safeGet(r.We,u);if(i.assert(c,"Missing index implementation for "+u),t===h){if(c.isDefinedOn(e.node)){for(var l=[],p=n.getIterator(a.NamedNode.Wrap),f=p.getNext();f;)f.name!=e.name&&l.push(f),f=p.getNext();return l.push(e),o.buildChildSet(l,c.getCompare())}return h}var d=n.get(e.name),v=t;return d&&(v=v.remove(new a.NamedNode(e.name,d))),v.insert(e,e.node)}),this.We)},t.prototype.removeFromIndexes=function(e,n){return new t(s.map(this.ke,function(t){if(t===h)return t;var r=n.get(e.name);return r?t.remove(new a.NamedNode(e.name,r)):t}),this.We)},t}();e.IndexMap=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(17),i=n(17),o=Math.log(2),s=function(){function t(t){this.count=function(t){return parseInt(Math.log(t)/o,10)}(t+1),this.je=this.count-1;var e=function(t){return parseInt(Array(t+1).join("1"),2)}(this.count);this.Ve=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.Ve&1<<this.je);return this.je--,t},t}();e.buildChildSet=function(t,e,n,o){t.sort(e);var a=function(e,i){var o,s,u=i-e;if(0==u)return null;if(1==u)return o=t[e],s=n?n(o):o,new r.LLRBNode(s,o.node,r.LLRBNode.BLACK,null,null);var c=parseInt(u/2,10)+e,h=a(e,c),l=a(c+1,i);return o=t[c],s=n?n(o):o,new r.LLRBNode(s,o.node,r.LLRBNode.BLACK,h,l)},u=function(e){for(var i=null,o=null,s=t.length,u=function(e,i){var o=s-e,u=s;s-=e;var h=a(o+1,u),l=t[o],p=n?n(l):l;c(new r.LLRBNode(p,l.node,i,null,h))},c=function(t){i?(i.left=t,i=t):(o=t,i=t)},h=0;h<e.count;++h){var l=e.nextBitIsOne(),p=Math.pow(2,e.count-(h+1));l?u(p,r.LLRBNode.BLACK):(u(p,r.LLRBNode.BLACK),u(p,r.LLRBNode.RED))}return o}(new s(t.length));return new i.SortedMap(o||e,u)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);e.NAME_ONLY_COMPARATOR=function(t,e){return r.nameCompare(t.name,e.name)},e.NAME_COMPARATOR=function(t,e){return r.nameCompare(t,e)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(1),s=n(15),a=n(4),u=n(5),c=n(11),h=function(t){function e(e){var n=t.call(this)||this;return n.Qe=e,i.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return r(e,t),e.prototype.extractChild=function(t){return t.getChild(this.Qe)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.Qe).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?o.nameCompare(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=c.nodeFromJSON(t),r=a.ChildrenNode.EMPTY_NODE.updateChild(this.Qe,n);return new u.NamedNode(e,r)},e.prototype.maxPost=function(){var t=a.ChildrenNode.EMPTY_NODE.updateChild(this.Qe,a.MAX_NODE);return new u.NamedNode(o.MAX_NAME,t)},e.prototype.toString=function(){return this.Qe.slice().join("/")},e}(s.Index);e.PathIndex=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(44),s=n(16),a=n(11),u=n(3);e.generateWithValues=function(t){return t=t||{},t.timestamp=t.timestamp||(new Date).getTime(),t},e.resolveDeferredValue=function(t,e){return t&&"object"==typeof t?(r.assert(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},e.resolveDeferredValueTree=function(t,n){var r=new o.SparseSnapshotTree;return t.forEachTree(new i.Path(""),function(t,i){r.remember(t,e.resolveDeferredValueSnapshot(i,n))}),r},e.resolveDeferredValueSnapshot=function(t,n){var r,i=t.getPriority().val(),o=e.resolveDeferredValue(i,n);if(t.isLeafNode()){var c=t,h=e.resolveDeferredValue(c.getValue(),n);return h!==c.getValue()||o!==c.getPriority().val()?new s.LeafNode(h,a.nodeFromJSON(o)):t}var l=t;return r=l,o!==l.getPriority().val()&&(r=r.updatePriority(new s.LeafNode(o))),l.forEachChild(u.PRIORITY_INDEX,function(t,i){var o=e.resolveDeferredValueSnapshot(i,n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(3),o=n(45),s=function(){function t(){this.T=null,this._=null}return t.prototype.find=function(t){if(null!=this.T)return this.T.getChild(t);if(t.isEmpty()||null==this._)return null;var e=t.getFront();return t=t.popFront(),this._.contains(e)?this._.get(e).find(t):null},t.prototype.remember=function(e,n){if(e.isEmpty())this.T=n,this._=null;else if(null!==this.T)this.T=this.T.updateChild(e,n);else{null==this._&&(this._=new o.CountedSet);var r=e.getFront();this._.contains(r)||this._.add(r,new t);var i=this._.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.T=null,this._=null,!0;if(null!==this.T){if(this.T.isLeafNode())return!1;var e=this.T;this.T=null;var n=this;return e.forEachChild(i.PRIORITY_INDEX,function(t,e){n.remember(new r.Path(t),e)}),this.forget(t)}if(null!==this._){var o=t.getFront();return t=t.popFront(),this._.contains(o)&&this._.get(o).forget(t)&&this._.remove(o),!!this._.isEmpty()&&(this._=null,!0)}return!0},t.prototype.forEachTree=function(t,e){null!==this.T?e(t,this.T):this.forEachChild(function(n,i){var o=new r.Path(t+"/"+n);i.forEachTree(o,e)})},t.prototype.forEachChild=function(t){null!==this._&&this._.each(function(e,n){t(e,n)})},t}();e.SparseSnapshotTree=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(){this.set={}}return t.prototype.add=function(t,e){this.set[t]=null===e||e},t.prototype.contains=function(t){return r.contains(this.set,t)},t.prototype.get=function(t){return this.contains(t)?this.set[t]:void 0},t.prototype.remove=function(t){delete this.set[t]},t.prototype.clear=function(){this.set={}},t.prototype.isEmpty=function(){return r.isEmpty(this.set)},t.prototype.count=function(){return r.getCount(this.set)},t.prototype.each=function(t){r.forEach(this.set,function(e,n){return t(e,n)})},t.prototype.keys=function(){var t=[];return r.forEach(this.set,function(e){t.push(e)}),t},t}();e.CountedSet=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(2),o=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=r.OperationType.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,i.Path.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}();e.Overwrite=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(19),o=n(4),s=n(0),a=n(0),u=n(48),c=n(90),h=function(){function t(){this.qe={}}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return s.assert(r,"Reference.ts has not been loaded"),r},set:function(t){s.assert(!r,"__referenceConstructor has already been defined"),r=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return a.isEmpty(this.qe)},t.prototype.applyOperation=function(t,e,n){var r=t.source.queryId;if(null!==r){var i=a.safeGet(this.qe,r);return s.assert(null!=i,"SyncTree gave us an op for an invalid query."),i.applyOperation(t,e,n)}var o=[];return a.forEach(this.qe,function(r,i){o=o.concat(i.applyOperation(t,e,n))}),o},t.prototype.addEventRegistration=function(t,e,n,r,s){var h=t.queryIdentifier(),l=a.safeGet(this.qe,h);if(!l){var p=n.calcCompleteEventCache(s?r:null),f=!1;p?f=!0:r instanceof o.ChildrenNode?(p=n.calcCompleteEventChildren(r),f=!1):(p=o.ChildrenNode.EMPTY_NODE,f=!1);var d=new u.ViewCache(new i.CacheNode(p,f,!1),new i.CacheNode(r,s,!1));l=new c.View(t,d),this.qe[h]=l}return l.addEventRegistration(e),l.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i=e.queryIdentifier(),o=[],s=[],u=this.hasCompleteView();if("default"===i){var c=this;a.forEach(this.qe,function(t,e){s=s.concat(e.removeEventRegistration(n,r)),e.isEmpty()&&(delete c.qe[t],e.getQuery().getQueryParams().loadsAllData()||o.push(e.getQuery()))})}else{var h=a.safeGet(this.qe,i);h&&(s=s.concat(h.removeEventRegistration(n,r)),h.isEmpty()&&(delete this.qe[i],h.getQuery().getQueryParams().loadsAllData()||o.push(h.getQuery())))}return u&&!this.hasCompleteView()&&o.push(new t.__referenceConstructor(e.repo,e.path)),{removed:o,events:s}},t.prototype.getQueryViews=function(){var t=this;return Object.keys(this.qe).map(function(e){return t.qe[e]}).filter(function(t){return!t.getQuery().getQueryParams().loadsAllData()})},t.prototype.getCompleteServerCache=function(t){var e=null;return a.forEach(this.qe,function(n,r){e=e||r.getCompleteServerCache(t)}),e},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return a.safeGet(this.qe,e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){return a.findValue(this.qe,function(t){return t.getQuery().getQueryParams().loadsAllData()})||null},t}();e.SyncPoint=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(19),o=function(){function t(t,e){this.Ue=t,this.Be=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new i.CacheNode(e,n,r),this.Be)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.Ue,new i.CacheNode(e,n,r))},t.prototype.getEventCache=function(){return this.Ue},t.prototype.getCompleteEventSnap=function(){return this.Ue.isFullyInitialized()?this.Ue.getNode():null},t.prototype.getServerCache=function(){return this.Be},t.prototype.getCompleteServerSnap=function(){return this.Be.isFullyInitialized()?this.Be.getNode():null},t.Empty=new t(new i.CacheNode(r.ChildrenNode.EMPTY_NODE,!1,!1),new i.CacheNode(r.ChildrenNode.EMPTY_NODE,!1,!1)),t}();e.ViewCache=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(t){this.He=t,this.Ge=null}return t.prototype.get=function(){var t=this.He.get(),e=r.clone(t);return this.Ge&&r.forEach(this.Ge,function(t,n){e[t]=e[t]-n}),this.Ge=t,e},t}();e.StatsListener=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=n(0),s=n(0),a=n(0),u=n(1),c=n(2),h=n(102),l=n(103),p=n(0),f=n(52),d=n(0),v=n(0),y=1e3,g=3e5,m=function(t){function e(n,r,i,o,s,a){var c=t.call(this)||this;if(c.H=n,c.ee=r,c.te=i,c.ne=o,c.Ke=s,c.Ye=a,c.id=e.Xe++,c.de=u.logWrapper("p:"+c.id+":"),c.ze={},c.Je={},c.$e=[],c.Ze=0,c.et=[],c.tt=!1,c.nt=y,c.rt=g,c.it=null,c.lastSessionId=null,c.ot=null,c.at=!1,c.st={},c.ut=0,c.lt=null,c.ht=null,c.ct=!1,c.pt=0,c.dt=!0,c.ft=null,c._t=null,a&&!v.isNodeSdk())throw Error("Auth override specified in options, but not supported on non Node.js platforms");return c.yt(0),h.VisibilityMonitor.getInstance().on("visible",c.vt,c),-1===n.host.indexOf("fblocal")&&l.OnlineMonitor.getInstance().on("online",c.gt,c),c}return r(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.ut,i={r:r,a:t,b:e};this.de(s.stringify(i)),a.assert(this.tt,"sendRequest call when we're not connected not allowed."),this.lt.sendRequest(i),n&&(this.st[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=""+t.path;this.de("Listen called for "+o+" "+i),this.Je[o]=this.Je[o]||{},a.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),a.assert(!this.Je[o][i],"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.Je[o][i]=s,this.tt&&this.mt(s)},e.prototype.mt=function(t){var n=this,r=t.query,i=""+r.path,o=r.queryIdentifier();this.de("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.Ct(a,r),(n.Je[i]&&n.Je[i][o])===t&&(n.de("listen response",s),"ok"!==u&&n.Et(i,o),t.onComplete&&t.onComplete(u,a))})},e.Ct=function(t,e){if(t&&"object"==typeof t&&o.contains(t,"w")){var n=o.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex()+'"',i=""+e.path;u.warn("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.ht=t,this.de("Auth token refreshed"),this.ht?this.tryAuth():this.tt&&this.sendRequest("unauth",{},function(){}),this.Nt(t)},e.prototype.Nt=function(t){(t&&40===t.length||p.isAdmin(t))&&(this.de("Admin auth credential detected.  Reducing max reconnect time."),this.rt=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.tt&&this.ht){var e=this.ht,n=p.isValidFormat(e)?"auth":"gauth",r={cred:e};null===this.Ye?r.noauth=!0:"object"==typeof this.Ye&&(r.authvar=this.Ye),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.ht===e&&("ok"===r?t.pt=0:t.Pt(r,i))})}},e.prototype.unlisten=function(t,e){var n=""+t.path,r=t.queryIdentifier();this.de("Unlisten called for "+n+" "+r),a.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.Et(n,r)&&this.tt&&this.bt(n,r,t.queryObject(),e)},e.prototype.bt=function(t,e,n,r){this.de("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.tt?this.St("o",t,e,n):this.et.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.tt?this.St("om",t,e,n):this.et.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.tt?this.St("oc",t,null,e):this.et.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.St=function(t,e,n,r){var i={p:e,d:n};this.de("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.$e.push({action:t,request:o,onComplete:r}),this.Ze++;var s=this.$e.length-1;this.tt?this.Tt(s):this.de("Buffering put: "+e)},e.prototype.Tt=function(t){var e=this,n=this.$e[t].action,r=this.$e[t].request,i=this.$e[t].onComplete;this.$e[t].queued=this.tt,this.sendRequest(n,r,function(r){e.de(n+" response",r),delete e.$e[t],e.Ze--,0===e.Ze&&(e.$e=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.tt){var n={c:t};this.de("reportStats",n),this.sendRequest("s",n,function(t){if("ok"!==t.s){var n=t.d;e.de("reportStats","Error sending stats: "+n)}})}},e.prototype.wt=function(t){if("r"in t){this.de("from server: "+s.stringify(t));var e=t.r,n=this.st[e];n&&(delete this.st[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.It(t.a,t.b)}},e.prototype.It=function(t,e){this.de("handleServerMessage",t,e),"d"===t?this.ee(e.p,e.d,!1,e.t):"m"===t?this.ee(e.p,e.d,!0,e.t):"c"===t?this.Rt(e.p,e.q):"ac"===t?this.Pt(e.s,e.d):"sd"===t?this.Ot(e):u.error("Unrecognized action received from server: "+s.stringify(t)+"\nAre you using the latest client?")},e.prototype.At=function(t,e){this.de("connection ready"),this.tt=!0,this._t=(new Date).getTime(),this.Dt(t),this.lastSessionId=e,this.dt&&this.Mt(),this.Lt(),this.dt=!1,this.te(!0)},e.prototype.yt=function(t){var e=this;a.assert(!this.lt,"Scheduling a connect when we're already connected/ing?"),this.ot&&clearTimeout(this.ot),this.ot=setTimeout(function(){e.ot=null,e.Ft()},Math.floor(t))},e.prototype.vt=function(t){t&&!this.at&&this.nt===this.rt&&(this.de("Window became visible.  Reducing delay."),this.nt=y,this.lt||this.yt(0)),this.at=t},e.prototype.gt=function(t){t?(this.de("Browser went online."),this.nt=y,this.lt||this.yt(0)):(this.de("Browser went offline.  Killing connection."),this.lt&&this.lt.close())},e.prototype.xt=function(){if(this.de("data client disconnected"),this.tt=!1,this.lt=null,this.kt(),this.st={},this.Wt()){this.at?this._t&&((new Date).getTime()-this._t>3e4&&(this.nt=y),this._t=null):(this.de("Window isn't visible.  Delaying reconnect."),this.nt=this.rt,this.ft=(new Date).getTime());var t=(new Date).getTime()-this.ft,e=Math.max(0,this.nt-t);e=Math.random()*e,this.de("Trying to reconnect in "+e+"ms"),this.yt(e),this.nt=Math.min(this.rt,1.3*this.nt)}this.te(!1)},e.prototype.Ft=function(){if(this.Wt()){this.de("Making a connection attempt"),this.ft=(new Date).getTime(),this._t=null;var t=this.wt.bind(this),n=this.At.bind(this),r=this.xt.bind(this),i=this.id+":"+e.jt++,o=this,s=this.lastSessionId,c=!1,h=null,l=function(){h?h.close():(c=!0,r())};this.lt={close:l,sendRequest:function(t){a.assert(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(t)}};var p=this.ct;this.ct=!1,this.Ke.getToken(p).then(function(e){c?u.log("getToken() completed but was canceled"):(u.log("getToken() completed. Creating connection."),o.ht=e&&e.accessToken,h=new f.Connection(i,o.H,t,n,r,function(t){u.warn(t+" ("+o.H+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.de("Failed to get token: "+t),c||(d.CONSTANTS.NODE_ADMIN&&u.warn(t),l())})}},e.prototype.interrupt=function(t){u.log("Interrupting connection for reason: "+t),this.ze[t]=!0,this.lt?this.lt.close():(this.ot&&(clearTimeout(this.ot),this.ot=null),this.tt&&this.xt())},e.prototype.resume=function(t){u.log("Resuming connection for reason: "+t),delete this.ze[t],o.isEmpty(this.ze)&&(this.nt=y,this.lt||this.yt(0))},e.prototype.Dt=function(t){var e=t-(new Date).getTime();this.ne({serverTimeOffset:e})},e.prototype.kt=function(){for(var t=0;t<this.$e.length;t++){var e=this.$e[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.$e[t],this.Ze--)}0===this.Ze&&(this.$e=[])},e.prototype.Rt=function(t,e){var n;n=e?e.map(function(t){return u.ObjectToUniqueKey(t)}).join("$"):"default";var r=this.Et(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.Et=function(t,e){var n,r=""+new c.Path(t);return void 0!==this.Je[r]?(n=this.Je[r][e],delete this.Je[r][e],0===o.getCount(this.Je[r])&&delete this.Je[r]):n=void 0,n},e.prototype.Pt=function(t,e){u.log("Auth token revoked: "+t+"/"+e),this.ht=null,this.ct=!0,this.lt.close(),"invalid_token"!==t&&"permission_denied"!==t||++this.pt>=3&&(this.nt=3e4,this.Ke.notifyForInvalidToken())},e.prototype.Ot=function(t){this.it?this.it(t):"msg"in t&&"undefined"!=typeof console&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.Lt=function(){var t=this;this.tryAuth(),o.forEach(this.Je,function(e,n){o.forEach(n,function(e,n){t.mt(n)})});for(var e=0;e<this.$e.length;e++)this.$e[e]&&this.Tt(e);for(;this.et.length;){var n=this.et.shift();this.St(n.action,n.pathString,n.data,n.onComplete)}},e.prototype.Mt=function(){var t={},e="js";d.CONSTANTS.NODE_ADMIN?e="admin_node":d.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+i.default.SDK_VERSION.replace(/\./g,"-")]=1,v.isMobileCordova()?t["framework.cordova"]=1:v.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.Wt=function(){var t=l.OnlineMonitor.getInstance().currentlyOnline();return o.isEmpty(this.ze)&&t},e.Xe=0,e.jt=0,e}(n(55).ServerActions);e.PersistentConnection=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(t){this.Vt=t,this.Qt={},r.assert(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.Qt[t]))for(var r=this.Qt[t].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.qt(t),this.Qt[t]=this.Qt[t]||[],this.Qt[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.qt(t);for(var r=this.Qt[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.qt=function(t){r.assert(this.Vt.find(function(e){return e===t}),"Unknown event: "+t)},t}();e.EventEmitter=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(13),o=n(14),s=n(104),a=function(){function t(t,e,n,i,o,a,u){this.id=t,this.H=e,this.Ut=n,this.At=i,this.z=o,this.Bt=a,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.Ht=0,this.de=r.logWrapper("c:"+this.id+":"),this.Gt=new s.TransportManager(e),this.de("Connection created"),this.Kt()}return t.prototype.Kt=function(){var t=this,e=this.Gt.initialTransport();this.Yt=new e(this.Xt(),this.H,void 0,this.lastSessionId),this.zt=e.responsesRequiredToBeHealthy||0;var n=this.Jt(this.Yt),i=this.$t(this.Yt);this.Zt=this.Yt,this.en=this.Yt,this.tn=null,this.nn=!1,setTimeout(function(){t.Yt&&t.Yt.open(n,i)},Math.floor(0));var o=e.healthyTimeout||0;o>0&&(this.rn=r.setTimeoutNonBlocking(function(){t.rn=null,t.nn||(t.Yt&&t.Yt.bytesReceived>102400?(t.de("Connection exceeded healthy timeout but has received "+t.Yt.bytesReceived+" bytes.  Marking connection healthy."),t.nn=!0,t.Yt.markConnectionHealthy()):t.Yt&&t.Yt.bytesSent>10240?t.de("Connection exceeded healthy timeout but has sent "+t.Yt.bytesSent+" bytes.  Leaving connection alive."):(t.de("Closing unhealthy connection after timeout."),t.close()))},Math.floor(o)))},t.prototype.Xt=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.$t=function(t){var e=this;return function(n){t===e.Yt?e.in(n):t===e.tn?(e.de("Secondary connection lost."),e.an()):e.de("closing an old connection")}},t.prototype.Jt=function(t){var e=this;return function(n){2!=e.Ht&&(t===e.en?e.sn(n):t===e.tn?e.un(n):e.de("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.ln(e)},t.prototype.tryCleanupConnection=function(){this.Zt===this.tn&&this.en===this.tn&&(this.de("cleaning up and promoting a connection: "+this.tn.connId),this.Yt=this.tn,this.tn=null)},t.prototype.hn=function(t){if("t"in t){var e=t.t;"a"===e?this.cn():"r"===e?(this.de("Got a reset on secondary, closing it"),this.tn.close(),this.Zt!==this.tn&&this.en!==this.tn||this.close()):"o"===e&&(this.de("got pong on secondary."),this.pn--,this.cn())}},t.prototype.un=function(t){var e=r.requireKey("t",t),n=r.requireKey("d",t);if("c"==e)this.hn(n);else{if("d"!=e)throw Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.cn=function(){this.pn<=0?(this.de("Secondary connection is healthy."),this.nn=!0,this.tn.markConnectionHealthy(),this.dn()):(this.de("sending ping on secondary."),this.tn.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.dn=function(){this.tn.start(),this.de("sending client ack on secondary"),this.tn.send({t:"c",d:{t:"a",d:{}}}),this.de("Ending transmission on primary"),this.Yt.send({t:"c",d:{t:"n",d:{}}}),this.Zt=this.tn,this.tryCleanupConnection()},t.prototype.sn=function(t){var e=r.requireKey("t",t),n=r.requireKey("d",t);"c"==e?this.fn(n):"d"==e&&this.wt(n)},t.prototype.wt=function(t){this._n(),this.Ut(t)},t.prototype._n=function(){this.nn||--this.zt<=0&&(this.de("Primary connection is healthy."),this.nn=!0,this.Yt.markConnectionHealthy())},t.prototype.fn=function(t){var e=r.requireKey("t",t);if("d"in t){var n=t.d;if("h"===e)this.yn(n);else if("n"===e){this.de("recvd end transmission on primary"),this.en=this.tn;for(var i=0;i<this.pendingDataMessages.length;++i)this.wt(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.vn(n):"r"===e?this.gn(n):"e"===e?r.error("Server Error: "+n):"o"===e?(this.de("got pong on primary."),this._n(),this.mn()):r.error("Unknown control packet command: "+e)}},t.prototype.yn=function(t){var e=t.ts,n=t.v,i=t.h;this.sessionId=t.s,this.H.updateHost(i),0==this.Ht&&(this.Yt.start(),this.Cn(this.Yt,e),o.PROTOCOL_VERSION!==n&&r.warn("Protocol version mismatch detected"),this.En())},t.prototype.En=function(){var t=this.Gt.upgradeTransport();t&&this.Nn(t)},t.prototype.Nn=function(t){var e=this;this.tn=new t(this.Xt(),this.H,this.sessionId),this.pn=t.responsesRequiredToBeHealthy||0;var n=this.Jt(this.tn),i=this.$t(this.tn);this.tn.open(n,i),r.setTimeoutNonBlocking(function(){e.tn&&(e.de("Timed out trying to upgrade."),e.tn.close())},Math.floor(6e4))},t.prototype.gn=function(t){this.de("Reset packet received.  New host: "+t),this.H.updateHost(t),1===this.Ht?this.close():(this.Pn(),this.Kt())},t.prototype.Cn=function(t,e){var n=this;this.de("Realtime connection established."),this.Yt=t,this.Ht=1,this.At&&(this.At(e,this.sessionId),this.At=null),0===this.zt?(this.de("Primary connection is healthy."),this.nn=!0):r.setTimeoutNonBlocking(function(){n.mn()},Math.floor(5e3))},t.prototype.mn=function(){this.nn||1!==this.Ht||(this.de("sending ping on primary."),this.ln({t:"c",d:{t:"p",d:{}}}))},t.prototype.an=function(){var t=this.tn;this.tn=null,this.Zt!==t&&this.en!==t||this.close()},t.prototype.in=function(t){this.Yt=null,t||0!==this.Ht?1===this.Ht&&this.de("Realtime connection lost."):(this.de("Realtime connection failed."),this.H.isCacheableHost()&&(i.PersistentStorage.remove("host:"+this.H.host),this.H.internalHost=this.H.host)),this.close()},t.prototype.vn=function(t){this.de("Connection shutdown command received. Shutting down..."),this.Bt&&(this.Bt(t),this.Bt=null),this.z=null,this.close()},t.prototype.ln=function(t){if(1!==this.Ht)throw"Connection is not connected";this.Zt.send(t)},t.prototype.close=function(){2!==this.Ht&&(this.de("Closing realtime connection."),this.Ht=2,this.Pn(),this.z&&(this.z(),this.z=null))},t.prototype.Pn=function(){this.de("Shutting down all connections"),this.Yt&&(this.Yt.close(),this.Yt=null),this.tn&&(this.tn.close(),this.tn=null),this.rn&&(clearTimeout(this.rn),this.rn=null)},t}();e.Connection=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(45),o=n(25),s=n(105),a=n(14),u=n(0),c=n(0);e.FIREBASE_LONGPOLL_START_PARAM="start",e.FIREBASE_LONGPOLL_CLOSE_COMMAND="close",e.FIREBASE_LONGPOLL_COMMAND_CB_NAME="pLPCommand",e.FIREBASE_LONGPOLL_DATA_CB_NAME="pRTLPCB",e.FIREBASE_LONGPOLL_ID_PARAM="id",e.FIREBASE_LONGPOLL_PW_PARAM="pw",e.FIREBASE_LONGPOLL_SERIAL_PARAM="ser",e.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM="cb",e.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM="seg",e.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET="ts",e.FIREBASE_LONGPOLL_DATA_PARAM="d",e.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM="disconn",e.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM="dframe";var h=function(){function t(t,e,n,i){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.bn=!1,this.de=r.logWrapper(t),this.$=o.StatsManager.getCollection(e),this.urlFn=function(t){return e.connectionURL(a.LONG_POLLING,t)}}return t.prototype.open=function(t,n){var i=this;this.curSegmentNum=0,this.z=n,this.myPacketOrderer=new s.PacketReceiver(t),this.Sn=!1,this.Tn=setTimeout(function(){i.de("Timed out trying to connect."),i.wn(),i.Tn=null},Math.floor(3e4)),r.executeWhenDOMReady(function(){if(!i.Sn){i.scriptTagHolder=new l(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],o=t[1],s=t[2];if(t[3],t[4],i.In(t),i.scriptTagHolder)if(i.Tn&&(clearTimeout(i.Tn),i.Tn=null),i.bn=!0,r==e.FIREBASE_LONGPOLL_START_PARAM)i.id=o,i.password=s;else{if(r!==e.FIREBASE_LONGPOLL_CLOSE_COMMAND)throw Error("Unrecognized command received: "+r);o?(i.scriptTagHolder.sendNewPolls=!1,i.myPacketOrderer.closeAfter(o,function(){i.wn()})):i.wn()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1];i.In(t),i.myPacketOrderer.handleResponse(n,r)},function(){i.wn()},i.urlFn);var t={};t[e.FIREBASE_LONGPOLL_START_PARAM]="t",t[e.FIREBASE_LONGPOLL_SERIAL_PARAM]=Math.floor(1e8*Math.random()),i.scriptTagHolder.uniqueCallbackIdentifier&&(t[e.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM]=i.scriptTagHolder.uniqueCallbackIdentifier),t[a.VERSION_PARAM]=a.PROTOCOL_VERSION,i.transportSessionId&&(t[a.TRANSPORT_SESSION_PARAM]=i.transportSessionId),i.lastSessionId&&(t[a.LAST_SESSION_PARAM]=i.lastSessionId),!c.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(a.FORGE_DOMAIN)&&(t[a.REFERER_PARAM]=a.FORGE_REF);var n=i.urlFn(t);i.de("Connecting via long-poll to "+n),i.scriptTagHolder.addTag(n,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.Rn=!0},t.forceDisallow=function(){t.On=!0},t.isAvailable=function(){return t.Rn||!t.On&&"undefined"!=typeof document&&null!=document.createElement&&!r.isChromeExtensionContentScript()&&!r.isWindowsStoreApp()&&!c.isNodeSdk()},t.prototype.markConnectionHealthy=function(){},t.prototype.An=function(){this.Sn=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.Tn&&(clearTimeout(this.Tn),this.Tn=null)},t.prototype.wn=function(){this.Sn||(this.de("Longpoll is closing itself"),this.An(),this.z&&(this.z(this.bn),this.z=null))},t.prototype.close=function(){this.Sn||(this.de("Longpoll is being closed."),this.An())},t.prototype.send=function(t){var e=u.stringify(t);this.bytesSent+=e.length,this.$.incrementCounter("bytes_sent",e.length);for(var n=u.base64Encode(e),i=r.splitStringBySize(n,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,n){if(!c.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var r={};r[e.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM]="t",r[e.FIREBASE_LONGPOLL_ID_PARAM]=t,r[e.FIREBASE_LONGPOLL_PW_PARAM]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.In=function(t){var e=u.stringify(t).length;this.bytesReceived+=e,this.$.incrementCounter("bytes_received",e)},t}();e.BrowserPollConnection=h;var l=function(){function t(n,o,s,a){if(this.onDisconnect=s,this.urlFn=a,this.outstandingRequests=new i.CountedSet,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,c.isNodeSdk())this.commandCB=n,this.onMessageCB=o;else{this.uniqueCallbackIdentifier=r.LUIDGenerator(),window[e.FIREBASE_LONGPOLL_COMMAND_CB_NAME+this.uniqueCallbackIdentifier]=n,window[e.FIREBASE_LONGPOLL_DATA_CB_NAME+this.uniqueCallbackIdentifier]=o,this.myIFrame=t.Dn();var u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(u='<script>document.domain="'+document.domain+'";<\/script>');var h="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(t){r.log("frame writing exception"),t.stack&&r.log(t.stack),r.log(t)}}}return t.Dn=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||r.log("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var n=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==n.myIFrame&&(document.body.removeChild(n.myIFrame),n.myIFrame=null)},Math.floor(0))),c.isNodeSdk()&&this.myID){var r={};r[e.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM]="t",r[e.FIREBASE_LONGPOLL_ID_PARAM]=this.myID,r[e.FIREBASE_LONGPOLL_PW_PARAM]=this.myPW;var i=this.urlFn(r);t.nodeRestRequest(i)}var o=this.onDisconnect;o&&(this.onDisconnect=null,o())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.Mn(););},t.prototype.Mn=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[e.FIREBASE_LONGPOLL_ID_PARAM]=this.myID,t[e.FIREBASE_LONGPOLL_PW_PARAM]=this.myPW,t[e.FIREBASE_LONGPOLL_SERIAL_PARAM]=this.currentSerial;for(var n=this.urlFn(t),r="",i=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){var o=this.pendingSegs.shift();r=r+"&"+e.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM+i+"="+o.seg+"&"+e.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET+i+"="+o.ts+"&"+e.FIREBASE_LONGPOLL_DATA_PARAM+i+"="+o.d,i++}return n+=r,this.Ln(n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.Mn()},t.prototype.Ln=function(t,e){var n=this;this.outstandingRequests.add(e,1);var r=function(){n.outstandingRequests.remove(e),n.Mn()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;c.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var i=n.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var t=i.readyState;t&&"loaded"!==t&&"complete"!==t||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=function(){r.log("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(i)}catch(t){}},Math.floor(1))},t}();e.FirebaseIFrameScriptHolder=l},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(0),o=n(1),s=n(25),a=n(14),u=n(0),c=n(13),h=n(0),l=n(0),p=null;"undefined"!=typeof MozWebSocket?p=MozWebSocket:"undefined"!=typeof WebSocket&&(p=WebSocket),e.setWebSocketImpl=function(t){p=t};var f=function(){function e(t,n,r,i){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.de=o.logWrapper(this.connId),this.$=s.StatsManager.getCollection(n),this.connURL=e.Fn(n,r,i)}return e.Fn=function(t,e,n){var r={};return r[a.VERSION_PARAM]=a.PROTOCOL_VERSION,!l.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(a.FORGE_DOMAIN)&&(r[a.REFERER_PARAM]=a.FORGE_REF),e&&(r[a.TRANSPORT_SESSION_PARAM]=e),n&&(r[a.LAST_SESSION_PARAM]=n),t.connectionURL(a.WEBSOCKET,r)},e.prototype.open=function(e,n){var i=this;this.onDisconnect=n,this.onMessage=e,this.de("Websocket connecting to "+this.connURL),this.bn=!1,c.PersistentStorage.set("previous_websocket_failure",!0);try{if(l.isNodeSdk()){var o=u.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",s={headers:{"User-Agent":"Firebase/"+a.PROTOCOL_VERSION+"/"+r.default.SDK_VERSION+"/"+t.platform+"/"+o}},h=t.env,f=0==this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;f&&(s.proxy={origin:f}),this.mySock=new p(this.connURL,[],s)}else this.mySock=new p(this.connURL)}catch(t){this.de("Error instantiating WebSocket.");var d=t.message||t.data;return d&&this.de(d),void this.wn()}this.mySock.onopen=function(){i.de("Websocket connected."),i.bn=!0},this.mySock.onclose=function(){i.de("Websocket connection was disconnected."),i.mySock=null,i.wn()},this.mySock.onmessage=function(t){i.handleIncomingFrame(t)},this.mySock.onerror=function(t){i.de("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&i.de(e),i.wn()}},e.prototype.start=function(){},e.forceDisallow=function(){e.On=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==p&&!e.On},e.previouslyFailed=function(){return c.PersistentStorage.isInMemoryStorage||!0===c.PersistentStorage.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){c.PersistentStorage.remove("previous_websocket_failure")},e.prototype.xn=function(t){if(this.frames.push(t),this.frames.length==this.totalFrames){var e=this.frames.join("");this.frames=null;var n=h.jsonEval(e);this.onMessage(n)}},e.prototype.kn=function(t){this.totalFrames=t,this.frames=[]},e.prototype.Wn=function(t){if(i.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=+t;if(!isNaN(e))return this.kn(e),null}return this.kn(1),t},e.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.$.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.xn(e);else{var n=this.Wn(e);null!==n&&this.xn(n)}}},e.prototype.send=function(t){this.resetKeepAlive();var e=h.stringify(t);this.bytesSent+=e.length,this.$.incrementCounter("bytes_sent",e.length);var n=o.splitStringBySize(e,16384);n.length>1&&this.jn(n.length+"");for(var r=0;r<n.length;r++)this.jn(n[r])},e.prototype.An=function(){this.Sn=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.wn=function(){this.Sn||(this.de("WebSocket is closing itself"),this.An(),this.onDisconnect&&(this.onDisconnect(this.bn),this.onDisconnect=null))},e.prototype.close=function(){this.Sn||(this.de("WebSocket is being closed"),this.An())},e.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.jn("0"),t.resetKeepAlive()},Math.floor(45e3))},e.prototype.jn=function(t){try{this.mySock.send(t)}catch(t){this.de("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.wn.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}();e.WebSocketConnection=f}).call(e,n(27))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}();e.ServerActions=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(24),i=n(3),o=n(5),s=n(4),a=function(){function t(e){this.Vn=new r.IndexedFilter(e.getIndex()),this.me=e.getIndex(),this.Qn=t.qn(e),this.Un=t.Bn(e)}return t.prototype.getStartPost=function(){return this.Qn},t.prototype.getEndPost=function(){return this.Un},t.prototype.matches=function(t){return this.me.compare(this.getStartPost(),t)<=0&&this.me.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,a){return this.matches(new o.NamedNode(e,n))||(n=s.ChildrenNode.EMPTY_NODE),this.Vn.updateChild(t,e,n,r,i,a)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=s.ChildrenNode.EMPTY_NODE);var r=e.withIndex(this.me);r=r.updatePriority(s.ChildrenNode.EMPTY_NODE);var a=this;return e.forEachChild(i.PRIORITY_INDEX,function(t,e){a.matches(new o.NamedNode(t,e))||(r=r.updateImmediateChild(t,s.ChildrenNode.EMPTY_NODE))}),this.Vn.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.Vn},t.prototype.getIndex=function(){return this.me},t.qn=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.Bn=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}();e.RangedFilter=a},,,,,,,,,,,,,,,,,,,,,,function(t,e,n){t.exports=n(79)},function(t,e,n){"use strict";function r(e){var n=e.INTERNAL.registerService("database",function(t,e,n){return c.RepoManager.getInstance().databaseFromApp(t,n)},{Reference:a.Reference,Query:s.Query,Database:o.Database,enableLogging:u.enableLogging,INTERNAL:h,ServerValue:f,TEST_ACCESS:l},null,!0);p.isNodeSdk()&&(t.exports=n)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=n(32);e.Database=o.Database;var s=n(36);e.Query=s.Query;var a=n(21);e.Reference=a.Reference;var u=n(1);e.enableLogging=u.enableLogging;var c=n(26),h=n(111),l=n(112),p=n(0),f=o.Database.ServerValue;e.ServerValue=f,e.registerDatabase=r,r(i.default);var d=n(22);e.DataSnapshot=d.DataSnapshot;var v=n(35);e.OnDisconnect=v.OnDisconnect},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(t){this.Hn=t,this.Gn="firebase:"}return t.prototype.set=function(t,e){null==e?this.Hn.removeItem(this.Kn(t)):this.Hn.setItem(this.Kn(t),r.stringify(e))},t.prototype.get=function(t){var e=this.Hn.getItem(this.Kn(t));return null==e?null:r.jsonEval(e)},t.prototype.remove=function(t){this.Hn.removeItem(this.Kn(t))},t.prototype.Kn=function(t){return this.Gn+t},t.prototype.toString=function(){return""+this.Hn},t}();e.DOMStorageWrapper=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(){this.Yn={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.Yn[t]:this.Yn[t]=e},t.prototype.get=function(t){return r.contains(this.Yn,t)?this.Yn[t]:null},t.prototype.remove=function(t){delete this.Yn[t]},t}();e.MemoryStorage=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return r.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();e.TransactionResult=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);e.nextPushId=function(){var t="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",e=0,n=[];return function(i){var o=i===e;e=i;var s,a=Array(8);for(s=7;s>=0;s--)a[s]=t.charAt(i%64),i=Math.floor(i/64);r.assert(0===i,"Cannot push at time == 0");var u=a.join("");if(o){for(s=11;s>=0&&63===n[s];s--)n[s]=0;n[s]++}else for(s=0;s<12;s++)n[s]=Math.floor(64*Math.random());for(s=0;s<12;s++)u+=t.charAt(n[s]);return r.assert(20===u.length,"nextPushId: Length should be 20."),u}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(22),i=n(85),o=n(0),s=n(0),a=function(){function t(t,e,n){this.Xn=t,this.zn=e,this.Jn=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new i.DataEvent("value",this,new r.DataSnapshot(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.Jn;if("cancel"===t.getEventType()){s.assert(this.zn,"Raising a cancel event on a listener with no cancel callback");var n=this.zn;return function(){n.call(e,t.error)}}var r=this.Xn;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.zn?new i.CancelEvent(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.Xn||!this.Xn||e.Xn===this.Xn&&e.Jn===this.Jn)},t.prototype.hasAnyCallback=function(){return null!==this.Xn},t}();e.ValueEventRegistration=a;var u=function(){function t(t,e,n){this.$n=t,this.zn=e,this.Jn=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,o.contains(this.$n,e)},t.prototype.createCancelEvent=function(t,e){return this.zn?new i.CancelEvent(this,t,e):null},t.prototype.createEvent=function(t,e){s.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),o=e.getQueryParams().getIndex();return new i.DataEvent(t.type,this,new r.DataSnapshot(t.snapshotNode,n,o),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.Jn;if("cancel"===t.getEventType()){s.assert(this.zn,"Raising a cancel event on a listener with no cancel callback");var n=this.zn;return function(){n.call(e,t.error)}}var r=this.$n[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){if(e instanceof t){if(!this.$n||!e.$n)return!0;if(this.Jn===e.Jn){var n=o.getCount(e.$n);if(n===o.getCount(this.$n)){if(1===n){var r=o.getAnyKey(e.$n),i=o.getAnyKey(this.$n);return!(i!==r||e.$n[r]&&this.$n[i]&&e.$n[r]!==this.$n[i])}return o.every(this.$n,function(t,n){return e.$n[t]===n})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.$n},t}();e.ChildEventRegistration=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath()+":"+this.eventType+":"+r.stringify(this.snapshot.exportVal())},t}();e.DataEvent=i;var o=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path+":cancel"},t}();e.CancelEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(1),o=n(87),s=n(4),a=n(0),u=n(23),c=n(88),h=n(89),l=n(8),p=n(46),f=n(2),d=n(47),v=n(95),y=function(){function t(t){this.Zn=t,this.er=u.ImmutableTree.Empty,this.tr=new v.WriteTree,this.nr={},this.rr={}}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.tr.addOverwrite(t,e,n,r),r?this.ir(new p.Overwrite(l.OperationSource.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.tr.addMerge(t,e,n);var r=u.ImmutableTree.fromObject(e);return this.ir(new h.Merge(l.OperationSource.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.tr.getWrite(t);if(this.tr.removeWrite(t)){var r=u.ImmutableTree.Empty;return null!=n.snap?r=r.set(f.Path.Empty,!0):a.forEach(n.children,function(t,e){r=r.set(new f.Path(t),e)}),this.ir(new o.AckUserWrite(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.ir(new p.Overwrite(l.OperationSource.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=u.ImmutableTree.fromObject(e);return this.ir(new h.Merge(l.OperationSource.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.ir(new c.ListenComplete(l.OperationSource.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.or(r);if(null!=i){var o=t.ar(i),s=o.path,a=o.queryId,u=f.Path.relativePath(s,e),c=new p.Overwrite(l.OperationSource.forServerTaggedQuery(a),u,n);return this.sr(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.or(r);if(i){var o=t.ar(i),s=o.path,a=o.queryId,c=f.Path.relativePath(s,e),p=u.ImmutableTree.fromObject(n),d=new h.Merge(l.OperationSource.forServerTaggedQuery(a),c,p);return this.sr(s,d)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.or(n);if(r){var i=t.ar(r),o=i.path,s=i.queryId,a=f.Path.relativePath(o,e),u=new c.ListenComplete(l.OperationSource.forServerTaggedQuery(s),a);return this.sr(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var i=e.path,o=null,a=!1;this.er.foreachOnPath(i,function(t,e){var n=f.Path.relativePath(t,i);o=o||e.getCompleteServerCache(n),a=a||e.hasCompleteView()});var u=this.er.get(i);u?(a=a||u.hasCompleteView(),o=o||u.getCompleteServerCache(f.Path.Empty)):(u=new d.SyncPoint,this.er=this.er.set(i,u));var c;null!=o?c=!0:(c=!1,o=s.ChildrenNode.EMPTY_NODE,this.er.subtree(i).foreachChild(function(t,e){var n=e.getCompleteServerCache(f.Path.Empty);n&&(o=o.updateImmediateChild(t,n))}));var h=u.viewExistsForQuery(e);if(!h&&!e.getQueryParams().loadsAllData()){var l=t.ur(e);r.assert(!(l in this.rr),"View does not exist, but we have a tag");var p=t.lr();this.rr[l]=p,this.nr["_"+p]=l}var v=this.tr.childWrites(i),y=u.addEventRegistration(e,n,v,o,c);if(!h&&!a){var g=u.viewForQuery(e);y=y.concat(this.hr(e,g))}return y},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.er.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.er=this.er.remove(o));var c=u.removed;a=u.events;var h=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),l=this.er.findOnPath(o,function(t,e){return e.hasCompleteView()});if(h&&!l){var p=this.er.subtree(o);if(!p.isEmpty())for(var f=this.cr(p),d=0;d<f.length;++d){var v=f[d],y=v.getQuery(),g=this.pr(v);this.Zn.startListening(t.dr(y),this.fr(y),g.hashFn,g.onComplete)}}!l&&c.length>0&&!r&&(h?this.Zn.stopListening(t.dr(e),null):c.forEach(function(e){var n=i.rr[t.ur(e)];i.Zn.stopListening(t.dr(e),n)})),this._r(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.tr,r=this.er.findOnPath(t,function(e,n){var r=f.Path.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.cr=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),a.forEach(n,function(t,e){r=r.concat(e)}),r})},t.prototype._r=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.ur(r),o=this.rr[i];delete this.rr[i],delete this.nr["_"+o]}}},t.dr=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.hr=function(e,n){var i=e.path,o=this.fr(e),s=this.pr(n),u=this.Zn.startListening(t.dr(e),o,s.hashFn,s.onComplete),c=this.er.subtree(i);if(o)r.assert(!c.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var h=c.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),a.forEach(n,function(t,e){r=r.concat(e)}),r}),l=0;l<h.length;++l){var p=h[l];this.Zn.stopListening(t.dr(p),this.fr(p))}return u},t.prototype.pr=function(t){var e=this,n=t.getQuery(),r=this.fr(n);return{hashFn:function(){return(t.getServerCache()||s.ChildrenNode.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var o=i.errorForServerCode(t,n);return e.removeEventRegistration(n,null,o)}}},t.ur=function(t){return t.path+"$"+t.queryIdentifier()},t.ar=function(t){var e=t.indexOf("$");return r.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new f.Path(t.substr(0,e))}},t.prototype.or=function(t){return this.nr["_"+t]},t.prototype.fr=function(e){var n=t.ur(e);return a.safeGet(this.rr,n)},t.lr=function(){return t.yr++},t.prototype.sr=function(t,e){var n=this.er.get(t);r.assert(n,"Missing sync point for query tag that we're tracking");var i=this.tr.childWrites(t);return n.applyOperation(e,i,null)},t.prototype.ir=function(t){return this.vr(t,this.er,null,this.tr.childWrites(f.Path.Empty))},t.prototype.vr=function(t,e,n,r){if(t.path.isEmpty())return this.gr(t,e,n,r);var i=e.get(f.Path.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(f.Path.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,h=r.child(s);o=o.concat(this.vr(a,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.gr=function(t,e,n,r){var i=this,o=e.get(f.Path.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(f.Path.Empty));var s=[];return e.children.inorderTraversal(function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.gr(c,o,a,u)))}),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.yr=1,t}();e.SyncTree=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(8),s=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=o.OperationType.ACK_USER_WRITE,this.source=o.OperationSource.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return r.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new i.Path(e));return new t(i.Path.Empty,n,this.revert)}return r.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}();e.AckUserWrite=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(8),o=function(){function t(t,e){this.source=t,this.path=e,this.type=i.OperationType.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,r.Path.Empty):new t(this.source,this.path.popFront())},t}();e.ListenComplete=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(46),o=n(2),s=n(0),a=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=r.OperationType.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new o.Path(e));return n.isEmpty()?null:n.value?new i.Overwrite(this.source,o.Path.Empty,n.value):new t(this.source,o.Path.Empty,n)}return s.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source+" merge: "+this.children+")"},t}();e.Merge=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(24),i=n(91),o=n(4),s=n(19),a=n(48),u=n(94),c=n(0),h=n(8),l=n(9),p=n(3),f=function(){function t(t,e){this.mr=t,this.Cr=[];var n=this.mr.getQueryParams(),c=new r.IndexedFilter(n.getIndex()),h=n.getNodeFilter();this.Er=new i.ViewProcessor(h);var l=e.getServerCache(),p=e.getEventCache(),f=c.updateFullNode(o.ChildrenNode.EMPTY_NODE,l.getNode(),null),d=h.updateFullNode(o.ChildrenNode.EMPTY_NODE,p.getNode(),null),v=new s.CacheNode(f,l.isFullyInitialized(),c.filtersNodes()),y=new s.CacheNode(d,p.isFullyInitialized(),h.filtersNodes());this.Nr=new a.ViewCache(y,v),this.Pr=new u.EventGenerator(this.mr)}return t.prototype.getQuery=function(){return this.mr},t.prototype.getServerCache=function(){return this.Nr.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.Nr.getCompleteServerSnap();return e&&(this.mr.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.Cr.length},t.prototype.addEventRegistration=function(t){this.Cr.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){c.assert(null==t,"A cancel should cancel all event registrations.");var r=this.mr.path;this.Cr.forEach(function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)})}if(t){for(var i=[],o=0;o<this.Cr.length;++o){var s=this.Cr[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.Cr.slice(o+1));break}}else i.push(s)}this.Cr=i}else this.Cr=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===h.OperationType.MERGE&&null!==t.source.queryId&&(c.assert(this.Nr.getCompleteServerSnap(),"We should always have a full cache before handling merges"),c.assert(this.Nr.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.Nr,i=this.Er.applyOperation(r,t,e,n);return this.Er.assertIndexed(i.viewCache),c.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.Nr=i.viewCache,this.br(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.Nr.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(p.PRIORITY_INDEX,function(t,e){n.push(l.Change.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(l.Change.valueChange(e.getNode())),this.br(n,e.getNode(),t)},t.prototype.br=function(t,e,n){var r=n?[n]:this.Cr;return this.Pr.generateEventsForChanges(t,e,r)},t}();e.View=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(0),o=n(92),s=n(9),a=n(4),u=n(10),c=n(23),h=n(2),l=n(93),p=function(){return function(t,e){this.viewCache=t,this.changes=e}}();e.ProcessorResult=p;var f=function(){function t(t){this.Sr=t}return t.prototype.assertIndexed=function(t){i.assert(t.getEventCache().getNode().isIndexed(this.Sr.getIndex()),"Event snap not indexed"),i.assert(t.getServerCache().getNode().isIndexed(this.Sr.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,s,a){var u,c,h=new o.ChildChangeAccumulator;if(n.type===r.OperationType.OVERWRITE){var l=n;l.source.fromUser?u=this.Tr(e,l.path,l.snap,s,a,h):(i.assert(l.source.fromServer,"Unknown source."),c=l.source.tagged||e.getServerCache().isFiltered()&&!l.path.isEmpty(),u=this.wr(e,l.path,l.snap,s,a,c,h))}else if(n.type===r.OperationType.MERGE){var f=n;f.source.fromUser?u=this.Ir(e,f.path,f.children,s,a,h):(i.assert(f.source.fromServer,"Unknown source."),c=f.source.tagged||e.getServerCache().isFiltered(),u=this.Rr(e,f.path,f.children,s,a,c,h))}else if(n.type===r.OperationType.ACK_USER_WRITE){var d=n;u=d.revert?this.Or(e,d.path,s,a,h):this.Ar(e,d.path,d.affectedTree,s,a,h)}else{if(n.type!==r.OperationType.LISTEN_COMPLETE)throw i.assertionError("Unknown operation type: "+n.type);u=this.Dr(e,n.path,s,h)}var v=h.getChanges();return t.Mr(e,u,v),new p(u,v)},t.Mr=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(s.Change.valueChange(e.getCompleteEventSnap()))}},t.prototype.Lr=function(t,e,n,r,o){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var u=void 0,c=void 0;if(e.isEmpty())if(i.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var h=t.getCompleteServerSnap(),l=h instanceof a.ChildrenNode?h:a.ChildrenNode.EMPTY_NODE,p=n.calcCompleteEventChildren(l);u=this.Sr.updateFullNode(t.getEventCache().getNode(),p,o)}else{var f=n.calcCompleteEventCache(t.getCompleteServerSnap());u=this.Sr.updateFullNode(t.getEventCache().getNode(),f,o)}else{var d=e.getFront();if(".priority"==d){i.assert(1==e.getLength(),"Can't have a priority with additional path components");var v=s.getNode();c=t.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(e,v,c);u=null!=y?this.Sr.updatePriority(v,y):s.getNode()}else{var g=e.popFront(),m=void 0;if(s.isCompleteForChild(d)){c=t.getServerCache().getNode();var E=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),c);m=null!=E?s.getNode().getImmediateChild(d).updateChild(g,E):s.getNode().getImmediateChild(d)}else m=n.calcCompleteChild(d,t.getServerCache());u=null!=m?this.Sr.updateChild(s.getNode(),d,m,g,r,o):s.getNode()}}return t.updateEventSnap(u,s.isFullyInitialized()||e.isEmpty(),this.Sr.filtersNodes())},t.prototype.wr=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.Sr:this.Sr.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),h,null)}else{var p=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),d=u.getNode().getImmediateChild(p).updateChild(f,n);a=".priority"==p?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),p,d,f,l.NO_COMPLETE_CHILD_SOURCE,null)}var v=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),y=new l.WriteTreeCompleteChildSource(r,v,i);return this.Lr(v,e,r,y,s)},t.prototype.Tr=function(t,e,n,r,i,o){var s,u,c=t.getEventCache(),h=new l.WriteTreeCompleteChildSource(r,t,i);if(e.isEmpty())u=this.Sr.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(u,!0,this.Sr.filtersNodes());else{var p=e.getFront();if(".priority"===p)u=this.Sr.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(u,c.isFullyInitialized(),c.isFiltered());else{var f=e.popFront(),d=c.getNode().getImmediateChild(p),v=void 0;if(f.isEmpty())v=n;else{var y=h.getCompleteChild(p);v=null!=y?".priority"===f.getBack()&&y.getChild(f.parent()).isEmpty()?y:y.updateChild(f,n):a.ChildrenNode.EMPTY_NODE}if(d.equals(v))s=t;else{var g=this.Sr.updateChild(c.getNode(),p,v,f,h,o);s=t.updateEventSnap(g,c.isFullyInitialized(),this.Sr.filtersNodes())}}}return s},t.Fr=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.Ir=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach(function(r,c){var h=n.child(r);t.Fr(e,h.getFront())&&(u=a.Tr(u,h,c,i,o,s))}),r.foreach(function(r,c){var h=n.child(r);t.Fr(e,h.getFront())||(u=a.Tr(u,h,c,i,o,s))}),u},t.prototype.xr=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.Rr=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,l=t;u=e.isEmpty()?n:c.ImmutableTree.Empty.setTree(e,n);var p=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(p.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),c=a.xr(u,n);l=a.wr(l,new h.Path(e),c,r,i,o,s)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!p.hasChild(e)&&!u){var c=t.getServerCache().getNode().getImmediateChild(e),f=a.xr(c,n);l=a.wr(l,new h.Path(e),f,r,i,o,s)}}),l},t.prototype.Ar=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.wr(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var l=c.ImmutableTree.Empty;return a.getNode().forEachChild(u.KEY_INDEX,function(t,e){l=l.set(new h.Path(t),e)}),this.Rr(t,e,l,r,i,s,o)}return t}var p=c.ImmutableTree.Empty;return n.foreach(function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(p=p.set(t,a.getNode().getChild(r)))}),this.Rr(t,e,p,r,i,s,o)},t.prototype.Dr=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.Lr(o,e,n,l.NO_COMPLETE_CHILD_SOURCE,r)},t.prototype.Or=function(t,e,n,r,o){var s;if(null!=n.shadowingWrite(e))return t;var u=new l.WriteTreeCompleteChildSource(n,t,r),c=t.getEventCache().getNode(),p=void 0;if(e.isEmpty()||".priority"===e.getFront()){var f=void 0;if(t.getServerCache().isFullyInitialized())f=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var d=t.getServerCache().getNode();i.assert(d instanceof a.ChildrenNode,"serverChildren would be complete if leaf node"),f=n.calcCompleteEventChildren(d)}f=f,p=this.Sr.updateFullNode(c,f,o)}else{var v=e.getFront(),y=n.calcCompleteChild(v,t.getServerCache());null==y&&t.getServerCache().isCompleteForChild(v)&&(y=c.getImmediateChild(v)),(p=null!=y?this.Sr.updateChild(c,v,y,e.popFront(),u,o):t.getEventCache().getNode().hasChild(v)?this.Sr.updateChild(c,v,a.ChildrenNode.EMPTY_NODE,e.popFront(),u,o):c).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(p=this.Sr.updateFullNode(p,s,o))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(h.Path.Empty),t.updateEventSnap(p,s,this.Sr.filtersNodes())},t}();e.ViewProcessor=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(9),o=n(0),s=function(){function t(){this.kr={}}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;o.assert(e==i.Change.CHILD_ADDED||e==i.Change.CHILD_CHANGED||e==i.Change.CHILD_REMOVED,"Only child changes supported for tracking"),o.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var s=r.safeGet(this.kr,n);if(s){var a=s.type;if(e==i.Change.CHILD_ADDED&&a==i.Change.CHILD_REMOVED)this.kr[n]=i.Change.childChangedChange(n,t.snapshotNode,s.snapshotNode);else if(e==i.Change.CHILD_REMOVED&&a==i.Change.CHILD_ADDED)delete this.kr[n];else if(e==i.Change.CHILD_REMOVED&&a==i.Change.CHILD_CHANGED)this.kr[n]=i.Change.childRemovedChange(n,s.oldSnap);else if(e==i.Change.CHILD_CHANGED&&a==i.Change.CHILD_ADDED)this.kr[n]=i.Change.childAddedChange(n,t.snapshotNode);else{if(e!=i.Change.CHILD_CHANGED||a!=i.Change.CHILD_CHANGED)throw o.assertionError("Illegal combination of changes: "+t+" occurred after "+s);this.kr[n]=i.Change.childChangedChange(n,t.snapshotNode,s.oldSnap)}}else this.kr[n]=t},t.prototype.getChanges=function(){return r.getValues(this.kr)},t}();e.ChildChangeAccumulator=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(19),i=function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}();e.Wr=i,e.NO_COMPLETE_CHILD_SOURCE=new i;var o=function(){function t(t,e,n){void 0===n&&(n=null),this.jr=t,this.Nr=e,this.Vr=n}return t.prototype.getCompleteChild=function(t){var e=this.Nr.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.Vr?new r.CacheNode(this.Vr,!0,!1):this.Nr.getServerCache();return this.jr.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.Vr?this.Vr:this.Nr.getCompleteServerSnap(),i=this.jr.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}();e.WriteTreeCompleteChildSource=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(9),o=n(0),s=function(){function t(t){this.mr=t,this.me=this.mr.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,o=[],s=[];return t.forEach(function(t){t.type===i.Change.CHILD_CHANGED&&r.me.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push(i.Change.childMovedChange(t.childName,t.snapshotNode))}),this.Qr(o,i.Change.CHILD_REMOVED,t,n,e),this.Qr(o,i.Change.CHILD_ADDED,t,n,e),this.Qr(o,i.Change.CHILD_MOVED,s,n,e),this.Qr(o,i.Change.CHILD_CHANGED,t,n,e),this.Qr(o,i.Change.VALUE,t,n,e),o},t.prototype.Qr=function(t,e,n,r,i){var o=this,s=n.filter(function(t){return t.type===e});s.sort(this.qr.bind(this)),s.forEach(function(e){var n=o.Ur(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.mr))})})},t.prototype.Ur=function(t,e){return"value"===t.type||"child_removed"===t.type?t:(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.me),t)},t.prototype.qr=function(t,e){if(null==t.childName||null==e.childName)throw o.assertionError("Should only compare child_ events.");var n=new r.NamedNode(t.childName,t.snapshotNode),i=new r.NamedNode(e.childName,e.snapshotNode);return this.me.compare(n,i)},t}();e.EventGenerator=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(0),o=n(2),s=n(96),a=n(3),u=n(4),c=function(){function t(){this.Br=s.CompoundWrite.Empty,this.Hr=[],this.Gr=-1}return t.prototype.childWrites=function(t){return new h(t,this)},t.prototype.addOverwrite=function(t,e,n,r){i.assert(n>this.Gr,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.Hr.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.Br=this.Br.addWrite(t,e)),this.Gr=n},t.prototype.addMerge=function(t,e,n){i.assert(n>this.Gr,"Stacking an older merge on top of newer ones"),this.Hr.push({path:t,children:e,writeId:n,visible:!0}),this.Br=this.Br.addWrites(t,e),this.Gr=n},t.prototype.getWrite=function(t){for(var e=0;e<this.Hr.length;e++){var n=this.Hr[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.Hr.findIndex(function(e){return e.writeId===t});i.assert(n>=0,"removeWrite called with nonexistent writeId.");var o=this.Hr[n];this.Hr.splice(n,1);for(var s=o.visible,a=!1,u=this.Hr.length-1;s&&u>=0;){var c=this.Hr[u];c.visible&&(u>=n&&this.Kr(c,o.path)?s=!1:o.path.contains(c.path)&&(a=!0)),u--}if(s){if(a)return this.Yr(),!0;if(o.snap)this.Br=this.Br.removeWrite(o.path);else{var h=o.children;r.forEach(h,function(t){e.Br=e.Br.removeWrite(o.path.child(t))})}return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.Br.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var s=this.Br.childCompoundWrite(e);if(!i&&s.isEmpty())return n;if(i||null!=n||s.hasCompleteWrite(o.Path.Empty)){var a=t.Xr(this.Hr,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e),c=n||u.ChildrenNode.EMPTY_NODE;return a.apply(c)}return null}var h=this.Br.getCompleteNode(e);if(null!=h)return h;var l=this.Br.childCompoundWrite(e);if(l.isEmpty())return n;if(null!=n||l.hasCompleteWrite(o.Path.Empty)){c=n||u.ChildrenNode.EMPTY_NODE;return l.apply(c)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=u.ChildrenNode.EMPTY_NODE,r=this.Br.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(a.PRIORITY_INDEX,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.Br.childCompoundWrite(t);return e.forEachChild(a.PRIORITY_INDEX,function(t,e){var r=i.childCompoundWrite(new o.Path(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.Br.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){i.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var o=t.child(e);if(this.Br.hasCompleteWrite(o))return null;var s=this.Br.childCompoundWrite(o);return s.isEmpty()?r.getChild(e):s.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.Br.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.Br.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.Br.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,s){var a,u=this.Br.childCompoundWrite(t),c=u.getCompleteNode(o.Path.Empty);if(null!=c)a=c;else{if(null==e)return[];a=u.apply(e)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var h=[],l=s.getCompare(),p=i?a.getReverseIteratorFrom(n,s):a.getIteratorFrom(n,s),f=p.getNext();f&&h.length<r;)0!==l(f,n)&&h.push(f),f=p.getNext();return h},t.prototype.Kr=function(t,e){return t.snap?t.path.contains(e):!!r.findKey(t.children,function(n,r){return t.path.child(r).contains(e)})},t.prototype.Yr=function(){this.Br=t.Xr(this.Hr,t.zr,o.Path.Empty),this.Hr.length>0?this.Gr=this.Hr[this.Hr.length-1].writeId:this.Gr=-1},t.zr=function(t){return t.visible},t.Xr=function(t,e,n){for(var a=s.CompoundWrite.Empty,u=0;u<t.length;++u){var c=t[u];if(e(c)){var h=c.path,l=void 0;if(c.snap)n.contains(h)?(l=o.Path.relativePath(n,h),a=a.addWrite(l,c.snap)):h.contains(n)&&(l=o.Path.relativePath(h,n),a=a.addWrite(o.Path.Empty,c.snap.getChild(l)));else{if(!c.children)throw i.assertionError("WriteRecord should have .snap or .children");if(n.contains(h))l=o.Path.relativePath(n,h),a=a.addWrites(l,c.children);else if(h.contains(n))if((l=o.Path.relativePath(h,n)).isEmpty())a=a.addWrites(o.Path.Empty,c.children);else{var p=r.safeGet(c.children,l.getFront());if(p){var f=p.getChild(l.popFront());a=a.addWrite(o.Path.Empty,f)}}}}}return a},t}();e.WriteTree=c;var h=function(){function t(t,e){this.Jr=t,this.$r=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.$r.calcCompleteEventCache(this.Jr,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.$r.calcCompleteEventChildren(this.Jr,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.$r.calcEventCacheAfterServerOverwrite(this.Jr,t,e,n)},t.prototype.shadowingWrite=function(t){return this.$r.shadowingWrite(this.Jr.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.$r.calcIndexedSlice(this.Jr,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.$r.calcCompleteChild(this.Jr,t,e)},t.prototype.child=function(e){return new t(this.Jr.child(e),this.$r)},t}();e.WriteTreeRef=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(23),i=n(2),o=n(0),s=n(5),a=n(3),u=n(0),c=function(){function t(t){this.$r=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new r.ImmutableTree(n));var o=this.$r.findRootMostValueAndPath(e);if(null!=o){var s=o.path,a=o.value,u=i.Path.relativePath(s,e);return a=a.updateChild(u,n),new t(this.$r.set(s,a))}var c=new r.ImmutableTree(n);return new t(this.$r.setTree(e,c))},t.prototype.addWrites=function(t,e){var n=this;return o.forEach(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.$r.setTree(e,r.ImmutableTree.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.$r.findRootMostValueAndPath(t);return null!=e?this.$r.get(e.path).getChild(i.Path.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.$r.value;return null!=e?e.isLeafNode()||e.forEachChild(a.PRIORITY_INDEX,function(e,n){t.push(new s.NamedNode(e,n))}):this.$r.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new s.NamedNode(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new r.ImmutableTree(n):this.$r.subtree(e))},t.prototype.isEmpty=function(){return this.$r.isEmpty()},t.prototype.apply=function(e){return t.Zr(i.Path.Empty,this.$r,e)},t.Empty=new t(new r.ImmutableTree(null)),t.Zr=function(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal(function(n,o){".priority"===n?(u.assert(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t.Zr(e.child(n),o,r)}),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r},t}();e.CompoundWrite=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=function(){function t(){this.ei=r.ChildrenNode.EMPTY_NODE}return t.prototype.getNode=function(t){return this.ei.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.ei=this.ei.updateChild(t,e)},t}();e.SnapshotHolder=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(){function t(t){this.ti=t}return t.prototype.getToken=function(t){return this.ti.INTERNAL.getToken(t).then(null,function(t){return t&&"auth/token-not-initialized"===t.code?(r.log("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(t){this.ti.INTERNAL.addAuthTokenListener(t)},t.prototype.removeTokenChangeListener=function(t){this.ti.INTERNAL.removeAuthTokenListener(t)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.ti.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.ti.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.ti.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',r.warn(t)},t}();e.AuthTokenProvider=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(0),o=function(){function t(){this.ni={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),i.contains(this.ni,t)||(this.ni[t]=0),this.ni[t]+=e},t.prototype.get=function(){return r.deepCopy(this.ni)},t}();e.StatsCollection=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(1),o=n(49),s=1e4,a=3e4,u=function(){function t(t,e){this.Z=e,this.ri={},this.G=new o.StatsListener(t);var n=s+(a-s)*Math.random();i.setTimeoutNonBlocking(this.ii.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.ri[t]=!0},t.prototype.ii=function(){var t=this,e=this.G.get(),n={},o=!1;r.forEach(e,function(e,i){i>0&&r.contains(t.ri,e)&&(n[e]=i,o=!0)}),o&&this.Z.reportStats(n),i.setTimeoutNonBlocking(this.ii.bind(this),Math.floor(2*Math.random()*3e5))},t}();e.StatsReporter=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(){function t(){this.oi=[],this.ai=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.oi.push(e),e=null),null===e&&(e=new o(i)),e.add(r)}e&&this.oi.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.si(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.si(function(e){return e.contains(t)||t.contains(e)})},t.prototype.si=function(t){this.ai++;for(var e=!0,n=0;n<this.oi.length;n++){var r=this.oi[n];r&&(t(r.getPath())?(this.oi[n].raise(),this.oi[n]=null):e=!1)}e&&(this.oi=[]),this.ai--},t}();e.EventQueue=i;var o=function(){function t(t){this.Oe=t,this.ui=[]}return t.prototype.add=function(t){this.ui.push(t)},t.prototype.raise=function(){for(var t=0;t<this.ui.length;t++){var e=this.ui[t];if(null!==e){this.ui[t]=null;var n=e.getEventRunner();r.logger&&r.log("event: "+e),r.exceptionGuard(n)}}},t.prototype.getPath=function(){return this.Oe},t}();e.EventList=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(51),o=n(0),s=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.at=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.at&&(r.at=t,r.trigger("visible",t))},!1),r}return r(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return o.assert("visible"===t,"Unknown event type: "+t),[this.at]},e}(i.EventEmitter);e.VisibilityMonitor=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(51),s=n(0),a=function(t){function e(){var e=t.call(this,["online"])||this;return e.li=!0,"undefined"==typeof window||void 0===window.addEventListener||s.isMobileCordova()||(window.addEventListener("online",function(){e.li||(e.li=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.li&&(e.li=!1,e.trigger("online",!1))},!1)),e}return r(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return i.assert("online"===t,"Unknown event type: "+t),[this.li]},e.prototype.currentlyOnline=function(){return this.li},e}(o.EventEmitter);e.OnlineMonitor=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(53),i=n(54),o=n(1),s=function(){function t(t){this.hi(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[r.BrowserPollConnection,i.WebSocketConnection]},enumerable:!0,configurable:!0}),t.prototype.hi=function(e){var n=i.WebSocketConnection&&i.WebSocketConnection.isAvailable(),r=n&&!i.WebSocketConnection.previouslyFailed();if(e.webSocketOnly&&(n||o.warn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.ci=[i.WebSocketConnection];else{var s=this.ci=[];o.each(t.ALL_TRANSPORTS,function(t,e){e&&e.isAvailable()&&s.push(e)})}},t.prototype.initialTransport=function(){if(this.ci.length>0)return this.ci[0];throw Error("No transports available")},t.prototype.upgradeTransport=function(){return this.ci.length>1?this.ci[1]:null},t}();e.TransportManager=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(){function t(t){this.Ut=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=0;e<t.length;++e)!function(e){t[e]&&r.exceptionGuard(function(){n.Ut(t[e])})}(e);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++}(););},t}();e.PacketReceiver=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(1),s=n(0),a=n(0),u=n(0),c=function(t){function e(e,n,r){var i=t.call(this)||this;return i.H=e,i.ee=n,i.Ke=r,i.de=o.logWrapper("p:rest:"),i.Je={},i}return r(e,t),e.prototype.reportStats=function(t){throw Error("Method not implemented.")},e.pi=function(t,e){return void 0!==e?"tag$"+e:(i.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),""+t.path)},e.prototype.listen=function(t,n,r,i){var o=this,s=""+t.path;this.de("Listen called for "+s+" "+t.queryIdentifier());var u=e.pi(t,r),c={};this.Je[u]=c;var h=t.getQueryParams().toRestQueryStringParameters();this.di(s+".json",h,function(t,e){var n=e;if(404===t&&(n=null,t=null),null===t&&o.ee(s,n,!1,r),a.safeGet(o.Je,u)===c){i(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)}})},e.prototype.unlisten=function(t,n){var r=e.pi(t,n);delete this.Je[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.di=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.Ke.getToken(!1).then(function(i){var a=i&&i.accessToken;a&&(e.auth=a);var c=(r.H.secure?"https://":"http://")+r.H.host+t+"?"+u.querystring(e);r.de("Sending REST request for "+c);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.de("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=s.jsonEval(h.responseText)}catch(t){o.warn("Failed to parse JSON response for "+c+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&o.warn("Got unsuccessful REST response for "+c+" Status: "+h.status),n(h.status);n=null}},h.open("GET",c,!0),h.send()})},e}(n(55).ServerActions);e.ReadonlyRestClient=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(1),o=n(10),s=n(3),a=n(38),u=n(42),c=n(24),h=n(108),l=n(56),p=n(0),f=function(){function t(){this.fi=!1,this._i=!1,this.yi=!1,this.vi=!1,this.gi=!1,this.mi=0,this.Ci="",this.Ei=null,this.Ni="",this.Pi=null,this.bi="",this.me=s.PRIORITY_INDEX}return t.prototype.hasStart=function(){return this._i},t.prototype.isViewFromLeft=function(){return""===this.Ci?this._i:this.Ci===t.Si.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return r.assert(this._i,"Only valid if start has been set"),this.Ei},t.prototype.getIndexStartName=function(){return r.assert(this._i,"Only valid if start has been set"),this.yi?this.Ni:i.MIN_NAME},t.prototype.hasEnd=function(){return this.vi},t.prototype.getIndexEndValue=function(){return r.assert(this.vi,"Only valid if end has been set"),this.Pi},t.prototype.getIndexEndName=function(){return r.assert(this.vi,"Only valid if end has been set"),this.gi?this.bi:i.MAX_NAME},t.prototype.hasLimit=function(){return this.fi},t.prototype.hasAnchoredLimit=function(){return this.fi&&""!==this.Ci},t.prototype.getLimit=function(){return r.assert(this.fi,"Only valid if limit has been set"),this.mi},t.prototype.getIndex=function(){return this.me},t.prototype.Ti=function(){var e=new t;return e.fi=this.fi,e.mi=this.mi,e._i=this._i,e.Ei=this.Ei,e.yi=this.yi,e.Ni=this.Ni,e.vi=this.vi,e.Pi=this.Pi,e.gi=this.gi,e.bi=this.bi,e.me=this.me,e.Ci=this.Ci,e},t.prototype.limit=function(t){var e=this.Ti();return e.fi=!0,e.mi=t,e.Ci="",e},t.prototype.limitToFirst=function(e){var n=this.Ti();return n.fi=!0,n.mi=e,n.Ci=t.Si.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.Ti();return n.fi=!0,n.mi=e,n.Ci=t.Si.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.Ti();return n._i=!0,void 0===t&&(t=null),n.Ei=t,null!=e?(n.yi=!0,n.Ni=e):(n.yi=!1,n.Ni=""),n},t.prototype.endAt=function(t,e){var n=this.Ti();return n.vi=!0,void 0===t&&(t=null),n.Pi=t,void 0!==e?(n.gi=!0,n.bi=e):(n.gi=!1,n.bi=""),n},t.prototype.orderBy=function(t){var e=this.Ti();return e.me=t,e},t.prototype.getQueryObject=function(){var e=t.Si,n={};if(this._i&&(n[e.INDEX_START_VALUE]=this.Ei,this.yi&&(n[e.INDEX_START_NAME]=this.Ni)),this.vi&&(n[e.INDEX_END_VALUE]=this.Pi,this.gi&&(n[e.INDEX_END_NAME]=this.bi)),this.fi){n[e.LIMIT]=this.mi;var r=this.Ci;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.me!==s.PRIORITY_INDEX&&(n[e.INDEX]=""+this.me),n},t.prototype.loadsAllData=function(){return!(this._i||this.vi||this.fi)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.me==s.PRIORITY_INDEX},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new c.IndexedFilter(this.getIndex()):this.hasLimit()?new h.LimitedFilter(this):new l.RangedFilter(this)},t.prototype.toRestQueryStringParameters=function(){var e=t.wi,n={};if(this.isDefault())return n;var i;return this.me===s.PRIORITY_INDEX?i=e.PRIORITY_INDEX:this.me===a.VALUE_INDEX?i=e.VALUE_INDEX:this.me===o.KEY_INDEX?i=e.KEY_INDEX:(r.assert(this.me instanceof u.PathIndex,"Unrecognized index type!"),i=""+this.me),n[e.ORDER_BY]=p.stringify(i),this._i&&(n[e.START_AT]=p.stringify(this.Ei),this.yi&&(n[e.START_AT]+=","+p.stringify(this.Ni))),this.vi&&(n[e.END_AT]=p.stringify(this.Pi),this.gi&&(n[e.END_AT]+=","+p.stringify(this.bi))),this.fi&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.mi:n[e.LIMIT_TO_LAST]=this.mi),n},t.Si={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.wi={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}();e.QueryParams=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(56),i=n(4),o=n(5),s=n(0),a=n(9),u=function(){function t(t){this.Ii=new r.RangedFilter(t),this.me=t.getIndex(),this.mi=t.getLimit(),this.Ri=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,s,a){return this.Ii.matches(new o.NamedNode(e,n))||(n=i.ChildrenNode.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.mi?this.Ii.getIndexedFilter().updateChild(t,e,n,r,s,a):this.Oi(t,e,n,s,a)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=i.ChildrenNode.EMPTY_NODE.withIndex(this.me);else if(2*this.mi<e.numChildren()&&e.isIndexed(this.me)){r=i.ChildrenNode.EMPTY_NODE.withIndex(this.me);u=void 0;u=this.Ri?e.getReverseIteratorFrom(this.Ii.getEndPost(),this.me):e.getIteratorFrom(this.Ii.getStartPost(),this.me);for(h=0;u.hasNext()&&h<this.mi;){p=u.getNext();if(!(this.Ri?this.me.compare(this.Ii.getStartPost(),p)<=0:this.me.compare(p,this.Ii.getEndPost())<=0))break;r=r.updateImmediateChild(p.name,p.node),h++}}else{r=(r=e.withIndex(this.me)).updatePriority(i.ChildrenNode.EMPTY_NODE);var o=void 0,s=void 0,a=void 0,u=void 0;if(this.Ri){u=r.getReverseIterator(this.me),o=this.Ii.getEndPost(),s=this.Ii.getStartPost();var c=this.me.getCompare();a=function(t,e){return c(e,t)}}else u=r.getIterator(this.me),o=this.Ii.getStartPost(),s=this.Ii.getEndPost(),a=this.me.getCompare();for(var h=0,l=!1;u.hasNext();){var p=u.getNext();!l&&a(o,p)<=0&&(l=!0),l&&h<this.mi&&a(p,s)<=0?h++:r=r.updateImmediateChild(p.name,i.ChildrenNode.EMPTY_NODE)}}return this.Ii.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.Ii.getIndexedFilter()},t.prototype.getIndex=function(){return this.me},t.prototype.Oi=function(t,e,n,r,u){var c;if(this.Ri){var h=this.me.getCompare();c=function(t,e){return h(e,t)}}else c=this.me.getCompare();var l=t;s.assert(l.numChildren()==this.mi,"");var p=new o.NamedNode(e,n),f=this.Ri?l.getFirstChild(this.me):l.getLastChild(this.me),d=this.Ii.matches(p);if(l.hasChild(e)){for(var v=l.getImmediateChild(e),y=r.getChildAfterChild(this.me,f,this.Ri);null!=y&&(y.name==e||l.hasChild(y.name));)y=r.getChildAfterChild(this.me,y,this.Ri);var g=null==y?1:c(y,p);if(d&&!n.isEmpty()&&g>=0)return null!=u&&u.trackChildChange(a.Change.childChangedChange(e,n,v)),l.updateImmediateChild(e,n);null!=u&&u.trackChildChange(a.Change.childRemovedChange(e,v));var m=l.updateImmediateChild(e,i.ChildrenNode.EMPTY_NODE);return null!=y&&this.Ii.matches(y)?(null!=u&&u.trackChildChange(a.Change.childAddedChange(y.name,y.node)),m.updateImmediateChild(y.name,y.node)):m}return n.isEmpty()?t:d&&c(f,p)>=0?(null!=u&&(u.trackChildChange(a.Change.childRemovedChange(f.name,f.node)),u.trackChildChange(a.Change.childAddedChange(e,n))),l.updateImmediateChild(e,n).updateImmediateChild(f.name,i.ChildrenNode.EMPTY_NODE)):t},t}();e.LimitedFilter=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(0),o=n(21),s=n(22),a=n(2),u=n(110),c=n(3),h=n(1),l=n(43),p=n(7),f=n(0),d=n(11),v=n(4),y=n(18);!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(r=e.TransactionStatus||(e.TransactionStatus={})),y.Repo.Ai=25,y.Repo.prototype.ie=function(){this.Di=new u.Tree},y.Repo.prototype.startTransaction=function(t,e,n,a){this.de("transaction on "+t);var u=function(){},y=new o.Reference(this,t);y.on("value",u);var g={path:t,update:e,onComplete:n,status:null,order:h.LUIDGenerator(),applyLocally:a,retryCount:0,unwatcher:function(){y.off("value",u)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},m=this.Mi(t);g.currentInputSnapshot=m;var E=g.update(m.val());if(void 0===E){if(g.unwatcher(),g.currentOutputSnapshotRaw=null,g.currentOutputSnapshotResolved=null,g.onComplete){var b=new s.DataSnapshot(g.currentInputSnapshot,new o.Reference(this,g.path),c.PRIORITY_INDEX);g.onComplete(null,!1,b)}}else{p.validateFirebaseData("transaction failed: Data returned ",E,g.path),g.status=r.RUN;var C=this.Di.subTree(t),_=C.getValue()||[];_.push(g),C.setValue(_);var N=void 0;"object"==typeof E&&null!==E&&f.contains(E,".priority")?(N=f.safeGet(E,".priority"),i.assert(p.isValidPriority(N),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):N=(this.ue.calcCompleteEventCache(t)||v.ChildrenNode.EMPTY_NODE).getPriority().val(),N=N;var w=this.generateServerValues(),S=d.nodeFromJSON(E,N),O=l.resolveDeferredValueSnapshot(S,w);g.currentOutputSnapshotRaw=S,g.currentOutputSnapshotResolved=O,g.currentWriteId=this.pe();var P=this.ue.applyUserOverwrite(t,O,g.currentWriteId,g.applyLocally);this.K.raiseEventsForChangedPath(t,P),this.Li()}},y.Repo.prototype.Mi=function(t,e){return this.ue.calcCompleteEventCache(t,e)||v.ChildrenNode.EMPTY_NODE},y.Repo.prototype.Li=function(t){var e=this;if(void 0===t&&(t=this.Di),t||this.Fi(t),null!==t.getValue()){var n=this.xi(t);i.assert(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===r.RUN})&&this.ki(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.Li(t)})},y.Repo.prototype.ki=function(t,e){for(var n=this,u=e.map(function(t){return t.currentWriteId}),l=this.Mi(t,u),p=l,f=l.hash(),d=0;d<e.length;d++){var v=e[d];i.assert(v.status===r.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=r.SENT,v.retryCount++;var y=a.Path.relativePath(t,v.path);p=p.updateChild(y,v.currentOutputSnapshotRaw)}var g=p.val(!0),m=t;this.Z.put(""+m,g,function(i){n.de("transaction put response",{path:""+m,status:i});var a=[];if("ok"===i){for(var u=[],l=0;l<e.length;l++){if(e[l].status=r.COMPLETED,a=a.concat(n.ue.ackUserWrite(e[l].currentWriteId)),e[l].onComplete){var p=e[l].currentOutputSnapshotResolved,f=new o.Reference(n,e[l].path),d=new s.DataSnapshot(p,f,c.PRIORITY_INDEX);u.push(e[l].onComplete.bind(null,null,!0,d))}e[l].unwatcher()}n.Fi(n.Di.subTree(t)),n.Li(),n.K.raiseEventsForChangedPath(t,a);for(l=0;l<u.length;l++)h.exceptionGuard(u[l])}else{if("datastale"===i)for(l=0;l<e.length;l++)e[l].status===r.SENT_NEEDS_ABORT?e[l].status=r.NEEDS_ABORT:e[l].status=r.RUN;else{h.warn("transaction at "+m+" failed: "+i);for(l=0;l<e.length;l++)e[l].status=r.NEEDS_ABORT,e[l].abortReason=i}n.le(t)}},f)},y.Repo.prototype.le=function(t){var e=this.Wi(t),n=e.path(),r=this.xi(e);return this.ji(r,n),n},y.Repo.prototype.ji=function(t,e){if(0!==t.length){for(var n=[],u=[],v=t.filter(function(t){return t.status===r.RUN}).map(function(t){return t.currentWriteId}),g=0;g<t.length;g++){var m=t[g],E=a.Path.relativePath(e,m.path),b=!1,C=void 0;if(i.assert(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===r.NEEDS_ABORT)b=!0,C=m.abortReason,u=u.concat(this.ue.ackUserWrite(m.currentWriteId,!0));else if(m.status===r.RUN)if(m.retryCount>=y.Repo.Ai)b=!0,C="maxretry",u=u.concat(this.ue.ackUserWrite(m.currentWriteId,!0));else{var _=this.Mi(m.path,v);m.currentInputSnapshot=_;var N=t[g].update(_.val());if(void 0!==N){p.validateFirebaseData("transaction failed: Data returned ",N,m.path);var w=d.nodeFromJSON(N);"object"==typeof N&&null!=N&&f.contains(N,".priority")||(w=w.updatePriority(_.getPriority()));var S=m.currentWriteId,O=this.generateServerValues(),P=l.resolveDeferredValueSnapshot(w,O);m.currentOutputSnapshotRaw=w,m.currentOutputSnapshotResolved=P,m.currentWriteId=this.pe(),v.splice(v.indexOf(S),1),u=(u=u.concat(this.ue.applyUserOverwrite(m.path,P,m.currentWriteId,m.applyLocally))).concat(this.ue.ackUserWrite(S,!0))}else b=!0,C="nodata",u=u.concat(this.ue.ackUserWrite(m.currentWriteId,!0))}if(this.K.raiseEventsForChangedPath(e,u),u=[],b&&(t[g].status=r.COMPLETED,function(t){setTimeout(t,Math.floor(0))}(t[g].unwatcher),t[g].onComplete))if("nodata"===C){var I=new o.Reference(this,t[g].path),T=t[g].currentInputSnapshot,A=new s.DataSnapshot(T,I,c.PRIORITY_INDEX);n.push(t[g].onComplete.bind(null,null,!1,A))}else n.push(t[g].onComplete.bind(null,Error(C),!1,null))}this.Fi(this.Di);for(g=0;g<n.length;g++)h.exceptionGuard(n[g]);this.Li()}},y.Repo.prototype.Wi=function(t){for(var e,n=this.Di;null!==(e=t.getFront())&&null===n.getValue();)n=n.subTree(e),t=t.popFront();return n},y.Repo.prototype.xi=function(t){var e=[];return this.Vi(t,e),e.sort(function(t,e){return t.order-e.order}),e},y.Repo.prototype.Vi=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.Vi(t,e)})},y.Repo.prototype.Fi=function(t){var e=this,n=t.getValue();if(n){for(var i=0,o=0;o<n.length;o++)n[o].status!==r.COMPLETED&&(n[i]=n[o],i++);n.length=i,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.Fi(t)})},y.Repo.prototype.fe=function(t){var e=this,n=this.Wi(t).path(),r=this.Di.subTree(t);return r.forEachAncestor(function(t){e.Qi(t)}),this.Qi(r),r.forEachDescendant(function(t){e.Qi(t)}),n},y.Repo.prototype.Qi=function(t){var e=t.getValue();if(null!==e){for(var n=[],o=[],s=-1,a=0;a<e.length;a++)e[a].status===r.SENT_NEEDS_ABORT||(e[a].status===r.SENT?(i.assert(s===a-1,"All SENT items should be at beginning of queue."),s=a,e[a].status=r.SENT_NEEDS_ABORT,e[a].abortReason="set"):(i.assert(e[a].status===r.RUN,"Unexpected transaction status in abort"),e[a].unwatcher(),o=o.concat(this.ue.ackUserWrite(e[a].currentWriteId,!0)),e[a].onComplete&&n.push(e[a].onComplete.bind(null,Error("set"),!1,null))));-1===s?t.setValue(null):e.length=s+1,this.K.raiseEventsForChangedPath(t.path(),o);for(a=0;a<n.length;a++)h.exceptionGuard(n[a])}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(0),s=function(){return function(){this.children={},this.childCount=0,this.value=null}}();e.TreeNode=s;var a=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new s),this.qi=t,this.Ui=e,this._e=n}return t.prototype.subTree=function(e){for(var n,r=e instanceof i.Path?e:new i.Path(e),a=this;null!==(n=r.getFront());)a=new t(n,a,o.safeGet(a._e.children,n)||new s),r=r.popFront();return a},t.prototype.getValue=function(){return this._e.value},t.prototype.setValue=function(t){r.assert(void 0!==t,"Cannot set value to undefined"),this._e.value=t,this.Bi()},t.prototype.clear=function(){this._e.value=null,this._e.children={},this._e.childCount=0,this.Bi()},t.prototype.hasChildren=function(){return this._e.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;o.forEach(this._e.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new i.Path(null===this.Ui?this.qi:this.Ui.path()+"/"+this.qi)},t.prototype.name=function(){return this.qi},t.prototype.parent=function(){return this.Ui},t.prototype.Bi=function(){null!==this.Ui&&this.Ui.Hi(this.qi,this)},t.prototype.Hi=function(t,e){var n=e.isEmpty(),r=o.contains(this._e.children,t);n&&r?(delete this._e.children[t],this._e.childCount--,this.Bi()):n||r||(this._e.children[t]=e._e,this._e.childCount++,this.Bi())},t}();e.Tree=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(54),i=n(53);e.forceLongPolling=function(){r.WebSocketConnection.forceDisallow(),i.BrowserPollConnection.forceAllow()},e.forceWebSockets=function(){i.BrowserPollConnection.forceDisallow()},e.isWebSocketsAvailable=function(){return r.WebSocketConnection.isAvailable()},e.setSecurityDebugCallback=function(t,e){t.repo.J.it=e},e.stats=function(t,e){t.repo.stats(e)},e.statsIncrementCounter=function(t,e){t.repo.statsIncrementCounter(e)},e.dataUpdateCount=function(t){return t.repo.dataUpdateCount},e.interceptServerData=function(t,e){return t.repo.he(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(34),i=n(50),o=n(26),s=n(52);e.DataConnection=i.PersistentConnection,i.PersistentConnection.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},i.PersistentConnection.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},e.RealTimeConnection=s.Connection,e.hijackHash=function(t){var e=i.PersistentConnection.prototype.put;return i.PersistentConnection.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){i.PersistentConnection.prototype.put=e}},e.ConnectionTarget=r.RepoInfo,e.queryIdentifier=function(t){return t.queryIdentifier()},e.listens=function(t){return t.repo.J.Je},e.forceRestClient=function(t){o.RepoManager.getInstance().forceRestClient(t)}}],[78])}catch(t){throw Error("Cannot instantiate firebase-database.js - be sure to load firebase-app.js first.")}try{webpackJsonpFirebase([3],{116:function(t,e,n){n(117)},117:function(t,e,n){"use strict";function r(t){var e=new Uint8Array(t);return window.btoa(String.fromCharCode.apply(null,e))}function i(t){var e={Messaging:b};t.INTERNAL.registerService("messaging",function(t){return self&&"ServiceWorkerGlobalScope"in self?new _(t):new b(t)},e)}Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(0),a={AVAILABLE_IN_WINDOW:"only-available-in-window",AVAILABLE_IN_SW:"only-available-in-sw",SHOULD_BE_INHERITED:"should-be-overriden",BAD_SENDER_ID:"bad-sender-id",INCORRECT_GCM_SENDER_ID:"incorrect-gcm-sender-id",PERMISSION_DEFAULT:"permission-default",PERMISSION_BLOCKED:"permission-blocked",UNSUPPORTED_BROWSER:"unsupported-browser",NOTIFICATIONS_BLOCKED:"notifications-blocked",FAILED_DEFAULT_REGISTRATION:"failed-serviceworker-registration",SW_REGISTRATION_EXPECTED:"sw-registration-expected",GET_SUBSCRIPTION_FAILED:"get-subscription-failed",INVALID_SAVED_TOKEN:"invalid-saved-token",SW_REG_REDUNDANT:"sw-reg-redundant",TOKEN_SUBSCRIBE_FAILED:"token-subscribe-failed",TOKEN_SUBSCRIBE_NO_TOKEN:"token-subscribe-no-token",TOKEN_SUBSCRIBE_NO_PUSH_SET:"token-subscribe-no-push-set",USE_SW_BEFORE_GET_TOKEN:"use-sw-before-get-token",INVALID_DELETE_TOKEN:"invalid-delete-token",DELETE_TOKEN_NOT_FOUND:"delete-token-not-found",DELETE_SCOPE_NOT_FOUND:"delete-scope-not-found",BG_HANDLER_FUNCTION_EXPECTED:"bg-handler-function-expected",NO_WINDOW_CLIENT_TO_MSG:"no-window-client-to-msg",UNABLE_TO_RESUBSCRIBE:"unable-to-resubscribe",NO_FCM_TOKEN_FOR_RESUBSCRIBE:"no-fcm-token-for-resubscribe",FAILED_TO_DELETE_TOKEN:"failed-to-delete-token",NO_SW_IN_REG:"no-sw-in-reg",BAD_SCOPE:"bad-scope",BAD_VAPID_KEY:"bad-vapid-key",BAD_SUBSCRIPTION:"bad-subscription",BAD_TOKEN:"bad-token",BAD_PUSH_SET:"bad-push-set",FAILED_DELETE_VAPID_KEY:"failed-delete-vapid-key"},u={codes:a,map:(o={},o[a.AVAILABLE_IN_WINDOW]="This method is available in a Window context.",o[a.AVAILABLE_IN_SW]="This method is available in a service worker context.",o["should-be-overriden"]="This method should be overriden by extended classes.",o["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",o["permission-default"]="The required permissions were not granted and dismissed instead.",o["permission-blocked"]="The required permissions were not granted and blocked instead.",o["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",o["notifications-blocked"]="Notifications have been blocked.",o[a.FAILED_DEFAULT_REGISTRATION]="We are unable to register the default service worker. {$browserErrorMessage}",o["sw-registration-expected"]="A service worker registration was the expected input.",o["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",o["invalid-saved-token"]="Unable to access details of the saved token.",o["sw-reg-redundant"]="The service worker being used for push was made redundant.",o["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$message}",o["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",o["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",o["use-sw-before-get-token"]="You must call useServiceWorker() before calling getToken() to ensure your service worker is used.",o["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",o["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",o["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",o["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",o["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",o["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",o["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",o["failed-to-delete-token"]="Unable to delete the currently saved token.",o["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",o["incorrect-gcm-sender-id"]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",o["bad-scope"]="The service worker scope must be a string with at least one character.",o["bad-vapid-key"]="The public VAPID key must be a string with at least one character.",o["bad-subscription"]="The subscription must be a valid PushSubscription.",o["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",o["bad-push-set"]="The FCM push set used for storage / lookup was not not a valid push set string.",o["failed-delete-vapid-key"]="The VAPID key could not be deleted.",o)},c=function(t){return r(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},h=[4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110],l={ENDPOINT:"https://fcm.googleapis.com",APPLICATION_SERVER_KEY:h,SUBSCRIPTION_OPTIONS:{userVisibleOnly:!0,applicationServerKey:new Uint8Array(h)}},p="fcm_token_object_Store",f=function(){function t(){this.e=new s.ErrorFactory("messaging","Messaging",u.map),this.t=null}return t.prototype.r=function(){return this.t?this.t:(this.t=new Promise(function(e,n){var r=indexedDB.open(t.DB_NAME,1);r.onerror=function(t){n(t.target.error)},r.onsuccess=function(t){e(t.target.result)},r.onupgradeneeded=function(t){var e=t.target.result.createObjectStore(p,{keyPath:"swScope"});e.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),e.createIndex("fcmToken","fcmToken",{unique:!0})}}),this.t)},t.prototype.closeDatabase=function(){var t=this;return this.t?this.t.then(function(e){e.close(),t.t=null}):Promise.resolve()},t.prototype.getTokenDetailsFromToken=function(t){return this.r().then(function(e){return new Promise(function(n,r){var i=e.transaction([p]).objectStore(p).index("fcmToken").get(t);i.onerror=function(t){r(t.target.error)},i.onsuccess=function(t){n(t.target.result)}})})},t.prototype.n=function(t){return this.r().then(function(e){return new Promise(function(n,r){var i=e.transaction([p]).objectStore(p).get(t);i.onerror=function(t){r(t.target.error)},i.onsuccess=function(t){n(t.target.result)}})})},t.prototype.o=function(t){return this.r().then(function(e){return new Promise(function(n,r){var i=[],o=e.transaction([p]).objectStore(p).openCursor();o.onerror=function(t){r(t.target.error)},o.onsuccess=function(e){var r=e.target.result;r?(r.value.fcmSenderId===t&&i.push(r.value),r.continue()):n(i)}})})},t.prototype.subscribeToFCM=function(t,e,n){var r=this,i=c(e.getKey("p256dh")),o=c(e.getKey("auth")),s="authorized_entity="+t+"&endpoint="+e.endpoint+"&encryption_key="+i+"&encryption_auth="+o;n&&(s+="&pushSet="+n);var a=new Headers;a.append("Content-Type","application/x-www-form-urlencoded");var h={method:"POST",headers:a,body:s};return fetch(l.ENDPOINT+"/fcm/connect/subscribe",h).then(function(t){return t.json()}).then(function(t){var e=t;if(e.error){var n=e.error.message;throw r.e.create(u.codes.TOKEN_SUBSCRIBE_FAILED,{message:n})}if(!e.token)throw r.e.create(u.codes.TOKEN_SUBSCRIBE_NO_TOKEN);if(!e.pushSet)throw r.e.create(u.codes.TOKEN_SUBSCRIBE_NO_PUSH_SET);return{token:e.token,pushSet:e.pushSet}})},t.prototype.i=function(t,e){return t.endpoint===e.endpoint&&c(t.getKey("auth"))===e.auth&&c(t.getKey("p256dh"))===e.p256dh},t.prototype.s=function(t,e,n,r,i){var o={swScope:e.scope,endpoint:n.endpoint,auth:c(n.getKey("auth")),p256dh:c(n.getKey("p256dh")),fcmToken:r,fcmPushSet:i,fcmSenderId:t};return this.r().then(function(t){return new Promise(function(e,n){var r=t.transaction([p],"readwrite").objectStore(p).put(o);r.onerror=function(t){n(t.target.error)},r.onsuccess=function(t){e()}})})},t.prototype.getSavedToken=function(t,e){var n=this;return e instanceof ServiceWorkerRegistration?"string"!=typeof t||0===t.length?Promise.reject(this.e.create(u.codes.BAD_SENDER_ID)):this.o(t).then(function(n){if(0!==n.length){var r=n.findIndex(function(n){return e.scope===n.swScope&&t===n.fcmSenderId});if(-1!==r)return n[r]}}).then(function(t){if(t)return e.pushManager.getSubscription().catch(function(t){throw n.e.create(u.codes.GET_SUBSCRIPTION_FAILED)}).then(function(e){if(e&&n.i(e,t))return t.fcmToken})}):Promise.reject(this.e.create(u.codes.SW_REGISTRATION_EXPECTED))},t.prototype.createToken=function(t,e){var n=this;if("string"!=typeof t||0===t.length)return Promise.reject(this.e.create(u.codes.BAD_SENDER_ID));if(!(e instanceof ServiceWorkerRegistration))return Promise.reject(this.e.create(u.codes.SW_REGISTRATION_EXPECTED));var r,i;return e.pushManager.getSubscription().then(function(t){return t||e.pushManager.subscribe(l.SUBSCRIPTION_OPTIONS)}).then(function(e){return r=e,n.subscribeToFCM(t,r)}).then(function(o){return i=o,n.s(t,e,r,i.token,i.pushSet)}).then(function(){return i.token})},t.prototype.deleteToken=function(t){var e=this;return"string"!=typeof t||0===t.length?Promise.reject(this.e.create(u.codes.INVALID_DELETE_TOKEN)):this.getTokenDetailsFromToken(t).then(function(t){if(!t)throw e.e.create(u.codes.DELETE_TOKEN_NOT_FOUND);return e.r().then(function(n){return new Promise(function(r,i){var o=n.transaction([p],"readwrite").objectStore(p).delete(t.swScope);o.onerror=function(t){i(t.target.error)},o.onsuccess=function(n){0!==n.target.result?r(t):i(e.e.create(u.codes.FAILED_TO_DELETE_TOKEN))}})})})},t}(),d="messagingSenderId",v=function(){function t(t){var e=this;if(this.e=new s.ErrorFactory("messaging","Messaging",u.map),!t.options[d]||"string"!=typeof t.options[d])throw this.e.create(u.codes.BAD_SENDER_ID);this.a=t.options[d],this.c=new f,this.app=t,this.INTERNAL={},this.INTERNAL.delete=function(){return e.delete}}return t.prototype.getToken=function(){var t=this,e=this.u();return"granted"!==e?"denied"===e?Promise.reject(this.e.create(u.codes.NOTIFICATIONS_BLOCKED)):Promise.resolve(null):this._().then(function(e){return t.c.getSavedToken(t.a,e).then(function(n){return n||t.c.createToken(t.a,e)})})},t.prototype.deleteToken=function(t){var e=this;return this.c.deleteToken(t).then(function(){return e._().then(function(t){if(t)return t.pushManager.getSubscription()}).then(function(t){if(t)return t.unsubscribe()})})},t.prototype._=function(){throw this.e.create(u.codes.SHOULD_BE_INHERITED)},t.prototype.requestPermission=function(){throw this.e.create(u.codes.AVAILABLE_IN_WINDOW)},t.prototype.useServiceWorker=function(t){throw this.e.create(u.codes.AVAILABLE_IN_WINDOW)},t.prototype.onMessage=function(t,e,n){throw this.e.create(u.codes.AVAILABLE_IN_WINDOW)},t.prototype.onTokenRefresh=function(t,e,n){throw this.e.create(u.codes.AVAILABLE_IN_WINDOW)},t.prototype.setBackgroundMessageHandler=function(t){throw this.e.create(u.codes.AVAILABLE_IN_SW)},t.prototype.delete=function(){return this.c.closeDatabase()},t.prototype.u=function(){return Notification.permission},t.prototype.getTokenManager=function(){return this.c},t}(),y={TYPE_OF_MSG:"firebase-messaging-msg-type",DATA:"firebase-messaging-msg-data"},g={PARAMS:y,TYPES_OF_MSG:{PUSH_MSG_RECEIVED:"push-msg-received",NOTIFICATION_CLICKED:"notification-clicked"},createNewMsg:function(t,e){return n={},n[y.TYPE_OF_MSG]=t,n[y.DATA]=e,n;var n}},m={path:"/firebase-messaging-sw.js",scope:"/firebase-cloud-messaging-push-scope"},E=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=function(t){function e(e){var n=t.call(this,e)||this;return n.d=null,n.f=Object(s.createSubscribe)(function(t){n.d=t}),n.h=null,n.p=Object(s.createSubscribe)(function(t){n.h=t}),n.l(),n}return E(e,t),e.prototype.getToken=function(){var e=this;return this.g()?this.T().then(function(){return t.prototype.getToken.call(e)}):Promise.reject(this.e.create(u.codes.UNSUPPORTED_BROWSER))},e.prototype.T=function(){var t=this;if(this.S)return this.S;var e=document.querySelector('link[rel="manifest"]');return this.S=e?fetch(e.href).then(function(t){return t.json()}).catch(function(){return Promise.resolve()}).then(function(e){if(e&&e.gcm_sender_id&&"103953800507"!==e.gcm_sender_id)throw t.e.create(u.codes.INCORRECT_GCM_SENDER_ID)}):Promise.resolve(),this.S},e.prototype.requestPermission=function(){var t=this;return"granted"===Notification.permission?Promise.resolve():new Promise(function(e,n){var r=function(r){return"granted"===r?e():n("denied"===r?t.e.create(u.codes.PERMISSION_BLOCKED):t.e.create(u.codes.PERMISSION_DEFAULT))},i=Notification.requestPermission(function(t){i||r(t)});i&&i.then(r)})},e.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw this.e.create(u.codes.SW_REGISTRATION_EXPECTED);if(void 0!==this.b)throw this.e.create(u.codes.USE_SW_BEFORE_GET_TOKEN);this.b=t},e.prototype.onMessage=function(t,e,n){return this.f(t,e,n)},e.prototype.onTokenRefresh=function(t,e,n){return this.p(t,e,n)},e.prototype.v=function(t){var e=this,n=t.installing||t.waiting||t.active;return new Promise(function(r,i){if(n)if("activated"!==n.state)if("redundant"!==n.state){var o=function(){if("activated"===n.state)r(t);else{if("redundant"!==n.state)return;i(e.e.create(u.codes.SW_REG_REDUNDANT))}n.removeEventListener("statechange",o)};n.addEventListener("statechange",o)}else i(e.e.create(u.codes.SW_REG_REDUNDANT));else r(t);else i(e.e.create(u.codes.NO_SW_IN_REG))})},e.prototype._=function(){var t=this;return this.b?this.v(this.b):(this.b=null,navigator.serviceWorker.register(m.path,{scope:m.scope}).catch(function(e){throw t.e.create(u.codes.FAILED_DEFAULT_REGISTRATION,{browserErrorMessage:e.message})}).then(function(e){return t.v(e).then(function(){return t.b=e,e.update(),e})}))},e.prototype.l=function(){var t=this;"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(e){if(e.data&&e.data[g.PARAMS.TYPE_OF_MSG]){var n=e.data;switch(n[g.PARAMS.TYPE_OF_MSG]){case g.TYPES_OF_MSG.PUSH_MSG_RECEIVED:case g.TYPES_OF_MSG.NOTIFICATION_CLICKED:var r=n[g.PARAMS.DATA];t.d.next(r)}}},!1)},e.prototype.g=function(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")},e}(v),C=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(t){function e(e){var n=t.call(this,e)||this;return self.addEventListener("push",function(t){return n.I(t)},!1),self.addEventListener("pushsubscriptionchange",function(t){return n.m(t)},!1),self.addEventListener("notificationclick",function(t){return n.y(t)},!1),n.N=null,n}return C(e,t),e.prototype.I=function(t){var e,n=this;try{e=t.data.json()}catch(t){return}var r=this.w().then(function(t){if(t){if(e.notification||n.N)return n.k(e)}else{var r=n.O(e);if(r){var i=r.title||"";return self.registration.showNotification(i,r)}if(n.N)return n.N(e)}});t.waitUntil(r)},e.prototype.m=function(t){var e=this,n=this.getToken().then(function(t){if(!t)throw e.e.create(u.codes.NO_FCM_TOKEN_FOR_RESUBSCRIBE);var n=null,r=e.getTokenManager();return r.getTokenDetailsFromToken(t).then(function(t){if(!(n=t))throw e.e.create(u.codes.INVALID_SAVED_TOKEN);return self.registration.pushManager.subscribe(l.SUBSCRIPTION_OPTIONS)}).then(function(t){return r.subscribeToFCM(n.fcmSenderId,t,n.fcmPushSet)}).catch(function(t){return r.deleteToken(n.fcmToken).then(function(){throw e.e.create(u.codes.UNABLE_TO_RESUBSCRIBE,{message:t})})})});t.waitUntil(n)},e.prototype.y=function(t){var e=this;if(t.notification&&t.notification.data&&t.notification.data.FCM_MSG){t.stopImmediatePropagation(),t.notification.close();var n=t.notification.data.FCM_MSG,r=n.notification.click_action;if(r){var i=this.D(r).then(function(t){return t||self.clients.openWindow(r)}).then(function(t){if(t){n.notification,delete n.notification;var r=g.createNewMsg(g.TYPES_OF_MSG.NOTIFICATION_CLICKED,n);return e.A(t,r)}});t.waitUntil(i)}}},e.prototype.O=function(t){if(t&&"object"==typeof t.notification){var e=Object.assign({},t.notification);return e.data=(n={},n.FCM_MSG=t,n),e;var n}},e.prototype.setBackgroundMessageHandler=function(t){if(t&&"function"!=typeof t)throw this.e.create(u.codes.BG_HANDLER_FUNCTION_EXPECTED);this.N=t},e.prototype.D=function(t){var e=new URL(t).href;return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(t){for(var n=null,r=0;r<t.length;r++)if(new URL(t[r].url).href===e){n=t[r];break}if(n)return n.focus(),n})},e.prototype.A=function(t,e){var n=this;return new Promise(function(r,i){if(!t)return i(n.e.create(u.codes.NO_WINDOW_CLIENT_TO_MSG));t.postMessage(e),r()})},e.prototype.w=function(){return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(t){return t.some(function(t){return"visible"===t.visibilityState})})},e.prototype.k=function(t){var e=this;return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(n){var r=g.createNewMsg(g.TYPES_OF_MSG.PUSH_MSG_RECEIVED,t);return Promise.all(n.map(function(t){return e.A(t,r)}))})},e.prototype._=function(){return Promise.resolve(self.registration)},e}(v),N=n(6);e.registerMessaging=i,i(N.firebase)}},[116])}catch(t){throw Error("Cannot instantiate firebase-messaging.js - be sure to load firebase-app.js first.")}if(void 0===firebase)throw new Error("hosting/init-error: Firebase SDK not detected. You must include it before /__/firebase/init.js");firebase.initializeApp({apiKey:"AIzaSyCx13-CU1uqE3xQWpx1yxNBujUgnNmVb1Q",databaseURL:"https://fengerzhcom.firebaseio.com",storageBucket:"fengerzhcom.appspot.com",authDomain:"fengerzhcom.firebaseapp.com",messagingSenderId:"84597767663",projectId:"fengerzhcom"}),function(){"use strict";var t=document.querySelector(".post-content"),e=document.querySelector(".progress-bar");if(t&&e){var n=0,r=t.scrollHeight,i=e.querySelector(".completed"),o=e.querySelector(".remaining"),s=e.querySelector(".time-completed"),a=e.querySelector(".time-remaining");document.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop;if(e.style.bottom=t>n?"0%":"-100%",t<=r){var u=t/r,c=(100*u).toFixed(2),h=100-parseFloat(c);i.style.width=c.toString()+"%",o.style.width=h.toString()+"%";var l=60*parseInt(e.getAttribute("data-minutes")),p=parseInt(u*l),f=parseInt(p/60),d=parseInt(60*(p/60-f)),v=l-p,y=parseInt(v/60),g=parseInt(60*(v/60-y));f=f<10?"0"+f:f,d=d<10?"0"+d:d,y=y<10?"0"+y:y,g=g<10?"0"+g:g,s.innerText=f+":"+d,a.innerText=y+":"+g}else{i.style.width="100%",o.style.width="0%";var m=parseInt(e.getAttribute("data-minutes"));m=m<10?"0"+m:m,s.innerText="00:00",a.innerText=m+":00"}n=t})}}(),function(t){"use strict";function e(){var e=u.clientHeight,n=t.innerHeight;return e<n?n:e}function n(){return t.pageYOffset||u.scrollTop}function r(t){var e=0,n=0;do{isNaN(t.offsetTop)||(e+=t.offsetTop),isNaN(t.offsetLeft)||(n+=t.offsetLeft)}while(t=t.offsetParent);return{top:e,left:n}}function i(t,i){var o=t.offsetHeight,s=n(),a=s+e(),u=r(t).top,c=u+o;return u+o*(i=i||0)<=a&&c-o*i>=s}function o(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function s(t){if(t){var e=new Image;e.onload=function(){t.src=e.src},e.src=t.getAttribute("data-url")}}function a(t,e){this.el=t,this.options=o(this.defaults,e),this._init()}var u=t.document.documentElement;a.prototype={defaults:{minDuration:0,maxDuration:0,viewportFactor:0},_init:function(){this.items=Array.prototype.slice.call(document.querySelectorAll("#"+this.el.id+" > article")),this.itemsCount=this.items.length,this.itemsRenderedCount=0,this.didScroll=!1;var e=this;e.items.forEach(function(t,n){i(t)&&(e._checkTotalRendered(),classie.add(t,"shown"),s(t.querySelector(".preload")))}),t.addEventListener("scroll",function(){e._onScrollFn()},!1),t.addEventListener("resize",function(){e._resizeHandler()},!1)},_onScrollFn:function(){var t=this;this.didScroll||(this.didScroll=!0,setTimeout(function(){t._scrollPage()},60))},_scrollPage:function(){var t=this;this.items.forEach(function(r,o){classie.has(r,"shown")||classie.has(r,"animate")||!i(r,t.options.viewportFactor)||setTimeout(function(){var i=n()+e()/2;if(t.el.style.WebkitPerspectiveOrigin="50% "+i+"px",t.el.style.MozPerspectiveOrigin="50% "+i+"px",t.el.style.perspectiveOrigin="50% "+i+"px",t._checkTotalRendered(),t.options.minDuration&&t.options.maxDuration){var o=Math.random()*(t.options.maxDuration-t.options.minDuration)+t.options.minDuration+"s";r.style.WebkitAnimationDuration=o,r.style.MozAnimationDuration=o,r.style.animationDuration=o}classie.add(r,"animate"),s(r.querySelector(".preload"))},25)}),this.didScroll=!1},_resizeHandler:function(){var t=this;this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t._scrollPage(),t.resizeTimeout=null},1e3)},_checkTotalRendered:function(){++this.itemsRenderedCount,this.itemsRenderedCount===this.itemsCount&&t.removeEventListener("scroll",this._onScrollFn)}},t.AnimOnScroll=a}(window),function(t){t.fn.simpleJekyllSearch=function(e){function n(){c.keyup(function(e){t(this).val().length?i(r(t(this).val())):o()})}function r(e){var n=[];return t.each(u,function(t,r){for(var t=0;t<a.length;t++)void 0!==r[a[t]]&&-1!==r[a[t]].toLowerCase().indexOf(e.toLowerCase())&&(n.push(r),t=a.length)}),n}function i(e){o(),h.append(t(s.searchResultsTitle)),e.length?t.each(e,function(e,n){if(e<s.limit){for(var r=s.template,e=0;e<a.length;e++){var i=new RegExp("{"+a[e]+"}","g");r=r.replace(i,n[a[e]])}h.append(t(r))}}):h.append(s.noResults)}function o(){h.children().remove()}var s=t.extend({jsonFile:"/search.json",jsonFormat:"title,tags,categories,url,date",template:'<li><article><a href="{url}"><span class="entry-category">{categories}</span> {title} <span class="entry-date"><time datetime="{date}">{date}</time></span></a></article></li>',searchResults:".search-results",limit:"10",noResults:"<p>Puuuts! No encontramos nada :(</p>"},e),a=s.jsonFormat.split(","),u=[],c=this,h=t(s.searchResults);s.jsonFile.length&&h.length&&t.ajax({type:"GET",url:s.jsonFile,dataType:"json",success:function(t,e,r){u=t,n()},error:function(t,e,n){console.log("***ERROR in simpleJekyllSearch.js***"),console.log(t),console.log(e),console.log(n)}})}}(Zepto),function(t,e){"function"==typeof define&&define.amd?define([],e(t)):"object"==typeof exports?module.exports=e(t):t.smoothScroll=e(t)}("undefined"!=typeof global?global:this.window||this.global,function(t){"use strict";var e,n,r,i,o={},s="querySelector"in document&&"addEventListener"in t,a={selector:"[data-scroll]",selectorHeader:"[data-scroll-header]",speed:500,easing:"easeInOutCubic",offset:0,updateURL:!0,callback:function(){}},u=function(){var t={},e=!1,n=0,r=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],n++);for(;n<r;n++)!function(n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e&&"[object Object]"===Object.prototype.toString.call(n[r])?t[r]=u(!0,t[r],n[r]):t[r]=n[r])}(arguments[n]);return t},c=function(t){return Math.max(t.scrollHeight,t.offsetHeight,t.clientHeight)},h=function(t,e){var n,r,i=e.charAt(0),o="classList"in document.documentElement;for("["===i&&(n=(e=e.substr(1,e.length-2)).split("=")).length>1&&(r=!0,n[1]=n[1].replace(/"/g,"").replace(/'/g,""));t&&t!==document;t=t.parentNode){if("."===i)if(o){if(t.classList.contains(e.substr(1)))return t}else if(new RegExp("(^|\\s)"+e.substr(1)+"(\\s|$)").test(t.className))return t;if("#"===i&&t.id===e.substr(1))return t;if("["===i&&t.hasAttribute(n[0])){if(!r)return t;if(t.getAttribute(n[0])===n[1])return t}if(t.tagName.toLowerCase()===e)return t}return null},l=function(t){for(var e,n=String(t),r=n.length,i=-1,o="",s=n.charCodeAt(0);++i<r;){if(0===(e=n.charCodeAt(i)))throw new InvalidCharacterError("Invalid character: the input contains U+0000.");e>=1&&e<=31||127==e||0===i&&e>=48&&e<=57||1===i&&e>=48&&e<=57&&45===s?o+="\\"+e.toString(16)+" ":o+=e>=128||45===e||95===e||e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122?n.charAt(i):"\\"+n.charAt(i)}return o},p=function(t,e){var n;return"easeInQuad"===t&&(n=e*e),"easeOutQuad"===t&&(n=e*(2-e)),"easeInOutQuad"===t&&(n=e<.5?2*e*e:(4-2*e)*e-1),"easeInCubic"===t&&(n=e*e*e),"easeOutCubic"===t&&(n=--e*e*e+1),"easeInOutCubic"===t&&(n=e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1),"easeInQuart"===t&&(n=e*e*e*e),"easeOutQuart"===t&&(n=1- --e*e*e*e),"easeInOutQuart"===t&&(n=e<.5?8*e*e*e*e:1-8*--e*e*e*e),"easeInQuint"===t&&(n=e*e*e*e*e),"easeOutQuint"===t&&(n=1+--e*e*e*e*e),"easeInOutQuint"===t&&(n=e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e),n||e},f=function(t,e,n){var r=0;if(t.offsetParent)do{r+=t.offsetTop,t=t.offsetParent}while(t);return(r=r-e-n)>=0?r:0},d=function(){return Math.max(t.document.body.scrollHeight,t.document.documentElement.scrollHeight,t.document.body.offsetHeight,t.document.documentElement.offsetHeight,t.document.body.clientHeight,t.document.documentElement.clientHeight)},v=function(t){return t&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(t):{}},y=function(e,n){t.history.pushState&&(n||"true"===n)&&"file:"!==t.location.protocol&&t.history.pushState(null,null,[t.location.protocol,"//",t.location.host,t.location.pathname,t.location.search,e].join(""))},g=function(t){return null===t?0:c(t)+t.offsetTop};o.animateScroll=function(e,n,o){var s=v(e?e.getAttribute("data-options"):null),c=u(c||a,o||{},s),h="#"===(n="#"+l(n.substr(1)))?t.document.documentElement:t.document.querySelector(n),m=t.pageYOffset;r||(r=t.document.querySelector(c.selectorHeader)),i||(i=g(r));var E,b,C,_=f(h,i,parseInt(c.offset,10)),N=_-m,w=d(),S=0;y(n,c.updateURL);var O=function(r,i,o){var s=t.pageYOffset;(r==i||s==i||t.innerHeight+s>=w)&&(clearInterval(o),h.focus(),c.callback(e,n))},P=function(){b=(S+=16)/parseInt(c.speed,10),b=b>1?1:b,C=m+N*p(c.easing,b),t.scrollTo(0,Math.floor(C)),O(C,_,E)};0===t.pageYOffset&&t.scrollTo(0,0),E=setInterval(P,16)};var m=function(t){var n=h(t.target,e.selector);n&&"a"===n.tagName.toLowerCase()&&(t.preventDefault(),o.animateScroll(n,n.hash,e))},E=function(t){n||(n=setTimeout(function(){n=null,i=g(r)},66))};return o.destroy=function(){e&&(t.document.removeEventListener("click",m,!1),t.removeEventListener("resize",E,!1),e=null,n=null,r=null,i=null)},o.init=function(n){s&&(o.destroy(),e=u(a,n||{}),r=t.document.querySelector(e.selectorHeader),i=g(r),t.document.addEventListener("click",m,!1),r&&t.addEventListener("resize",E,!1))},o}),function(){for(var t=document.links,e=0,n=t.length;e<n;e++)t[e].hostname!=window.location.hostname&&(t[e].target="_blank",t[e].rel="noopener")}(),function(t,e,n){function r(){t(".search-wrapper").toggleClass("active"),i.searchform.toggleClass("active"),i.canvas.removeClass("search-overlay")}t("#menu").click(function(){t("body").addClass("push-menu-to-right"),t("#sidebar").addClass("open"),t(".overlay").addClass("show")}),t("#mask").click(function(){t("body").removeClass("push-menu-to-right"),t("#sidebar").removeClass("open"),t(".overlay").removeClass("show")});var i={close:t(".icon-remove-sign"),searchform:t(".search-form"),canvas:t("body"),dothis:t(".dosearch")};i.dothis.on("click",function(){t(".search-wrapper").toggleClass("active"),i.searchform.toggleClass("active"),i.searchform.find("input").focus(),i.canvas.toggleClass("search-overlay"),t(".search-field").simpleJekyllSearch()}),i.close.on("click",r),document.addEventListener("keyup",function(e){27==e.keyCode&&t(".search-overlay").length&&r()}),document.getElementsByClassName("home").length>=1&&new AnimOnScroll(document.getElementById("grid"),{minDuration:.4,maxDuration:.7,viewportFactor:.2}),smoothScroll.init({selectorHeader:".bar-header",speed:500,updateURL:!1}),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js");var o=firebase.messaging();t("#request").click(function(){o.requestPermission().then(function(){console.log("Notification permission granted."),o.getToken().then(function(t){t?(1!=e.localStorage.getItem("firebaseTokenSentToServer")?(console.log("Sending token to server..."),firebase.database().ref("messagetokens").push().set(t),e.localStorage.setItem("firebaseTokenSentToServer",1)):console.log("Token already sent to server so won't send it again unless it changes"),alert(t)):(console.log("No Instance ID token available. Request permission to generate one."),e.localStorage.setItem("firebaseTokenSentToServer",0))}).catch(function(t){console.log("An error occurred while retrieving token. ",t),e.localStorage.setItem("firebaseTokenSentToServer",0)})}).catch(function(t){console.log("Unable to get permission to notify.",t)})})}(Zepto,window);